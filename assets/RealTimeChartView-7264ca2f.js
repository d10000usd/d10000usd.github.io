import{W as V,r as y}from"./WebsocketConnector-4e94a4bb.js";import{a as f,t as _}from"./telegramini-40e3a79c.js";import{r as i,f as m,l as C,w as T,z as x,_ as p,g as O,o as l,c as g,a,t as r,n as S,u as o,F as E,p as v,k as b,q as M,b as W,e as I,d as B}from"./index-cc8b152a.js";const w="6"+_.t,R="1"+_.i,k=i(""),j=async t=>{try{const s=`
<span class="tg-spoiler">spoiler</span>
<b>Alarm</b> - <strong>Setting values enough</strong>
<i>Value changes </i> 
<tg-emoji emoji-id="5368324170671202286">ğŸ‘</tg-emoji> 
<a href="https://d10000usd.github.io/TsWebsocket_main?message=%22KRW-BTC%22">Chart</a>
${JSON.stringify(t.text,null,2)}
`;if(s.length>1){const e=await f.post(`https://api.telegram.org/bot${w}/sendMessage`,{chat_id:R,text:s,parse_mode:"HTML"},{headers:{"Content-Type":"application/json"}});return!0}else return!1}catch(s){console.error("Error sending message:",s)}},d=async t=>{const e=await j({text:t});return k.value=e?"ok":"error",1};class ${constructor(s,e){this.coinlist=i(Object.assign([],s.message)),this.monitoringCoin=e.value.monitoringCoin,this.sortingOrderkey=i(e.value.sortingOrder),this.settingValue=i(e.value.settingValue),this.shouldExecute=e.value.shouldExecute,this.messageCounter=0,this.componentname=e.value.componentname,this.status=e.value.status,this.asc_desc=e.value.asc_desc,this.coinea=e.value.coinea,this.eta=e.value.eta,this.addRatio=e.value.addRatio,this.alarmSenddingEa=e.value.alarmSenddingEa}initialize(){this.logicInstance2=new V(this.coinlist.value,"TelegramAlarmLogic_RISE",this.sortingOrderkey.value,this.asc_desc,this.coinea,this.eta),this.ticker=m(()=>{var s;return(s=this.logicInstance2.sortedWsData.value[this.monitoringCoin])==null?void 0:s.code}),this.sortingOrderValue=m(()=>{var s,e;return(e=(s=this.logicInstance2.sortedWsData.value[this.monitoringCoin])==null?void 0:s[this.sortingOrderkey.value])==null?void 0:e.toFixed(2)}),this.telemsg=C({Status:this.status,assets:this.ticker,Comparekey:this.sortingOrderkey.value,sortingOrderValue:this.sortingOrderValue,settingValue:this.settingValue.value,execution:this.componentname}),T(()=>this.settingValue.value,s=>{this.telemsg.settingValue=s}),x(()=>{this.telemsg.sortingOrderValue>this.settingValue.value&&this.shouldExecute&&(this.shouldExecute=!1,setTimeout(()=>{this.sendMessageAndUpdateStatus(),this.messageCounter++,this.messageCounter===this.alarmSenddingEa&&(this.settingValue.value+=this.addRatio,this.messageCounter=0,this.telemsg["next Value"]=this.settingValue.value,this.sendMessageAndUpdateStatus(),delete this.telemsg["next Value"]),this.shouldExecute=!0},1e3))})}run(){this.initialize()}sendMessageAndUpdateStatus(){d(this.telemsg)}}const A=t=>(v("data-v-2d0b4d56"),t=t(),b(),t),L=A(()=>a("br",null,null,-1)),N={__name:"TelegramMsg_BTC",props:["message","takenconinticker","dictionarys","componentname"],setup(t){const s=t,e=i(k);let n={assets:s.dictionarys,execution:s.componentname};return O(()=>{d(n)}),(c,u)=>(l(),g(E,null,[a("button",{class:S(["telebtn",{greenBtn:e.value==="ok",redBtn:e.value==="error"}]),onClick:u[0]||(u[0]=ee=>o(d)(o(n)))}," tele :: "+r(e.value),3),L],64))}},U=p(N,[["__scopeId","data-v-2d0b4d56"]]);const h=t=>(v("data-v-3de57d32"),t=t(),b(),t),z={class:"body-full"},F={class:"spacing mb-11"},K={class:"c-custom-card"},H={class:"pre1"},q=h(()=>a("h2",null," Init ",-1)),J={class:"pre2"},G=h(()=>a("h2",null," Usage ",-1)),P=h(()=>a("pre",null,`  compare 
  sortingOrderValue: this.sortingOrderValue,
  settingValue: this.settingValue.value,
  if (this.telemsg.sortingOrderValue > this.settingValue.value 
  && this.shouldExecute) 
        `,-1)),Q="TsWebsocket_telegram",X={__name:"TsWebsocket_telegram",props:{message:Object,pncounts:Object},setup(t){const s=t,e=i({monitoringCoin:"KRW-ETH",sortingOrder:"L52",settingValue:86,shouldExecute:!0,messageCounter:0,componentname:"TsWebsocket_telegram",status:"Rise Monitoring",asc_desc:"asc",coinea:130,eta:0,addRatio:.5,alarmSenddingEa:2}),n=new $(s,e);return n.run(),(c,u)=>(l(),g("body",z,[a("div",F,[a("div",K,[o(n).L52Changes>o(n).settingValue?(l(),M(U,{key:0,message:s.message,takenconinticker:c.KRW-c.BTC,dictionarys:o(n).telemsg,componentname:Q},null,8,["message","takenconinticker","dictionarys"])):W("",!0),a("h1",null,r(e.value.status),1),a("pre",H,r(o(n).telemsg),1),q,a("pre",J,r(e.value),1),G,P])])]))}},Y=p(X,[["__scopeId","data-v-3de57d32"]]),Z={class:"container body-full"},D=a("br",null,null,-1),ne={__name:"RealTimeChartView",setup(t){return(s,e)=>(l(),g("body",Z,[I(Y,{message:o(y)},null,8,["message"]),B(),D]))}};export{ne as default};
