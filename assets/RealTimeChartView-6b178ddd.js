import{W as D,r as M}from"./WebsocketConnector-bb6add7e.js";import{a as V,t as y}from"./telegramini-40e3a79c.js";import{r as o,_ as $,g as T,o as v,c as C,a as c,t as g,n as w,u as b,F,p as I,k as L,f as i,l as O,z as R,q as K,b as N,e as H,d as P}from"./index-85b8b1f1.js";const E="6"+y.t,z="1"+y.i,x=o(""),A=async s=>{try{const t=`
<span class="tg-spoiler">spoiler</span>
<b>Alarm</b> - <strong>Setting values enough</strong>
<i>Value changes </i> 
<tg-emoji emoji-id="5368324170671202286">👍</tg-emoji> 
<a href="https://d10000usd.github.io/TsWebsocket_main?message=%22KRW-BTC%22">Chart</a>
${JSON.stringify(s.text,null,2)}
`;if(t.length>1){const a=await V.post(`https://api.telegram.org/bot${E}/sendMessage`,{chat_id:z,text:t,parse_mode:"HTML"},{headers:{"Content-Type":"application/json"}});return!0}else return!1}catch(t){console.error("Error sending message:",t)}},f=async s=>{const a=await A({text:s});return x.value=a?"ok":"error",1};const q=s=>(I("data-v-2d0b4d56"),s=s(),L(),s),J=q(()=>c("br",null,null,-1)),U={__name:"TelegramMsg_BTC",props:["message","takenconinticker","dictionarys","componentname"],setup(s){const t=s,a=o(x);let d={assets:t.dictionarys,execution:t.componentname};return T(()=>{f(d)}),(u,l)=>(v(),C(F,null,[c("button",{class:w(["telebtn",{greenBtn:a.value==="ok",redBtn:a.value==="error"}]),onClick:l[0]||(l[0]=r=>b(f)(b(d)))}," tele :: "+g(a.value),3),J],64))}},G=$(U,[["__scopeId","data-v-2d0b4d56"]]),Q={class:"body-full"},X={class:"spacing mb-11"},Y={class:"c-custom-card"},Z=1,k="TsWebsocket_telegram",ee={__name:"TsWebsocket_telegram",props:{message:Object,pncounts:Object},setup(s){const a=o(Object.assign([],s.message)),d=o("DP52");o("desc");const u=new D(a.value,"InfoScreen_categories",d.value,"asc",130,0),l=o(0),r=o(146),m=o(0),B=o(0);T(()=>{l.value=p.value});const h=i(()=>{var e;return(e=u.sortedWsData.value["KRW-BTC"])==null?void 0:e.code}),p=i(()=>{var e,n;return(n=(e=u.sortedWsData.value["KRW-BTC"])==null?void 0:e.L52)==null?void 0:n.toFixed(2)}),W=i(()=>{var e,n;return(n=(e=u.sortedWsData.value["KRW-BTC"])==null?void 0:e.H52)==null?void 0:n.toFixed(2)}),S=i(()=>{var e,n;return(n=(e=u.sortedWsData.value["KRW-BTC"])==null?void 0:e.DP52)==null?void 0:n.toFixed(2)}),j=i(()=>{const e=p.value-l.value;return l.value=p.value,e}),_=O({coin:h,DP52Changes:S,cumulativeChange:j});return R(()=>{if(l.value>r.value){const e={assets:h._value,flagValue:r.value,flagcumulative:m.value,value:_,execution:k};B.value=e,setTimeout(async()=>{await f(e),m.value+=1,m.value>=2&&(r.value+=.5,console.log(`overflag ${r.value}`),m.value=0)},1e3)}}),(e,n)=>(v(),C("body",Q,[c("div",X,[c("div",Y,[_.L52Changes>r.value?(v(),K(G,{key:0,message:s.message,takenconinticker:Z,dictionarys:_,componentname:k},null,8,["message","dictionarys"])):N("",!0),c("pre",null,g(h.value),1),c("pre",null,"L52Changes(digit) "+g((p.value-100).toFixed(2)),1),c("pre",null,"H52Changes(digit) "+g(100+parseFloat(W.value)),1),c("pre",null,g(_),1)])])]))}},se={class:"container body-full"},te=c("br",null,null,-1),ce={__name:"RealTimeChartView",setup(s){return(t,a)=>(v(),C("body",se,[H(ee,{message:b(M)},null,8,["message"]),P(),te]))}};export{ce as default};
