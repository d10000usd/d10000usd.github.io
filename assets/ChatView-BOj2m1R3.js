import{h as fo,g as Z,r as ho,a as D,o as S,b as x,j as N,n as G,t as R,e as Y,w as cr,F as Q,d as J,f as nt,c as j,x as bt,l as Ge,v as O,K as po,z as wu,k as Ou,B as rt,A as me,T as go,U as dr,V as mo,y as bo,L as un,C as vo,P as tu,Q as xo,E as nn,R as rn}from"./vendor-CPGvGDBM.js";import{dm as yo,Y as Cu,a7 as ue,ao as W,az as fr,J as st,e9 as on,dL as yt,cs as _o,c as ne,ea as ko,eb as wo,g as Pt,ay as _t,aq as ie,ec as Co,aA as So,$ as Gt,ab as Oe,dk as hr,U as be,cm as Ut,cn as Ot,ae as pr,V as Nt,b as $,dK as Nu,d4 as Ao,bJ as kt,aL as Do,b1 as To,b3 as Eo,b4 as Mo,cq as Su,ed as gr,O as Ue,ee as sn,aJ as Tt,dl as se,aP as Et,ef as Fo,m as qu,eg as Io,h as wt,d6 as Po,eh as zo,aT as De,ei as Ro,b5 as Te,bE as Xt,aF as Au,ej as $o,bo as Du,a0 as re,cr as vt,ek as Lo,el as Bo,em as Oo,a1 as at,dO as ot,bH as No,aU as Ae,en as mr,dn as an,eo as qo,ep as Ho,eq as qt,er as br,E as Hu,cC as Vo,es as jo,be as he,bu as Wo,aE as ln,a$ as Zo,et as uu,eu as cn,ev as dn,e as Go,ew as Uo,ex as Xo,a2 as Ht,ey as Yo,ez as Qo,aG as xt,bL as fn,eA as Jo,o as Ko,l as ei,bR as ti,bS as ui,ai as ni,dz as Tu,bf as ri,bd as oi,aC as Eu,aV as ii,db as vr,cN as Vu,dd as si,eB as ai,cu as li,ct as ci,a3 as di,ax as fi,ak as hi,dZ as pi,d$ as gi,e1 as mi,d_ as bi,e7 as xr,e8 as Mu}from"./index-Q-2DXrkv.js";import{c as ye,a as vi,S as xi,E as yi}from"./index-CQVr_tJE.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=ye("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ye("CodeXmlIcon",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=ye("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ye("FileJsonIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=ye("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=ye("FileIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ye("FolderOpenIcon",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ye("PackageIcon",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=ye("TerminalIcon",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ye("WrenchIcon",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var hn="\0_ec_interaction_mutex";function E1(e,t,u){var n=ju(e);n[t]=u}function M1(e,t,u){var n=ju(e),r=n[t];r===u&&(n[t]=null)}function pn(e,t){return!!ju(e)[t]}function ju(e){return e[hn]||(e[hn]={})}yo({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Cu);var Ei=function(e){ue(t,e);function t(u){var n=e.call(this)||this;n._zr=u;var r=W(n._mousedownHandler,n),o=W(n._mousemoveHandler,n),i=W(n._mouseupHandler,n),s=W(n._mousewheelHandler,n),a=W(n._pinchHandler,n);return n.enable=function(l,c){this.disable(),this._opt=fr(st(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),l==null&&(l=!0),(l===!0||l==="move"||l==="pan")&&(u.on("mousedown",r),u.on("mousemove",o),u.on("mouseup",i)),(l===!0||l==="scale"||l==="zoom")&&(u.on("mousewheel",s),u.on("pinch",a))},n.disable=function(){u.off("mousedown",r),u.off("mousemove",o),u.off("mouseup",i),u.off("mousewheel",s),u.off("pinch",a)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(u){this.pointerChecker=u},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(u){if(!on(u)){for(var n=u.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var r=u.offsetX,o=u.offsetY;this.pointerChecker&&this.pointerChecker(u,r,o)&&(this._x=r,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(u){if(!(!this._dragging||!Lt("moveOnMouseMove",u,this._opt)||u.gestureEvent==="pinch"||pn(this._zr,"globalPan"))){var n=u.offsetX,r=u.offsetY,o=this._x,i=this._y,s=n-o,a=r-i;this._x=n,this._y=r,this._opt.preventDefaultMouseMove&&yt(u.event),yr(this,"pan","moveOnMouseMove",u,{dx:s,dy:a,oldX:o,oldY:i,newX:n,newY:r,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(u){on(u)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(u){var n=Lt("zoomOnMouseWheel",u,this._opt),r=Lt("moveOnMouseWheel",u,this._opt),o=u.wheelDelta,i=Math.abs(o),s=u.offsetX,a=u.offsetY;if(!(o===0||!n&&!r)){if(n){var l=i>3?1.4:i>1?1.2:1.1,c=o>0?l:1/l;ru(this,"zoom","zoomOnMouseWheel",u,{scale:c,originX:s,originY:a,isAvailableBehavior:null})}if(r){var d=Math.abs(o),f=(o>0?1:-1)*(d>3?.4:d>1?.15:.05);ru(this,"scrollMove","moveOnMouseWheel",u,{scrollDelta:f,originX:s,originY:a,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(u){if(!pn(this._zr,"globalPan")){var n=u.pinchScale>1?1.1:1/1.1;ru(this,"zoom",null,u,{scale:n,originX:u.pinchX,originY:u.pinchY,isAvailableBehavior:null})}},t}(_o);function ru(e,t,u,n,r){e.pointerChecker&&e.pointerChecker(n,r.originX,r.originY)&&(yt(n.event),yr(e,t,u,n,r))}function yr(e,t,u,n,r){r.isAvailableBehavior=W(Lt,null,u,n),e.trigger(t,r)}function Lt(e,t,u){var n=u[e];return!e||n&&(!ne(n)||t.event[n+"Key"])}function Yt(e,t,u,n,r,o){e=e||0;var i=u[1]-u[0];if(r!=null&&(r=Je(r,[0,i])),o!=null&&(o=Math.max(o,r??0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Je(s,[0,i]),r=o=Je(s,[r,o]),n=0}t[0]=Je(t[0],u),t[1]=Je(t[1],u);var a=ou(t,n);t[n]+=e;var l=r||0,c=u.slice();a.sign<0?c[0]+=l:c[1]-=l,t[n]=Je(t[n],c);var d;return d=ou(t,n),r!=null&&(d.sign!==a.sign||d.span<r)&&(t[1-n]=t[n]+a.sign*r),d=ou(t,n),o!=null&&d.span>o&&(t[1-n]=t[n]+d.sign*o),t}function ou(e,t){var u=e[t]-e[1-t];return{span:Math.abs(u),sign:u>0?-1:u<0?1:t?-1:1}}function Je(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}const Mi=fo("editor",{state:()=>({ws:null,connectionStatus:"disconnected",sessionId:null,fileSystem:{tree:null,rootPath:"",currentPath:"",currentNode:null,currentFile:{path:"",content:""}},searchQuery:"",expandedDirs:new Set,selectedFile:"",openTabs:[],isLoading:!1,sidebarCollapsed:!1,cursorInfo:null,showDiffViewer:!1,showCreateModal:!1,createModalType:"file",createParent:null,newItemName:"",showDeleteModal:!1,deleteTarget:null,rawEvents:[]}),getters:{WS_URL:()=>wo,API_BASE_URL:()=>ko,buttonClass:()=>"p-1.5 hover:bg-gray-700 rounded-md transition-colors text-gray-400 hover:text-white",pathSegments(e){const t=e.fileSystem.currentPath||"",u=e.fileSystem.rootPath||"";if(t===u||!t)return[];const n=t.replace(u,"").replace(/^\//,"");return n?n.split("/"):[]},filteredFiles(e){if(!e.searchQuery||!e.fileSystem.tree)return[];const t=[],u=e.searchQuery.toLowerCase(),n=r=>{r.name.toLowerCase().includes(u)&&t.push(r),r.children&&r.children.forEach(n)};return n(e.fileSystem.tree),t.slice(0,20)},fileCount(e){if(!e.fileSystem.tree)return 0;let t=0;const u=n=>{n.type==="file"&&t++,n.children&&n.children.forEach(u)};return u(e.fileSystem.tree),t},folderCount(e){if(!e.fileSystem.tree)return 0;let t=0;const u=n=>{n.type==="directory"&&t++,n.children&&n.children.forEach(u)};return u(e.fileSystem.tree),t-1},currentFileLanguage(e){if(!e.selectedFile)return"text";const t=(e.selectedFile.split(".").pop()||"").toLowerCase();return{js:"javascript",ts:"typescript",vue:"vue",html:"html",css:"css",scss:"scss",json:"json",md:"markdown",py:"python",java:"java"}[t]||"text"},currentTab(e){return e.openTabs.find(t=>t.path===e.selectedFile)},modifiedFilesCount(e){return e.openTabs.filter(t=>t.isModified).length},isCurrentFileModified(e){var t;return((t=e.openTabs.find(u=>u.path===e.selectedFile))==null?void 0:t.isModified)||!1}},actions:{connectWebSocket(){this.ws=new WebSocket(this.WS_URL),this.ws.onopen=()=>{this.connectionStatus="connected",console.log("WebSocket 연결됨")},this.ws.onclose=()=>{this.connectionStatus="disconnected",console.log("WebSocket 연결 끊어짐, 3초 후 재연결 시도"),setTimeout(()=>this.connectWebSocket(),3e3)},this.ws.onerror=()=>{this.connectionStatus="error",console.error("WebSocket 오류")},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleWebSocketMessage(t)}catch{console.warn("⚠️ Invalid WS data (JSON 파싱 실패):",e.data)}}},handleWebSocketMessage(e){this.rawEvents.push({id:Pt(),raw:e}),e.session_id&&(this.sessionId=e.session_id),e.type==="tool_result"&&this.handleToolResult(e)},sendMessage_mcp(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){console.warn("⚠️ WebSocket이 연결되어 있지 않습니다.");return}this.ws.send(JSON.stringify(e))},handleToolResult(e){var r,o,i,s,a,l;const t=(r=e.result)==null?void 0:r.tool,u=((a=(s=(i=(o=e.result)==null?void 0:o.result)==null?void 0:i.content)==null?void 0:s[0])==null?void 0:a.text)||((l=e.result)==null?void 0:l.result);if(!t||!u)return;const n={directory_tree:c=>{if(console.log("directory_tree 결과:",c),!!c)try{this.fileSystem.tree=c.tree||c,this.fileSystem.rootPath=c.path||"",this.fileSystem.currentNode=this.fileSystem.tree,this.fileSystem.currentPath=c.path||"",this.fileSystem.currentFile={path:"",content:""},this.expandedDirs.add(c.path||""),this.isLoading=!1}catch(d){console.warn("⚠️ 트리 파싱 실패:",d),this.isLoading=!1}},read_file:c=>{if(!c)return;this.fileSystem.currentFile={path:c.path||this.fileSystem.currentFile.path,content:c.content||"[파일 내용 없음]"};const d=this.openTabs.find(f=>f.path===c.path);d&&(d.content=c.content||"[파일 내용 없음]",d.originalContent=c.content||"[파일 내용 없음]",d.isLoading=!1,d.isModified=!1)},write_file:c=>{if(!(c!=null&&c.path))return;const d=this.openTabs.find(f=>f.path===c.path);d&&(d.originalContent=d.content,d.isModified=!1,console.log(`파일 저장 완료: ${c.path}`))},create_file:c=>{c!=null&&c.path&&(this.fileSystem.currentFile={path:c.path,content:c.content||""},this.mergeNode(c),console.log(`파일 생성 완료: ${c.path}`))},delete_file:c=>{c!=null&&c.path&&(this.removeNode(c.path),console.log(`파일 삭제 완료: ${c.path}`))},create_directory:c=>{c!=null&&c.path&&(this.mergeNode(c),console.log(`디렉토리 생성 완료: ${c.path}`))},rename:c=>{c.old_path&&this.removeNode(c.old_path),c.path&&this.mergeNode({...c,name:c.name||c.path.split("/").pop()}),c.old_path&&this.fileSystem.currentFile.path===c.old_path&&(this.fileSystem.currentFile.path=c.path||this.fileSystem.currentFile.path);const d=this.openTabs.find(f=>f.path===c.old_path);d&&(d.path=c.path||d.path,d.name=c.name||c.path.split("/").pop(),this.selectedFile===c.old_path&&(this.selectedFile=d.path)),console.log(`이름 변경 완료: ${c.old_path} → ${c.path}`)}};n[t]&&n[t](u)},mergeNode(e){if(!(e!=null&&e.path))return;e.name||(e.name=e.path.split("/").pop());const t=e.path.split("/").slice(0,-1).join("/"),u=this.findNode(this.fileSystem.tree,t);if(!u)return;u.children||(u.children=[]);const n=u.children.findIndex(r=>r.path===e.path);n!==-1?u.children[n]=e:u.children.push(e)},removeNode(e){if(!e)return;const t=e.split("/").slice(0,-1).join("/"),u=this.findNode(this.fileSystem.tree,t);u!=null&&u.children&&(u.children=u.children.filter(n=>n.path!==e))},findNode(e,t){return e?e.path===t?e:(e.children||[]).reduce((u,n)=>u||this.findNode(n,t),null):null},getFileName(e){return e.split("/").pop()||""},getFileExtension(e){const u=this.getFileName(e).split(".");return u.length>1?u.pop().toLowerCase():""},getFileIcon(e){const t=this.getFileExtension(e);return{js:Qe,ts:Qe,vue:Qe,html:Qe,css:Qe,json:nu,md:nu,txt:nu}[t]||Ci},getTabIcon(e){return e.type==="chart"?Qe:this.getFileIcon(e.name)},getFileIconColor(e){const t=this.getFileExtension(e);return{js:"text-yellow-400",ts:"text-blue-500",vue:"text-green-500",html:"text-red-400",css:"text-purple-400",json:"text-orange-400",md:"text-gray-400",txt:"text-gray-400"}[t]||"text-gray-400"},async callFileSystemTool(e,t={}){try{return await(await fetch(this.API_BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_calls:[{description:"Tool execution",server:"filesystem",tool:e,arguments:t}]})})).json()}catch(u){throw console.error(`MCP ${e} 호출 오류:`,u),u}},async loadFileSystemTree(e=this.fileSystem.rootPath){var t,u;this.isLoading=!0;try{const n=await this.callFileSystemTool("directory_tree",{path:e});if((u=(t=n.results)==null?void 0:t[0])!=null&&u.result){const r=n.results[0].result;console.log("MCP에서 받은 데이터:",r),r&&r.success&&(r.tree||r.path)?(this.fileSystem.tree=r.tree||r,this.fileSystem.rootPath=r.base_dir||r.path||"",this.fileSystem.currentNode=this.fileSystem.tree,this.fileSystem.currentPath=r.base_dir||r.path||"",this.fileSystem.currentFile={path:"",content:""},this.expandedDirs.add(this.fileSystem.rootPath),console.log("MCP 파일 트리 로딩 완료:",this.fileSystem.tree)):console.error("Invalid tree data structure:",r)}else console.error("Failed to load file tree:",n)}catch(n){console.error("Error loading file tree:",n)}finally{this.isLoading=!1}},async readFile(e){var t,u;if((e==null?void 0:e.type)==="file")try{const n=await this.callFileSystemTool("read_file",{path:e.path});if(console.log("MCP read_file 응답:",n),(u=(t=n.results)==null?void 0:t[0])!=null&&u.result){const r=n.results[0].result,o=this.openTabs.find(i=>i.path===e.path);o&&r.success&&r.content&&(o.content=r.content,o.originalContent=r.content,o.isLoading=!1,o.isModified=!1,console.log("파일 내용 로딩 완료:",e.name))}else console.error("MCP read_file 실패:",n)}catch(n){console.error("MCP read_file 오류:",n)}},async createFile(e,t=""){var u,n,r;try{const o=await this.callFileSystemTool("create_file",{path:e,content:t});(r=(n=(u=o.results)==null?void 0:u[0])==null?void 0:n.result)!=null&&r.success?console.log("파일 생성 완료:",e):console.error("MCP create_file 실패:",o)}catch(o){console.error("MCP 도구 오류:",o)}},async writeFile(e,t){var u,n,r;try{const o=await this.callFileSystemTool("write_file",{path:e,content:t,append:!1});(r=(n=(u=o.results)==null?void 0:u[0])==null?void 0:n.result)!=null&&r.success?console.log("파일 쓰기 완료:",e):console.error("MCP write_file 실패:",o)}catch(o){console.error("MCP 도구 오류:",o)}},async deleteFile(e){var t,u,n;try{const r=await this.callFileSystemTool("delete_file",{path:e});(n=(u=(t=r.results)==null?void 0:t[0])==null?void 0:u.result)!=null&&n.success?console.log("파일 삭제 완료:",e):console.error("MCP delete_file 실패:",r)}catch(r){console.error("MCP 도구 오류:",r)}},async createDirectory(e){var t,u,n;try{const r=await this.callFileSystemTool("create_directory",{path:e});(n=(u=(t=r.results)==null?void 0:t[0])==null?void 0:u.result)!=null&&n.success?console.log("디렉터리 생성 완료:",e):console.error("MCP create_directory 실패:",r)}catch(r){console.error("MCP 도구 오류:",r)}},async renameFileOrFolder(e,t){var u,n,r;try{const o=await this.callFileSystemTool("rename",{old_path:e,new_name:t});(r=(n=(u=o.results)==null?void 0:u[0])==null?void 0:n.result)!=null&&r.success?console.log("이름 변경 완료:",e,"=>",t):console.error("MCP rename 실패:",o)}catch(o){console.error("MCP 도구 오류:",o)}},toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed},toggleDirectory(e){console.log("디렉토리 토글 호출됨:",e),console.log("현재 확장된 디렉토리들:",Array.from(this.expandedDirs));const t=new Set(this.expandedDirs);t.has(e)?(console.log("디렉토리 닫기:",e),t.delete(e)):(console.log("디렉토리 열기:",e),t.add(e)),this.expandedDirs=t,console.log("변경 후 확장된 디렉토리들:",Array.from(this.expandedDirs))},refresh(){this.isLoading=!0,this.loadFileSystemTree(this.fileSystem.currentPath||this.fileSystem.rootPath)},goHome(){this.goParentDirectory()},goParentDirectory(){const{currentPath:e,rootPath:t}=this.fileSystem;if(!e||e===t)return;const u=e.split("/").slice(0,-1).join("/")||t,n=this.findNode(this.fileSystem.tree,u);n&&(this.fileSystem.currentNode=n,this.fileSystem.currentPath=u,this.fileSystem.currentFile.content="")},toggleDiffViewer(){this.showDiffViewer=!this.showDiffViewer},async selectFile(e){if(console.log("파일 선택됨:",e),e.type!=="file")return;let t=this.openTabs.find(u=>u.path===e.path);t||(t={path:e.path,name:this.getFileName(e.path),content:"// 파일 내용을 불러오는 중...",originalContent:"",isModified:!1,isLoading:!0,type:"file"},this.openTabs.push(t),console.log("MCP 서버로 파일 읽기 시도:",e.path),this.readFile(e)),this.selectedFile=e.path},selectTab(e){this.selectedFile=e},closeTab(e){const t=this.openTabs.findIndex(n=>n.path===e);if(t===-1)return;const u=this.openTabs[t];u.isModified&&!confirm(`${u.name} 파일이 수정되었습니다. 저장하지 않고 닫으시겠습니까?`)||(this.openTabs.splice(t,1),this.selectedFile===e&&(this.selectedFile=this.openTabs.length>0?this.openTabs[Math.max(0,t-1)].path:""))},closeAllTabs(){this.openTabs.some(e=>e.isModified)&&!confirm("수정된 파일이 있습니다. 모두 닫으시겠습니까?")||(this.openTabs=[],this.selectedFile="")},saveCurrentFile(){const e=this.currentTab;!e||!e.isModified||this.writeFile(e.path,e.content)},handleFileSave(e){const t=this.currentTab;t&&(t.content=e,this.writeFile(t.path,e))},handleFileChange(e){this.setCurrentTabContent(e)},handleCursorChange(e){this.cursorInfo=e},setCurrentTabContent(e){const t=this.openTabs.find(u=>u.path===this.selectedFile);t&&(t.content=e,t.isModified=e!==t.originalContent)},createNewFile(){const e=`새파일_${Pt()}.js`,u=`${this.fileSystem.currentPath||this.fileSystem.rootPath}/${e}`;this.createFile(u,`// 새 파일
`);const n={path:u,name:e,type:"file"};setTimeout(()=>{this.selectFile(n),this.refresh()},300)},createNewChart(){const e=`차트_${Pt()}`,t=`chart:${Pt()}`,u={path:t,name:e,type:"chart",content:null,originalContent:null,isModified:!1,isLoading:!1,chartConfig:{type:"candlestick",dataSource:"stocks"}};this.openTabs.push(u),this.selectedFile=t},handleCreateFile(e){this.createModalType="file",this.createParent=e,this.showCreateModal=!0},handleCreateFolder(e){this.createModalType="folder",this.createParent=e,this.showCreateModal=!0},async confirmCreate(){if(!this.newItemName.trim()||!this.createParent)return;const e=`${this.createParent.path}/${this.newItemName.trim()}`;try{this.createModalType==="file"?(this.createFile(e,""),setTimeout(()=>{this.selectFile({path:e,name:this.newItemName,type:"file"})},300)):this.createDirectory(e),setTimeout(()=>this.refresh(),500)}catch{alert("생성 실패")}this.cancelCreate()},cancelCreate(){this.showCreateModal=!1,this.createModalType="file",this.createParent=null,this.newItemName=""},handleDeleteItem(e){this.deleteTarget=e,this.showDeleteModal=!0},async confirmDelete(){if(this.deleteTarget){try{this.deleteFile(this.deleteTarget.path),this.openTabs.findIndex(t=>t.path===this.deleteTarget.path)>-1&&this.closeTab(this.deleteTarget.path),setTimeout(()=>this.refresh(),300)}catch{alert("삭제 실패")}this.cancelDelete()}},cancelDelete(){this.showDeleteModal=!1,this.deleteTarget=null},async handleRenameItem({item:e,newName:t}){if(!t||t===e.name)return;const u=e.path;try{if(this.renameFileOrFolder(u,t),e.type==="file"){const n=this.openTabs.find(r=>r.path===u);n&&(n.path=u.split("/").slice(0,-1).join("/")+"/"+t,n.name=t,this.selectedFile===u&&(this.selectedFile=n.path))}setTimeout(()=>this.refresh(),500)}catch{alert("이름 변경 실패")}},setSearchQuery(e){this.searchQuery=e},async loadInitialTree(){if(this.isLoading){console.log("이미 파일 트리를 로딩 중입니다.");return}console.log("사용자가 파일 탐색기 열기 버튼을 클릭했습니다."),await this.loadFileSystemTree()},initialize(){console.log("Editor Store 초기화 중... (WebSocket + Playwright MCP)"),this.connectWebSocket()},handleDiffOpenFile(e){this.selectFile({path:e.path,name:e.name,type:"file"})},async handleDiffSaveFile(e){try{const t=this.openTabs.find(u=>u.path===e.path);t&&(await this.writeFile(e.path,t.content),t.originalContent=t.content,t.isModified=!1,console.log("파일 저장 완료:",e.name))}catch(t){console.error("파일 저장 실패:",t)}},handleDiscardChanges(e){const t=this.openTabs.find(u=>u.path===e.path);t&&t.originalContent!==void 0&&(t.content=t.originalContent,t.isModified=!1,console.log("변경사항 되돌리기 완료:",e.name))},async handleSaveAllFiles(e){try{for(const t of e)await this.handleDiffSaveFile(t);console.log("모든 파일 저장 완료")}catch(t){console.error("전체 파일 저장 실패:",t)}},handleDiscardAllChanges(e){for(const t of e)this.handleDiscardChanges(t);console.log("모든 변경사항 되돌리기 완료")}}}),Fi={class:"shrink-0 border-b border-border/30 bg-gradient-to-r from-background/95 via-card/85 to-background/95 backdrop-blur-md"},Ii={class:"flex h-14 items-center justify-between px-3 sm:px-4"},Pi={class:"flex items-center gap-2"},zi={class:"flex items-center gap-1.5 text-xs text-muted-foreground"},Ri={class:"relative"},$i={class:"hidden sm:inline"},Li={class:"min-w-0 flex-1 px-2 sm:px-4"},Bi={class:"flex items-center gap-2"},Oi={class:"min-w-0 flex-1"},Ni={class:"truncate text-sm font-semibold text-foreground"},qi={class:"flex items-center gap-3 text-xs text-muted-foreground"},Hi={key:0,class:"flex items-center gap-2"},Vi={key:0,class:"flex items-center gap-1"},ji={key:1,class:"flex animate-pulse items-center gap-1 font-medium text-primary"},Wi={class:"flex shrink-0 items-center gap-1 sm:gap-2"},Zi=["disabled"],Gi={class:"hidden lg:inline"},Ui=["disabled"],Xi={class:"hidden lg:inline"},Yi={__name:"ChatHeader",props:{connected:Boolean,messageCount:Number,threadTitle:String,totalMcpCalls:Number,isAnalysisMode:Boolean,threads:Object},emits:["toggle-sidebar","start-new-thread","clear-thread","threads-loaded"],setup(e,{emit:t}){const u=e,n=t,r=Mi(),o=Z(!1),i=Z(!1),s=async()=>{var l;if(!(!u.threads||o.value)){o.value=!0;try{const d={tool_calls:[{server:"redisSystem",tool:"save_hash",description:"Redis 해시에 데이터를 저장하기",arguments:{items:u.threads,key:"chat_threads"}}]};console.log("Saving threads to Redis:",d);const f=await fetch(r.API_BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const h=await f.json();console.log("Threads saved successfully:",h),h.results&&((l=h.results[0])!=null&&l.success)&&console.log("✅ 스레드가 Redis에 저장되었습니다.")}catch(c){console.error("❌ Redis 저장 실패:",c)}finally{o.value=!1}}},a=async()=>{if(!i.value){i.value=!0;try{const c={tool_calls:[{server:"redisSystem",tool:"get_hash",description:"Redis에 저장된 특정 해시(key)의 데이터를 읽어오기",arguments:{key:"chat_threads",fields:""}}]},d=await fetch(r.API_BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const f=await d.json();if(console.log("Threads loaded from Redis:",f),f.results){const h=JSON.parse(f.results[0].result);h&&(n("threads-loaded",h),console.log("✅ 스레드가 Redis에서 불러와졌습니다."))}}catch(l){console.error("❌ Redis 로드 실패:",l)}finally{i.value=!1}}};return(l,c)=>{const d=ho("router-link");return S(),D("header",Fi,[x("div",Ii,[x("div",Pi,[x("div",zi,[x("div",Ri,[x("span",{class:G([e.connected?"bg-green-500 shadow-green-500/30":"bg-red-500 shadow-red-500/30","inline-block size-2 rounded-full shadow-lg"])},null,2),e.connected?(S(),D("span",{key:0,class:G([e.connected?"bg-green-400":"bg-red-400","absolute inset-0 size-2 animate-ping rounded-full"])},null,2)):N("",!0)]),x("span",$i,R(e.connected?"온라인":"오프라인"),1)]),x("button",{onClick:c[0]||(c[0]=f=>l.$emit("toggle-sidebar")),class:"group relative flex size-8 items-center justify-center rounded-xl border border-border/50 bg-card/80 backdrop-blur-sm transition-all duration-200 hover:scale-105 hover:border-primary/30 hover:bg-primary/10 hover:shadow-lg"},[...c[3]||(c[3]=[x("svg",{class:"size-4 text-foreground transition-colors group-hover:text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),x("button",{onClick:c[1]||(c[1]=f=>l.$emit("start-new-thread")),class:"group relative flex size-8 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-lg shadow-primary/25 transition-all duration-200 hover:scale-105 hover:shadow-xl hover:shadow-primary/30"},[...c[4]||(c[4]=[x("svg",{class:"size-4 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),x("div",Li,[x("div",Bi,[c[6]||(c[6]=x("div",{class:"flex size-7 shrink-0 items-center justify-center rounded-lg bg-gradient-to-br from-primary/20 to-accent/20 backdrop-blur-sm"},[x("span",{class:"text-sm"},"💬")],-1)),x("div",Oi,[x("h2",Ni,R(e.threadTitle||"새 스레드"),1),x("div",qi,[x("span",null,R(e.messageCount)+"개 메시지",1),e.totalMcpCalls>0||e.isAnalysisMode?(S(),D("div",Hi,[e.totalMcpCalls>0?(S(),D("span",Vi,[x("span",null,R(e.totalMcpCalls),1)])):N("",!0),e.isAnalysisMode?(S(),D("span",ji,[...c[5]||(c[5]=[x("span",{class:"hidden sm:inline"},"분석중",-1)])])):N("",!0)])):N("",!0)])])])]),x("div",Wi,[x("button",{onClick:c[2]||(c[2]=f=>l.$emit("clear-thread")),class:"group flex h-8 items-center gap-1 rounded-lg border border-destructive/30 bg-destructive/10 px-2 text-xs font-medium text-destructive transition-all duration-200 hover:scale-105 hover:bg-destructive/20"},[...c[7]||(c[7]=[x("span",{class:"text-xs"},"🗑",-1),x("span",{class:"hidden sm:inline"},"지우기",-1)])]),x("button",{onClick:a,disabled:i.value,class:"group flex h-8 items-center gap-1 rounded-lg border border-blue-500/30 bg-blue-500/10 px-2 text-xs font-medium text-blue-600 transition-all duration-200 hover:scale-105 hover:bg-blue-500/20 disabled:opacity-50 disabled:hover:scale-100"},[x("span",{class:G(["text-xs",{"animate-spin":i.value}])},"📂",2),x("span",Gi,R(i.value?"불러오는중":"불러오기"),1)],8,Zi),Y(d,{to:"/",class:"group flex h-8 items-center gap-1 rounded-lg border border-border/50 bg-card/80 px-2 text-xs font-medium text-muted-foreground backdrop-blur-sm transition-all duration-200 hover:scale-105 hover:bg-accent hover:text-foreground"},{default:cr(()=>[...c[8]||(c[8]=[x("span",{class:"text-xs"},"🔬",-1),x("span",{class:"hidden xl:inline"},"홈",-1)])]),_:1}),x("button",{onClick:s,disabled:o.value,class:"group flex h-8 items-center gap-1 rounded-lg border border-green-500/30 bg-green-500/10 px-2 text-xs font-medium text-green-600 transition-all duration-200 hover:scale-105 hover:bg-green-500/20 disabled:opacity-50 disabled:hover:scale-100"},[x("span",{class:G(["text-xs",{"animate-pulse":o.value}])},"💾",2),x("span",Xi,R(o.value?"저장중":"저장"),1)],8,Ui)])])])}}},Qi={class:"flex items-center justify-between border-b border-border/20 bg-gradient-to-r from-background/50 to-card/50 px-6 py-5 backdrop-blur-sm"},Ji={class:"flex-1 space-y-2 overflow-y-auto overscroll-contain p-4"},Ki=["onClick"],es={class:"mb-2 flex items-start gap-2"},ts={class:"min-w-0 flex-1"},us=["title"],ns={class:"flex items-center justify-between text-xs text-muted-foreground"},rs={class:"flex items-center gap-3"},os={class:"flex items-center gap-1"},is={key:0,class:"flex items-center gap-1 text-primary/70"},ss={class:"text-xs font-medium"},as={class:"shrink-0 border-t border-border/20 bg-gradient-to-r from-background/50 to-card/50 px-4 py-5 backdrop-blur-sm"},ls={class:"grid grid-cols-2 gap-2"},cs=["onClick"],ds={class:"font-semibold"},fs={__name:"ChatSidebar",props:{isOpen:Boolean,threads:Array,activeThreadId:String,prompts:Object,selectedPromptType:String},emits:["close","select-thread","select-prompt"],setup(e){const t=r=>{var o;return((o=r.messages)==null?void 0:o.length)||0},u=r=>{if(!r)return"";const o=new Date(r),s=new Date-o,a=Math.floor(s/6e4),l=Math.floor(s/36e5),c=Math.floor(s/864e5);return a<1?"방금":a<60?`${a}분 전`:l<24?`${l}시간 전`:c<7?`${c}일 전`:o.toLocaleDateString()},n=r=>{var o;return((o=r.messages)==null?void 0:o.some(i=>{var s,a;return((a=(s=i.metas)==null?void 0:s.mcpCalls)==null?void 0:a.length)>0}))||!1};return(r,o)=>(S(),D("aside",{class:G(["fixed left-0 top-0 z-50 h-full w-80 border-r border-border/30 bg-gradient-to-br from-card/95 via-background/85 to-card/90 shadow-2xl backdrop-blur-xl transition-all duration-300 ease-out sm:w-96",e.isOpen?"translate-x-0":"-translate-x-full"])},[x("div",Qi,[o[2]||(o[2]=x("div",{class:"flex items-center gap-3"},[x("div",{class:"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-primary/20 to-accent/20"},[x("span",{class:"text-lg"},"💬")]),x("h3",{class:"text-lg font-bold text-foreground"},"스레드")],-1)),x("button",{onClick:o[0]||(o[0]=i=>r.$emit("close")),class:"group flex size-8 items-center justify-center rounded-lg border border-border/30 bg-background/50 backdrop-blur-sm transition-all duration-200 hover:scale-105 hover:border-destructive/30 hover:bg-destructive/10"},[...o[1]||(o[1]=[x("svg",{class:"size-4 text-muted-foreground transition-colors group-hover:text-destructive",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),x("div",Ji,[(S(!0),D(Q,null,J(e.threads,i=>(S(),D("div",{key:i.id,onClick:s=>r.$emit("select-thread",i.id),class:G(["group cursor-pointer rounded-xl border border-transparent p-4 transition-all duration-200 hover:scale-[1.02]",e.activeThreadId===i.id?"border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-accent/10 shadow-lg shadow-primary/10":"bg-gradient-to-br from-background/60 to-card/80 backdrop-blur-sm hover:from-accent/20 hover:to-accent/10 hover:shadow-md"])},[x("div",es,[o[3]||(o[3]=x("div",{class:"mt-0.5 flex size-6 shrink-0 items-center justify-center rounded-md bg-gradient-to-br from-muted/80 to-muted/60"},[x("span",{class:"text-xs"},"📝")],-1)),x("div",ts,[x("div",{class:"truncate text-sm font-semibold text-foreground transition-colors group-hover:text-primary",title:i.title},R(i.title||"제목 없음"),9,us)])]),x("div",ns,[x("div",rs,[x("span",os,[o[4]||(o[4]=x("span",{class:"text-xs"},"💬",-1)),nt(" "+R(t(i)),1)]),n(i)?(S(),D("span",is,[...o[5]||(o[5]=[x("span",{class:"text-xs"},"🔧",-1),x("span",null,"MCP",-1)])])):N("",!0)]),x("span",ss,R(u(i.updatedAt)),1)])],10,Ki))),128))]),x("div",as,[o[6]||(o[6]=x("div",{class:"mb-4 flex items-center gap-2"},[x("div",{class:"flex size-6 items-center justify-center rounded-md bg-gradient-to-br from-accent/20 to-primary/20"},[x("span",{class:"text-xs"},"⚙️")]),x("h4",{class:"text-sm font-semibold text-foreground"},"분석 프로토콜")],-1)),x("div",ls,[(S(!0),D(Q,null,J(e.prompts,(i,s)=>(S(),D("div",{key:s,onClick:a=>r.$emit("select-prompt",s),class:G(["group cursor-pointer rounded-lg border p-3 text-center text-xs font-medium transition-all duration-200 hover:scale-105",e.selectedPromptType===s?"border-primary/40 bg-gradient-to-br from-primary to-primary/80 text-primary-foreground shadow-lg shadow-primary/25":"border-border/30 bg-gradient-to-br from-background/60 to-card/80 text-foreground backdrop-blur-sm hover:border-accent/40 hover:from-accent/20 hover:to-accent/10"])},[x("div",ds,R(i.name),1),x("div",{class:G(["mt-1 text-xs",e.selectedPromptType===s?"text-primary-foreground/80":"text-muted-foreground"])},R(i.category),3)],10,cs))),128))])])],2))}},gn={};function hs(e){let t=gn[e];if(t)return t;t=gn[e]=[];for(let u=0;u<128;u++){const n=String.fromCharCode(u);t.push(n)}for(let u=0;u<e.length;u++){const n=e.charCodeAt(u);t[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return t}function lt(e,t){typeof t!="string"&&(t=lt.defaultChars);const u=hs(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(n){let r="";for(let o=0,i=n.length;o<i;o+=3){const s=parseInt(n.slice(o+1,o+3),16);if(s<128){r+=u[s];continue}if((s&224)===192&&o+3<i){const a=parseInt(n.slice(o+4,o+6),16);if((a&192)===128){const l=s<<6&1984|a&63;l<128?r+="��":r+=String.fromCharCode(l),o+=3;continue}}if((s&240)===224&&o+6<i){const a=parseInt(n.slice(o+4,o+6),16),l=parseInt(n.slice(o+7,o+9),16);if((a&192)===128&&(l&192)===128){const c=s<<12&61440|a<<6&4032|l&63;c<2048||c>=55296&&c<=57343?r+="���":r+=String.fromCharCode(c),o+=6;continue}}if((s&248)===240&&o+9<i){const a=parseInt(n.slice(o+4,o+6),16),l=parseInt(n.slice(o+7,o+9),16),c=parseInt(n.slice(o+10,o+12),16);if((a&192)===128&&(l&192)===128&&(c&192)===128){let d=s<<18&1835008|a<<12&258048|l<<6&4032|c&63;d<65536||d>1114111?r+="����":(d-=65536,r+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),o+=9;continue}}r+="�"}return r})}lt.defaultChars=";/?:@&=+$,#";lt.componentChars="";const mn={};function ps(e){let t=mn[e];if(t)return t;t=mn[e]=[];for(let u=0;u<128;u++){const n=String.fromCharCode(u);/^[0-9a-z]$/i.test(n)?t.push(n):t.push("%"+("0"+u.toString(16).toUpperCase()).slice(-2))}for(let u=0;u<e.length;u++)t[e.charCodeAt(u)]=e[u];return t}function Mt(e,t,u){typeof t!="string"&&(u=t,t=Mt.defaultChars),typeof u>"u"&&(u=!0);const n=ps(t);let r="";for(let o=0,i=e.length;o<i;o++){const s=e.charCodeAt(o);if(u&&s===37&&o+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3))){r+=e.slice(o,o+3),o+=2;continue}if(s<128){r+=n[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&o+1<i){const a=e.charCodeAt(o+1);if(a>=56320&&a<=57343){r+=encodeURIComponent(e[o]+e[o+1]),o++;continue}}r+="%EF%BF%BD";continue}r+=encodeURIComponent(e[o])}return r}Mt.defaultChars=";/?:@&=+$,-_.!~*'()#";Mt.componentChars="-_.!~*'()";function Wu(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Vt(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const gs=/^([a-z0-9.+-]+:)/i,ms=/:[0-9]*$/,bs=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,vs=["<",">",'"',"`"," ","\r",`
`,"	"],xs=["{","}","|","\\","^","`"].concat(vs),ys=["'"].concat(xs),bn=["%","/","?",";","#"].concat(ys),vn=["/","?","#"],_s=255,xn=/^[+a-z0-9A-Z_-]{0,63}$/,ks=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yn={javascript:!0,"javascript:":!0},_n={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Zu(e,t){if(e&&e instanceof Vt)return e;const u=new Vt;return u.parse(e,t),u}Vt.prototype.parse=function(e,t){let u,n,r,o=e;if(o=o.trim(),!t&&e.split("#").length===1){const l=bs.exec(o);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}let i=gs.exec(o);if(i&&(i=i[0],u=i.toLowerCase(),this.protocol=i,o=o.substr(i.length)),(t||i||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(r=o.substr(0,2)==="//",r&&!(i&&yn[i])&&(o=o.substr(2),this.slashes=!0)),!yn[i]&&(r||i&&!_n[i])){let l=-1;for(let p=0;p<vn.length;p++)n=o.indexOf(vn[p]),n!==-1&&(l===-1||n<l)&&(l=n);let c,d;l===-1?d=o.lastIndexOf("@"):d=o.lastIndexOf("@",l),d!==-1&&(c=o.slice(0,d),o=o.slice(d+1),this.auth=c),l=-1;for(let p=0;p<bn.length;p++)n=o.indexOf(bn[p]),n!==-1&&(l===-1||n<l)&&(l=n);l===-1&&(l=o.length),o[l-1]===":"&&l--;const f=o.slice(0,l);o=o.slice(l),this.parseHost(f),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let b=0,v=p.length;b<v;b++){const g=p[b];if(g&&!g.match(xn)){let m="";for(let y=0,_=g.length;y<_;y++)g.charCodeAt(y)>127?m+="x":m+=g[y];if(!m.match(xn)){const y=p.slice(0,b),_=p.slice(b+1),k=g.match(ks);k&&(y.push(k[1]),_.unshift(k[2])),_.length&&(o=_.join(".")+o),this.hostname=y.join(".");break}}}}this.hostname.length>_s&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=o.indexOf("#");s!==-1&&(this.hash=o.substr(s),o=o.slice(0,s));const a=o.indexOf("?");return a!==-1&&(this.search=o.substr(a),o=o.slice(0,a)),o&&(this.pathname=o),_n[u]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Vt.prototype.parseHost=function(e){let t=ms.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const ws=Object.freeze(Object.defineProperty({__proto__:null,decode:lt,encode:Mt,format:Wu,parse:Zu},Symbol.toStringTag,{value:"Module"})),_r=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kr=/[\0-\x1F\x7F-\x9F]/,Cs=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Gu=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,wr=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Cr=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Ss=Object.freeze(Object.defineProperty({__proto__:null,Any:_r,Cc:kr,Cf:Cs,P:Gu,S:wr,Z:Cr},Symbol.toStringTag,{value:"Module"})),As=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),Ds=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var iu;const Ts=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Es=(iu=String.fromCodePoint)!==null&&iu!==void 0?iu:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Ms(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Ts.get(e))!==null&&t!==void 0?t:e}var te;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(te||(te={}));const Fs=32;var Le;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Le||(Le={}));function Fu(e){return e>=te.ZERO&&e<=te.NINE}function Is(e){return e>=te.UPPER_A&&e<=te.UPPER_F||e>=te.LOWER_A&&e<=te.LOWER_F}function Ps(e){return e>=te.UPPER_A&&e<=te.UPPER_Z||e>=te.LOWER_A&&e<=te.LOWER_Z||Fu(e)}function zs(e){return e===te.EQUALS||Ps(e)}var ee;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ee||(ee={}));var $e;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})($e||($e={}));class Rs{constructor(t,u,n){this.decodeTree=t,this.emitCodePoint=u,this.errors=n,this.state=ee.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=$e.Strict}startEntity(t){this.decodeMode=t,this.state=ee.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,u){switch(this.state){case ee.EntityStart:return t.charCodeAt(u)===te.NUM?(this.state=ee.NumericStart,this.consumed+=1,this.stateNumericStart(t,u+1)):(this.state=ee.NamedEntity,this.stateNamedEntity(t,u));case ee.NumericStart:return this.stateNumericStart(t,u);case ee.NumericDecimal:return this.stateNumericDecimal(t,u);case ee.NumericHex:return this.stateNumericHex(t,u);case ee.NamedEntity:return this.stateNamedEntity(t,u)}}stateNumericStart(t,u){return u>=t.length?-1:(t.charCodeAt(u)|Fs)===te.LOWER_X?(this.state=ee.NumericHex,this.consumed+=1,this.stateNumericHex(t,u+1)):(this.state=ee.NumericDecimal,this.stateNumericDecimal(t,u))}addToNumericResult(t,u,n,r){if(u!==n){const o=n-u;this.result=this.result*Math.pow(r,o)+parseInt(t.substr(u,o),r),this.consumed+=o}}stateNumericHex(t,u){const n=u;for(;u<t.length;){const r=t.charCodeAt(u);if(Fu(r)||Is(r))u+=1;else return this.addToNumericResult(t,n,u,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(t,n,u,16),-1}stateNumericDecimal(t,u){const n=u;for(;u<t.length;){const r=t.charCodeAt(u);if(Fu(r))u+=1;else return this.addToNumericResult(t,n,u,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(t,n,u,10),-1}emitNumericEntity(t,u){var n;if(this.consumed<=u)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===te.SEMI)this.consumed+=1;else if(this.decodeMode===$e.Strict)return 0;return this.emitCodePoint(Ms(this.result),this.consumed),this.errors&&(t!==te.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,u){const{decodeTree:n}=this;let r=n[this.treeIndex],o=(r&Le.VALUE_LENGTH)>>14;for(;u<t.length;u++,this.excess++){const i=t.charCodeAt(u);if(this.treeIndex=$s(n,r,this.treeIndex+Math.max(1,o),i),this.treeIndex<0)return this.result===0||this.decodeMode===$e.Attribute&&(o===0||zs(i))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],o=(r&Le.VALUE_LENGTH)>>14,o!==0){if(i===te.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==$e.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:u,decodeTree:n}=this,r=(n[u]&Le.VALUE_LENGTH)>>14;return this.emitNamedEntityData(u,r,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,u,n){const{decodeTree:r}=this;return this.emitCodePoint(u===1?r[t]&~Le.VALUE_LENGTH:r[t+1],n),u===3&&this.emitCodePoint(r[t+2],n),n}end(){var t;switch(this.state){case ee.NamedEntity:return this.result!==0&&(this.decodeMode!==$e.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ee.NumericDecimal:return this.emitNumericEntity(0,2);case ee.NumericHex:return this.emitNumericEntity(0,3);case ee.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ee.EntityStart:return 0}}}function Sr(e){let t="";const u=new Rs(e,n=>t+=Es(n));return function(r,o){let i=0,s=0;for(;(s=r.indexOf("&",s))>=0;){t+=r.slice(i,s),u.startEntity(o);const l=u.write(r,s+1);if(l<0){i=s+u.end();break}i=s+l,s=l===0?i+1:i}const a=t+r.slice(i);return t="",a}}function $s(e,t,u,n){const r=(t&Le.BRANCH_LENGTH)>>7,o=t&Le.JUMP_TABLE;if(r===0)return o!==0&&n===o?u:-1;if(o){const a=n-o;return a<0||a>=r?-1:e[u+a]-1}let i=u,s=i+r-1;for(;i<=s;){const a=i+s>>>1,l=e[a];if(l<n)i=a+1;else if(l>n)s=a-1;else return e[a+r]}return-1}const Ls=Sr(As);Sr(Ds);function Ar(e,t=$e.Legacy){return Ls(e,t)}function Bs(e){return Object.prototype.toString.call(e)}function Uu(e){return Bs(e)==="[object String]"}const Os=Object.prototype.hasOwnProperty;function Ns(e,t){return Os.call(e,t)}function Qt(e){return Array.prototype.slice.call(arguments,1).forEach(function(u){if(u){if(typeof u!="object")throw new TypeError(u+"must be object");Object.keys(u).forEach(function(n){e[n]=u[n]})}}),e}function Dr(e,t,u){return[].concat(e.slice(0,t),u,e.slice(t+1))}function Xu(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function jt(e){if(e>65535){e-=65536;const t=55296+(e>>10),u=56320+(e&1023);return String.fromCharCode(t,u)}return String.fromCharCode(e)}const Tr=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,qs=/&([a-z#][a-z0-9]{1,31});/gi,Hs=new RegExp(Tr.source+"|"+qs.source,"gi"),Vs=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function js(e,t){if(t.charCodeAt(0)===35&&Vs.test(t)){const n=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Xu(n)?jt(n):e}const u=Ar(e);return u!==e?u:e}function Ws(e){return e.indexOf("\\")<0?e:e.replace(Tr,"$1")}function ct(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Hs,function(t,u,n){return u||js(t,n)})}const Zs=/[&<>"]/,Gs=/[&<>"]/g,Us={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Xs(e){return Us[e]}function Ne(e){return Zs.test(e)?e.replace(Gs,Xs):e}const Ys=/[.?*+^$[\]\\(){}|-]/g;function Qs(e){return e.replace(Ys,"\\$&")}function U(e){switch(e){case 9:case 32:return!0}return!1}function Ct(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function St(e){return Gu.test(e)||wr.test(e)}function At(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Jt(e){return e=e.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}const Js={mdurl:ws,ucmicro:Ss},Ks=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Dr,assign:Qt,escapeHtml:Ne,escapeRE:Qs,fromCodePoint:jt,has:Ns,isMdAsciiPunct:At,isPunctChar:St,isSpace:U,isString:Uu,isValidEntityCode:Xu,isWhiteSpace:Ct,lib:Js,normalizeReference:Jt,unescapeAll:ct,unescapeMd:Ws},Symbol.toStringTag,{value:"Module"}));function ea(e,t,u){let n,r,o,i;const s=e.posMax,a=e.pos;for(e.pos=t+1,n=1;e.pos<s;){if(o=e.src.charCodeAt(e.pos),o===93&&(n--,n===0)){r=!0;break}if(i=e.pos,e.md.inline.skipToken(e),o===91){if(i===e.pos-1)n++;else if(u)return e.pos=a,-1}}let l=-1;return r&&(l=e.pos),e.pos=a,l}function ta(e,t,u){let n,r=t;const o={ok:!1,pos:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<u;){if(n=e.charCodeAt(r),n===10||n===60)return o;if(n===62)return o.pos=r+1,o.str=ct(e.slice(t+1,r)),o.ok=!0,o;if(n===92&&r+1<u){r+=2;continue}r++}return o}let i=0;for(;r<u&&(n=e.charCodeAt(r),!(n===32||n<32||n===127));){if(n===92&&r+1<u){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(n===40&&(i++,i>32))return o;if(n===41){if(i===0)break;i--}r++}return t===r||i!==0||(o.str=ct(e.slice(t,r)),o.pos=r,o.ok=!0),o}function ua(e,t,u,n){let r,o=t;const i={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)i.str=n.str,i.marker=n.marker;else{if(o>=u)return i;let s=e.charCodeAt(o);if(s!==34&&s!==39&&s!==40)return i;t++,o++,s===40&&(s=41),i.marker=s}for(;o<u;){if(r=e.charCodeAt(o),r===i.marker)return i.pos=o+1,i.str+=ct(e.slice(t,o)),i.ok=!0,i;if(r===40&&i.marker===41)return i;r===92&&o+1<u&&o++,o++}return i.can_continue=!0,i.str+=ct(e.slice(t,o)),i}const na=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:ta,parseLinkLabel:ea,parseLinkTitle:ua},Symbol.toStringTag,{value:"Module"})),_e={};_e.code_inline=function(e,t,u,n,r){const o=e[t];return"<code"+r.renderAttrs(o)+">"+Ne(o.content)+"</code>"};_e.code_block=function(e,t,u,n,r){const o=e[t];return"<pre"+r.renderAttrs(o)+"><code>"+Ne(e[t].content)+`</code></pre>
`};_e.fence=function(e,t,u,n,r){const o=e[t],i=o.info?ct(o.info).trim():"";let s="",a="";if(i){const c=i.split(/(\s+)/g);s=c[0],a=c.slice(2).join("")}let l;if(u.highlight?l=u.highlight(o.content,s,a)||Ne(o.content):l=Ne(o.content),l.indexOf("<pre")===0)return l+`
`;if(i){const c=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[];c<0?d.push(["class",u.langPrefix+s]):(d[c]=d[c].slice(),d[c][1]+=" "+u.langPrefix+s);const f={attrs:d};return`<pre><code${r.renderAttrs(f)}>${l}</code></pre>
`}return`<pre><code${r.renderAttrs(o)}>${l}</code></pre>
`};_e.image=function(e,t,u,n,r){const o=e[t];return o.attrs[o.attrIndex("alt")][1]=r.renderInlineAsText(o.children,u,n),r.renderToken(e,t,u)};_e.hardbreak=function(e,t,u){return u.xhtmlOut?`<br />
`:`<br>
`};_e.softbreak=function(e,t,u){return u.breaks?u.xhtmlOut?`<br />
`:`<br>
`:`
`};_e.text=function(e,t){return Ne(e[t].content)};_e.html_block=function(e,t){return e[t].content};_e.html_inline=function(e,t){return e[t].content};function ft(){this.rules=Qt({},_e)}ft.prototype.renderAttrs=function(t){let u,n,r;if(!t.attrs)return"";for(r="",u=0,n=t.attrs.length;u<n;u++)r+=" "+Ne(t.attrs[u][0])+'="'+Ne(t.attrs[u][1])+'"';return r};ft.prototype.renderToken=function(t,u,n){const r=t[u];let o="";if(r.hidden)return"";r.block&&r.nesting!==-1&&u&&t[u-1].hidden&&(o+=`
`),o+=(r.nesting===-1?"</":"<")+r.tag,o+=this.renderAttrs(r),r.nesting===0&&n.xhtmlOut&&(o+=" /");let i=!1;if(r.block&&(i=!0,r.nesting===1&&u+1<t.length)){const s=t[u+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===r.tag)&&(i=!1)}return o+=i?`>
`:">",o};ft.prototype.renderInline=function(e,t,u){let n="";const r=this.rules;for(let o=0,i=e.length;o<i;o++){const s=e[o].type;typeof r[s]<"u"?n+=r[s](e,o,t,u,this):n+=this.renderToken(e,o,t)}return n};ft.prototype.renderInlineAsText=function(e,t,u){let n="";for(let r=0,o=e.length;r<o;r++)switch(e[r].type){case"text":n+=e[r].content;break;case"image":n+=this.renderInlineAsText(e[r].children,t,u);break;case"html_inline":case"html_block":n+=e[r].content;break;case"softbreak":case"hardbreak":n+=`
`;break}return n};ft.prototype.render=function(e,t,u){let n="";const r=this.rules;for(let o=0,i=e.length;o<i;o++){const s=e[o].type;s==="inline"?n+=this.renderInline(e[o].children,t,u):typeof r[s]<"u"?n+=r[s](e,o,t,u,this):n+=this.renderToken(e,o,t,u)}return n};function oe(){this.__rules__=[],this.__cache__=null}oe.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};oe.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(u){u.enabled&&u.alt.forEach(function(n){t.indexOf(n)<0&&t.push(n)})}),e.__cache__={},t.forEach(function(u){e.__cache__[u]=[],e.__rules__.forEach(function(n){n.enabled&&(u&&n.alt.indexOf(u)<0||e.__cache__[u].push(n.fn))})})};oe.prototype.at=function(e,t,u){const n=this.__find__(e),r=u||{};if(n===-1)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=r.alt||[],this.__cache__=null};oe.prototype.before=function(e,t,u,n){const r=this.__find__(e),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(r,0,{name:t,enabled:!0,fn:u,alt:o.alt||[]}),this.__cache__=null};oe.prototype.after=function(e,t,u,n){const r=this.__find__(e),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(r+1,0,{name:t,enabled:!0,fn:u,alt:o.alt||[]}),this.__cache__=null};oe.prototype.push=function(e,t,u){const n=u||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null};oe.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const u=[];return e.forEach(function(n){const r=this.__find__(n);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[r].enabled=!0,u.push(n)},this),this.__cache__=null,u};oe.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(u){u.enabled=!1}),this.enable(e,t)};oe.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const u=[];return e.forEach(function(n){const r=this.__find__(n);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[r].enabled=!1,u.push(n)},this),this.__cache__=null,u};oe.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function pe(e,t,u){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=u,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}pe.prototype.attrIndex=function(t){if(!this.attrs)return-1;const u=this.attrs;for(let n=0,r=u.length;n<r;n++)if(u[n][0]===t)return n;return-1};pe.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};pe.prototype.attrSet=function(t,u){const n=this.attrIndex(t),r=[t,u];n<0?this.attrPush(r):this.attrs[n]=r};pe.prototype.attrGet=function(t){const u=this.attrIndex(t);let n=null;return u>=0&&(n=this.attrs[u][1]),n};pe.prototype.attrJoin=function(t,u){const n=this.attrIndex(t);n<0?this.attrPush([t,u]):this.attrs[n][1]=this.attrs[n][1]+" "+u};function Er(e,t,u){this.src=e,this.env=u,this.tokens=[],this.inlineMode=!1,this.md=t}Er.prototype.Token=pe;const ra=/\r\n?|\n/g,oa=/\0/g;function ia(e){let t;t=e.src.replace(ra,`
`),t=t.replace(oa,"�"),e.src=t}function sa(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function aa(e){const t=e.tokens;for(let u=0,n=t.length;u<n;u++){const r=t[u];r.type==="inline"&&e.md.inline.parse(r.content,e.md,e.env,r.children)}}function la(e){return/^<a[>\s]/i.test(e)}function ca(e){return/^<\/a\s*>/i.test(e)}function da(e){const t=e.tokens;if(e.md.options.linkify)for(let u=0,n=t.length;u<n;u++){if(t[u].type!=="inline"||!e.md.linkify.pretest(t[u].content))continue;let r=t[u].children,o=0;for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.type==="link_close"){for(i--;r[i].level!==s.level&&r[i].type!=="link_open";)i--;continue}if(s.type==="html_inline"&&(la(s.content)&&o>0&&o--,ca(s.content)&&o++),!(o>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const a=s.content;let l=e.md.linkify.match(a);const c=[];let d=s.level,f=0;l.length>0&&l[0].index===0&&i>0&&r[i-1].type==="text_special"&&(l=l.slice(1));for(let h=0;h<l.length;h++){const p=l[h].url,b=e.md.normalizeLink(p);if(!e.md.validateLink(b))continue;let v=l[h].text;l[h].schema?l[h].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const g=l[h].index;if(g>f){const k=new e.Token("text","",0);k.content=a.slice(f,g),k.level=d,c.push(k)}const m=new e.Token("link_open","a",1);m.attrs=[["href",b]],m.level=d++,m.markup="linkify",m.info="auto",c.push(m);const y=new e.Token("text","",0);y.content=v,y.level=d,c.push(y);const _=new e.Token("link_close","a",-1);_.level=--d,_.markup="linkify",_.info="auto",c.push(_),f=l[h].lastIndex}if(f<a.length){const h=new e.Token("text","",0);h.content=a.slice(f),h.level=d,c.push(h)}t[u].children=r=Dr(r,i,c)}}}}const Mr=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,fa=/\((c|tm|r)\)/i,ha=/\((c|tm|r)\)/ig,pa={c:"©",r:"®",tm:"™"};function ga(e,t){return pa[t.toLowerCase()]}function ma(e){let t=0;for(let u=e.length-1;u>=0;u--){const n=e[u];n.type==="text"&&!t&&(n.content=n.content.replace(ha,ga)),n.type==="link_open"&&n.info==="auto"&&t--,n.type==="link_close"&&n.info==="auto"&&t++}}function ba(e){let t=0;for(let u=e.length-1;u>=0;u--){const n=e[u];n.type==="text"&&!t&&Mr.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),n.type==="link_open"&&n.info==="auto"&&t--,n.type==="link_close"&&n.info==="auto"&&t++}}function va(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(fa.test(e.tokens[t].content)&&ma(e.tokens[t].children),Mr.test(e.tokens[t].content)&&ba(e.tokens[t].children))}const xa=/['"]/,kn=/['"]/g,wn="’";function zt(e,t,u){return e.slice(0,t)+u+e.slice(t+1)}function ya(e,t){let u;const n=[];for(let r=0;r<e.length;r++){const o=e[r],i=e[r].level;for(u=n.length-1;u>=0&&!(n[u].level<=i);u--);if(n.length=u+1,o.type!=="text")continue;let s=o.content,a=0,l=s.length;e:for(;a<l;){kn.lastIndex=a;const c=kn.exec(s);if(!c)break;let d=!0,f=!0;a=c.index+1;const h=c[0]==="'";let p=32;if(c.index-1>=0)p=s.charCodeAt(c.index-1);else for(u=r-1;u>=0&&!(e[u].type==="softbreak"||e[u].type==="hardbreak");u--)if(e[u].content){p=e[u].content.charCodeAt(e[u].content.length-1);break}let b=32;if(a<l)b=s.charCodeAt(a);else for(u=r+1;u<e.length&&!(e[u].type==="softbreak"||e[u].type==="hardbreak");u++)if(e[u].content){b=e[u].content.charCodeAt(0);break}const v=At(p)||St(String.fromCharCode(p)),g=At(b)||St(String.fromCharCode(b)),m=Ct(p),y=Ct(b);if(y?d=!1:g&&(m||v||(d=!1)),m?f=!1:v&&(y||g||(f=!1)),b===34&&c[0]==='"'&&p>=48&&p<=57&&(f=d=!1),d&&f&&(d=v,f=g),!d&&!f){h&&(o.content=zt(o.content,c.index,wn));continue}if(f)for(u=n.length-1;u>=0;u--){let _=n[u];if(n[u].level<i)break;if(_.single===h&&n[u].level===i){_=n[u];let k,w;h?(k=t.md.options.quotes[2],w=t.md.options.quotes[3]):(k=t.md.options.quotes[0],w=t.md.options.quotes[1]),o.content=zt(o.content,c.index,w),e[_.token].content=zt(e[_.token].content,_.pos,k),a+=w.length-1,_.token===r&&(a+=k.length-1),s=o.content,l=s.length,n.length=u;continue e}}d?n.push({token:r,pos:c.index,single:h,level:i}):f&&h&&(o.content=zt(o.content,c.index,wn))}}}function _a(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!xa.test(e.tokens[t].content)||ya(e.tokens[t].children,e)}function ka(e){let t,u;const n=e.tokens,r=n.length;for(let o=0;o<r;o++){if(n[o].type!=="inline")continue;const i=n[o].children,s=i.length;for(t=0;t<s;t++)i[t].type==="text_special"&&(i[t].type="text");for(t=u=0;t<s;t++)i[t].type==="text"&&t+1<s&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==u&&(i[u]=i[t]),u++);t!==u&&(i.length=u)}}const su=[["normalize",ia],["block",sa],["inline",aa],["linkify",da],["replacements",va],["smartquotes",_a],["text_join",ka]];function Yu(){this.ruler=new oe;for(let e=0;e<su.length;e++)this.ruler.push(su[e][0],su[e][1])}Yu.prototype.process=function(e){const t=this.ruler.getRules("");for(let u=0,n=t.length;u<n;u++)t[u](e)};Yu.prototype.State=Er;function ke(e,t,u,n){this.src=e,this.md=t,this.env=u,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const r=this.src;for(let o=0,i=0,s=0,a=0,l=r.length,c=!1;i<l;i++){const d=r.charCodeAt(i);if(!c)if(U(d)){s++,d===9?a+=4-a%4:a++;continue}else c=!0;(d===10||i===l-1)&&(d!==10&&i++,this.bMarks.push(o),this.eMarks.push(i),this.tShift.push(s),this.sCount.push(a),this.bsCount.push(0),c=!1,s=0,a=0,o=i+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}ke.prototype.push=function(e,t,u){const n=new pe(e,t,u);return n.block=!0,u<0&&this.level--,n.level=this.level,u>0&&this.level++,this.tokens.push(n),n};ke.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};ke.prototype.skipEmptyLines=function(t){for(let u=this.lineMax;t<u&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};ke.prototype.skipSpaces=function(t){for(let u=this.src.length;t<u;t++){const n=this.src.charCodeAt(t);if(!U(n))break}return t};ke.prototype.skipSpacesBack=function(t,u){if(t<=u)return t;for(;t>u;)if(!U(this.src.charCodeAt(--t)))return t+1;return t};ke.prototype.skipChars=function(t,u){for(let n=this.src.length;t<n&&this.src.charCodeAt(t)===u;t++);return t};ke.prototype.skipCharsBack=function(t,u,n){if(t<=n)return t;for(;t>n;)if(u!==this.src.charCodeAt(--t))return t+1;return t};ke.prototype.getLines=function(t,u,n,r){if(t>=u)return"";const o=new Array(u-t);for(let i=0,s=t;s<u;s++,i++){let a=0;const l=this.bMarks[s];let c=l,d;for(s+1<u||r?d=this.eMarks[s]+1:d=this.eMarks[s];c<d&&a<n;){const f=this.src.charCodeAt(c);if(U(f))f===9?a+=4-(a+this.bsCount[s])%4:a++;else if(c-l<this.tShift[s])a++;else break;c++}a>n?o[i]=new Array(a-n+1).join(" ")+this.src.slice(c,d):o[i]=this.src.slice(c,d)}return o.join("")};ke.prototype.Token=pe;const wa=65536;function au(e,t){const u=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];return e.src.slice(u,n)}function Cn(e){const t=[],u=e.length;let n=0,r=e.charCodeAt(n),o=!1,i=0,s="";for(;n<u;)r===124&&(o?(s+=e.substring(i,n-1),i=n):(t.push(s+e.substring(i,n)),s="",i=n+1)),o=r===92,n++,r=e.charCodeAt(n);return t.push(s+e.substring(i)),t}function Ca(e,t,u,n){if(t+2>u)return!1;let r=t+1;if(e.sCount[r]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)return!1;let o=e.bMarks[r]+e.tShift[r];if(o>=e.eMarks[r])return!1;const i=e.src.charCodeAt(o++);if(i!==124&&i!==45&&i!==58||o>=e.eMarks[r])return!1;const s=e.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58&&!U(s)||i===45&&U(s))return!1;for(;o<e.eMarks[r];){const _=e.src.charCodeAt(o);if(_!==124&&_!==45&&_!==58&&!U(_))return!1;o++}let a=au(e,t+1),l=a.split("|");const c=[];for(let _=0;_<l.length;_++){const k=l[_].trim();if(!k){if(_===0||_===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?c.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?c.push("left"):c.push("")}if(a=au(e,t).trim(),a.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;l=Cn(a),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop();const d=l.length;if(d===0||d!==c.length)return!1;if(n)return!0;const f=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),b=[t,0];p.map=b;const v=e.push("thead_open","thead",1);v.map=[t,t+1];const g=e.push("tr_open","tr",1);g.map=[t,t+1];for(let _=0;_<l.length;_++){const k=e.push("th_open","th",1);c[_]&&(k.attrs=[["style","text-align:"+c[_]]]);const w=e.push("inline","",0);w.content=l[_].trim(),w.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let m,y=0;for(r=t+2;r<u&&!(e.sCount[r]<e.blkIndent);r++){let _=!1;for(let w=0,C=h.length;w<C;w++)if(h[w](e,r,u,!0)){_=!0;break}if(_||(a=au(e,r).trim(),!a)||e.sCount[r]-e.blkIndent>=4||(l=Cn(a),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop(),y+=d-l.length,y>wa))break;if(r===t+2){const w=e.push("tbody_open","tbody",1);w.map=m=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[r,r+1];for(let w=0;w<d;w++){const C=e.push("td_open","td",1);c[w]&&(C.attrs=[["style","text-align:"+c[w]]]);const A=e.push("inline","",0);A.content=l[w]?l[w].trim():"",A.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return m&&(e.push("tbody_close","tbody",-1),m[1]=r),e.push("table_close","table",-1),b[1]=r,e.parentType=f,e.line=r,!0}function Sa(e,t,u){if(e.sCount[t]-e.blkIndent<4)return!1;let n=t+1,r=n;for(;n<u;){if(e.isEmpty(n)){n++;continue}if(e.sCount[n]-e.blkIndent>=4){n++,r=n;continue}break}e.line=r;const o=e.push("code_block","code",0);return o.content=e.getLines(t,r,4+e.blkIndent,!1)+`
`,o.map=[t,e.line],!0}function Aa(e,t,u,n){let r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||r+3>o)return!1;const i=e.src.charCodeAt(r);if(i!==126&&i!==96)return!1;let s=r;r=e.skipChars(r,i);let a=r-s;if(a<3)return!1;const l=e.src.slice(s,r),c=e.src.slice(r,o);if(i===96&&c.indexOf(String.fromCharCode(i))>=0)return!1;if(n)return!0;let d=t,f=!1;for(;d++,!(d>=u||(r=s=e.bMarks[d]+e.tShift[d],o=e.eMarks[d],r<o&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(r)===i&&!(e.sCount[d]-e.blkIndent>=4)&&(r=e.skipChars(r,i),!(r-s<a)&&(r=e.skipSpaces(r),!(r<o)))){f=!0;break}a=e.sCount[t],e.line=d+(f?1:0);const h=e.push("fence","code",0);return h.info=c,h.content=e.getLines(t+1,d,a,!0),h.markup=l,h.map=[t,e.line],!0}function Da(e,t,u,n){let r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];const i=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(r)!==62)return!1;if(n)return!0;const s=[],a=[],l=[],c=[],d=e.md.block.ruler.getRules("blockquote"),f=e.parentType;e.parentType="blockquote";let h=!1,p;for(p=t;p<u;p++){const y=e.sCount[p]<e.blkIndent;if(r=e.bMarks[p]+e.tShift[p],o=e.eMarks[p],r>=o)break;if(e.src.charCodeAt(r++)===62&&!y){let k=e.sCount[p]+1,w,C;e.src.charCodeAt(r)===32?(r++,k++,C=!1,w=!0):e.src.charCodeAt(r)===9?(w=!0,(e.bsCount[p]+k)%4===3?(r++,k++,C=!1):C=!0):w=!1;let A=k;for(s.push(e.bMarks[p]),e.bMarks[p]=r;r<o;){const T=e.src.charCodeAt(r);if(U(T))T===9?A+=4-(A+e.bsCount[p]+(C?1:0))%4:A++;else break;r++}h=r>=o,a.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(w?1:0),l.push(e.sCount[p]),e.sCount[p]=A-k,c.push(e.tShift[p]),e.tShift[p]=r-e.bMarks[p];continue}if(h)break;let _=!1;for(let k=0,w=d.length;k<w;k++)if(d[k](e,p,u,!0)){_=!0;break}if(_){e.lineMax=p,e.blkIndent!==0&&(s.push(e.bMarks[p]),a.push(e.bsCount[p]),c.push(e.tShift[p]),l.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}s.push(e.bMarks[p]),a.push(e.bsCount[p]),c.push(e.tShift[p]),l.push(e.sCount[p]),e.sCount[p]=-1}const b=e.blkIndent;e.blkIndent=0;const v=e.push("blockquote_open","blockquote",1);v.markup=">";const g=[t,0];v.map=g,e.md.block.tokenize(e,t,p);const m=e.push("blockquote_close","blockquote",-1);m.markup=">",e.lineMax=i,e.parentType=f,g[1]=e.line;for(let y=0;y<c.length;y++)e.bMarks[y+t]=s[y],e.tShift[y+t]=c[y],e.sCount[y+t]=l[y],e.bsCount[y+t]=a[y];return e.blkIndent=b,!0}function Ta(e,t,u,n){const r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(o++);if(i!==42&&i!==45&&i!==95)return!1;let s=1;for(;o<r;){const l=e.src.charCodeAt(o++);if(l!==i&&!U(l))return!1;l===i&&s++}if(s<3)return!1;if(n)return!0;e.line=t+1;const a=e.push("hr","hr",0);return a.map=[t,e.line],a.markup=Array(s+1).join(String.fromCharCode(i)),!0}function Sn(e,t){const u=e.eMarks[t];let n=e.bMarks[t]+e.tShift[t];const r=e.src.charCodeAt(n++);if(r!==42&&r!==45&&r!==43)return-1;if(n<u){const o=e.src.charCodeAt(n);if(!U(o))return-1}return n}function An(e,t){const u=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];let r=u;if(r+1>=n)return-1;let o=e.src.charCodeAt(r++);if(o<48||o>57)return-1;for(;;){if(r>=n)return-1;if(o=e.src.charCodeAt(r++),o>=48&&o<=57){if(r-u>=10)return-1;continue}if(o===41||o===46)break;return-1}return r<n&&(o=e.src.charCodeAt(r),!U(o))?-1:r}function Ea(e,t){const u=e.level+2;for(let n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===u&&e.tokens[n].type==="paragraph_open"&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}function Ma(e,t,u,n){let r,o,i,s,a=t,l=!0;if(e.sCount[a]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[a]-e.listIndent>=4&&e.sCount[a]<e.blkIndent)return!1;let c=!1;n&&e.parentType==="paragraph"&&e.sCount[a]>=e.blkIndent&&(c=!0);let d,f,h;if((h=An(e,a))>=0){if(d=!0,i=e.bMarks[a]+e.tShift[a],f=Number(e.src.slice(i,h-1)),c&&f!==1)return!1}else if((h=Sn(e,a))>=0)d=!1;else return!1;if(c&&e.skipSpaces(h)>=e.eMarks[a])return!1;if(n)return!0;const p=e.src.charCodeAt(h-1),b=e.tokens.length;d?(s=e.push("ordered_list_open","ol",1),f!==1&&(s.attrs=[["start",f]])):s=e.push("bullet_list_open","ul",1);const v=[a,0];s.map=v,s.markup=String.fromCharCode(p);let g=!1;const m=e.md.block.ruler.getRules("list"),y=e.parentType;for(e.parentType="list";a<u;){o=h,r=e.eMarks[a];const _=e.sCount[a]+h-(e.bMarks[a]+e.tShift[a]);let k=_;for(;o<r;){const E=e.src.charCodeAt(o);if(E===9)k+=4-(k+e.bsCount[a])%4;else if(E===32)k++;else break;o++}const w=o;let C;w>=r?C=1:C=k-_,C>4&&(C=1);const A=_+C;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(p);const T=[a,0];s.map=T,d&&(s.info=e.src.slice(i,h-1));const F=e.tight,I=e.tShift[a],H=e.sCount[a],P=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=A,e.tight=!0,e.tShift[a]=w-e.bMarks[a],e.sCount[a]=k,w>=r&&e.isEmpty(a+1)?e.line=Math.min(e.line+2,u):e.md.block.tokenize(e,a,u,!0),(!e.tight||g)&&(l=!1),g=e.line-a>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=P,e.tShift[a]=I,e.sCount[a]=H,e.tight=F,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(p),a=e.line,T[1]=a,a>=u||e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)break;let M=!1;for(let E=0,V=m.length;E<V;E++)if(m[E](e,a,u,!0)){M=!0;break}if(M)break;if(d){if(h=An(e,a),h<0)break;i=e.bMarks[a]+e.tShift[a]}else if(h=Sn(e,a),h<0)break;if(p!==e.src.charCodeAt(h-1))break}return d?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(p),v[1]=a,e.line=a,e.parentType=y,l&&Ea(e,b),!0}function Fa(e,t,u,n){let r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],i=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(r)!==91)return!1;function s(m){const y=e.lineMax;if(m>=y||e.isEmpty(m))return null;let _=!1;if(e.sCount[m]-e.blkIndent>3&&(_=!0),e.sCount[m]<0&&(_=!0),!_){const C=e.md.block.ruler.getRules("reference"),A=e.parentType;e.parentType="reference";let T=!1;for(let F=0,I=C.length;F<I;F++)if(C[F](e,m,y,!0)){T=!0;break}if(e.parentType=A,T)return null}const k=e.bMarks[m]+e.tShift[m],w=e.eMarks[m];return e.src.slice(k,w+1)}let a=e.src.slice(r,o+1);o=a.length;let l=-1;for(r=1;r<o;r++){const m=a.charCodeAt(r);if(m===91)return!1;if(m===93){l=r;break}else if(m===10){const y=s(i);y!==null&&(a+=y,o=a.length,i++)}else if(m===92&&(r++,r<o&&a.charCodeAt(r)===10)){const y=s(i);y!==null&&(a+=y,o=a.length,i++)}}if(l<0||a.charCodeAt(l+1)!==58)return!1;for(r=l+2;r<o;r++){const m=a.charCodeAt(r);if(m===10){const y=s(i);y!==null&&(a+=y,o=a.length,i++)}else if(!U(m))break}const c=e.md.helpers.parseLinkDestination(a,r,o);if(!c.ok)return!1;const d=e.md.normalizeLink(c.str);if(!e.md.validateLink(d))return!1;r=c.pos;const f=r,h=i,p=r;for(;r<o;r++){const m=a.charCodeAt(r);if(m===10){const y=s(i);y!==null&&(a+=y,o=a.length,i++)}else if(!U(m))break}let b=e.md.helpers.parseLinkTitle(a,r,o);for(;b.can_continue;){const m=s(i);if(m===null)break;a+=m,r=o,o=a.length,i++,b=e.md.helpers.parseLinkTitle(a,r,o,b)}let v;for(r<o&&p!==r&&b.ok?(v=b.str,r=b.pos):(v="",r=f,i=h);r<o;){const m=a.charCodeAt(r);if(!U(m))break;r++}if(r<o&&a.charCodeAt(r)!==10&&v)for(v="",r=f,i=h;r<o;){const m=a.charCodeAt(r);if(!U(m))break;r++}if(r<o&&a.charCodeAt(r)!==10)return!1;const g=Jt(a.slice(1,l));return g?(n||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[g]>"u"&&(e.env.references[g]={title:v,href:d}),e.line=i),!0):!1}const Ia=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Pa="[a-zA-Z_:][a-zA-Z0-9:._-]*",za="[^\"'=<>`\\x00-\\x20]+",Ra="'[^']*'",$a='"[^"]*"',La="(?:"+za+"|"+Ra+"|"+$a+")",Ba="(?:\\s+"+Pa+"(?:\\s*=\\s*"+La+")?)",Fr="<[A-Za-z][A-Za-z0-9\\-]*"+Ba+"*\\s*\\/?>",Ir="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Oa="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Na="<[?][\\s\\S]*?[?]>",qa="<![A-Za-z][^>]*>",Ha="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Va=new RegExp("^(?:"+Fr+"|"+Ir+"|"+Oa+"|"+Na+"|"+qa+"|"+Ha+")"),ja=new RegExp("^(?:"+Fr+"|"+Ir+")"),Ke=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Ia.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(ja.source+"\\s*$"),/^$/,!1]];function Wa(e,t,u,n){let r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(r)!==60)return!1;let i=e.src.slice(r,o),s=0;for(;s<Ke.length&&!Ke[s][0].test(i);s++);if(s===Ke.length)return!1;if(n)return Ke[s][2];let a=t+1;if(!Ke[s][1].test(i)){for(;a<u&&!(e.sCount[a]<e.blkIndent);a++)if(r=e.bMarks[a]+e.tShift[a],o=e.eMarks[a],i=e.src.slice(r,o),Ke[s][1].test(i)){i.length!==0&&a++;break}}e.line=a;const l=e.push("html_block","",0);return l.map=[t,a],l.content=e.getLines(t,a,e.blkIndent,!0),!0}function Za(e,t,u,n){let r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.src.charCodeAt(r);if(i!==35||r>=o)return!1;let s=1;for(i=e.src.charCodeAt(++r);i===35&&r<o&&s<=6;)s++,i=e.src.charCodeAt(++r);if(s>6||r<o&&!U(i))return!1;if(n)return!0;o=e.skipSpacesBack(o,r);const a=e.skipCharsBack(o,35,r);a>r&&U(e.src.charCodeAt(a-1))&&(o=a),e.line=t+1;const l=e.push("heading_open","h"+String(s),1);l.markup="########".slice(0,s),l.map=[t,e.line];const c=e.push("inline","",0);c.content=e.src.slice(r,o).trim(),c.map=[t,e.line],c.children=[];const d=e.push("heading_close","h"+String(s),-1);return d.markup="########".slice(0,s),!0}function Ga(e,t,u){const n=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const r=e.parentType;e.parentType="paragraph";let o=0,i,s=t+1;for(;s<u&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let h=e.bMarks[s]+e.tShift[s];const p=e.eMarks[s];if(h<p&&(i=e.src.charCodeAt(h),(i===45||i===61)&&(h=e.skipChars(h,i),h=e.skipSpaces(h),h>=p))){o=i===61?1:2;break}}if(e.sCount[s]<0)continue;let f=!1;for(let h=0,p=n.length;h<p;h++)if(n[h](e,s,u,!0)){f=!0;break}if(f)break}if(!o)return!1;const a=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const l=e.push("heading_open","h"+String(o),1);l.markup=String.fromCharCode(i),l.map=[t,e.line];const c=e.push("inline","",0);c.content=a,c.map=[t,e.line-1],c.children=[];const d=e.push("heading_close","h"+String(o),-1);return d.markup=String.fromCharCode(i),e.parentType=r,!0}function Ua(e,t,u){const n=e.md.block.ruler.getRules("paragraph"),r=e.parentType;let o=t+1;for(e.parentType="paragraph";o<u&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3||e.sCount[o]<0)continue;let l=!1;for(let c=0,d=n.length;c<d;c++)if(n[c](e,o,u,!0)){l=!0;break}if(l)break}const i=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const a=e.push("inline","",0);return a.content=i,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=r,!0}const Rt=[["table",Ca,["paragraph","reference"]],["code",Sa],["fence",Aa,["paragraph","reference","blockquote","list"]],["blockquote",Da,["paragraph","reference","blockquote","list"]],["hr",Ta,["paragraph","reference","blockquote","list"]],["list",Ma,["paragraph","reference","blockquote"]],["reference",Fa],["html_block",Wa,["paragraph","reference","blockquote"]],["heading",Za,["paragraph","reference","blockquote"]],["lheading",Ga],["paragraph",Ua]];function Kt(){this.ruler=new oe;for(let e=0;e<Rt.length;e++)this.ruler.push(Rt[e][0],Rt[e][1],{alt:(Rt[e][2]||[]).slice()})}Kt.prototype.tokenize=function(e,t,u){const n=this.ruler.getRules(""),r=n.length,o=e.md.options.maxNesting;let i=t,s=!1;for(;i<u&&(e.line=i=e.skipEmptyLines(i),!(i>=u||e.sCount[i]<e.blkIndent));){if(e.level>=o){e.line=u;break}const a=e.line;let l=!1;for(let c=0;c<r;c++)if(l=n[c](e,i,u,!1),l){if(a>=e.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),i=e.line,i<u&&e.isEmpty(i)&&(s=!0,i++,e.line=i)}};Kt.prototype.parse=function(e,t,u,n){if(!e)return;const r=new this.State(e,t,u,n);this.tokenize(r,r.line,r.lineMax)};Kt.prototype.State=ke;function Ft(e,t,u,n){this.src=e,this.env=u,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Ft.prototype.pushPending=function(){const e=new pe("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Ft.prototype.push=function(e,t,u){this.pending&&this.pushPending();const n=new pe(e,t,u);let r=null;return u<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,u>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(r),n};Ft.prototype.scanDelims=function(e,t){const u=this.posMax,n=this.src.charCodeAt(e),r=e>0?this.src.charCodeAt(e-1):32;let o=e;for(;o<u&&this.src.charCodeAt(o)===n;)o++;const i=o-e,s=o<u?this.src.charCodeAt(o):32,a=At(r)||St(String.fromCharCode(r)),l=At(s)||St(String.fromCharCode(s)),c=Ct(r),d=Ct(s),f=!d&&(!l||c||a),h=!c&&(!a||d||l);return{can_open:f&&(t||!h||a),can_close:h&&(t||!f||l),length:i}};Ft.prototype.Token=pe;function Xa(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Ya(e,t){let u=e.pos;for(;u<e.posMax&&!Xa(e.src.charCodeAt(u));)u++;return u===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,u)),e.pos=u,!0)}const Qa=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Ja(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const u=e.pos,n=e.posMax;if(u+3>n||e.src.charCodeAt(u)!==58||e.src.charCodeAt(u+1)!==47||e.src.charCodeAt(u+2)!==47)return!1;const r=e.pending.match(Qa);if(!r)return!1;const o=r[1],i=e.md.linkify.matchAtStart(e.src.slice(u-o.length));if(!i)return!1;let s=i.url;if(s.length<=o.length)return!1;s=s.replace(/\*+$/,"");const a=e.md.normalizeLink(s);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-o.length);const l=e.push("link_open","a",1);l.attrs=[["href",a]],l.markup="linkify",l.info="auto";const c=e.push("text","",0);c.content=e.md.normalizeLinkText(s);const d=e.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return e.pos+=s.length-o.length,!0}function Ka(e,t){let u=e.pos;if(e.src.charCodeAt(u)!==10)return!1;const n=e.pending.length-1,r=e.posMax;if(!t)if(n>=0&&e.pending.charCodeAt(n)===32)if(n>=1&&e.pending.charCodeAt(n-1)===32){let o=n-1;for(;o>=1&&e.pending.charCodeAt(o-1)===32;)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(u++;u<r&&U(e.src.charCodeAt(u));)u++;return e.pos=u,!0}const Qu=[];for(let e=0;e<256;e++)Qu.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Qu[e.charCodeAt(0)]=1});function el(e,t){let u=e.pos;const n=e.posMax;if(e.src.charCodeAt(u)!==92||(u++,u>=n))return!1;let r=e.src.charCodeAt(u);if(r===10){for(t||e.push("hardbreak","br",0),u++;u<n&&(r=e.src.charCodeAt(u),!!U(r));)u++;return e.pos=u,!0}let o=e.src[u];if(r>=55296&&r<=56319&&u+1<n){const s=e.src.charCodeAt(u+1);s>=56320&&s<=57343&&(o+=e.src[u+1],u++)}const i="\\"+o;if(!t){const s=e.push("text_special","",0);r<256&&Qu[r]!==0?s.content=o:s.content=i,s.markup=i,s.info="escape"}return e.pos=u+1,!0}function tl(e,t){let u=e.pos;if(e.src.charCodeAt(u)!==96)return!1;const r=u;u++;const o=e.posMax;for(;u<o&&e.src.charCodeAt(u)===96;)u++;const i=e.src.slice(r,u),s=i.length;if(e.backticksScanned&&(e.backticks[s]||0)<=r)return t||(e.pending+=i),e.pos+=s,!0;let a=u,l;for(;(l=e.src.indexOf("`",a))!==-1;){for(a=l+1;a<o&&e.src.charCodeAt(a)===96;)a++;const c=a-l;if(c===s){if(!t){const d=e.push("code_inline","code",0);d.markup=i,d.content=e.src.slice(u,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=a,!0}e.backticks[c]=l}return e.backticksScanned=!0,t||(e.pending+=i),e.pos+=s,!0}function ul(e,t){const u=e.pos,n=e.src.charCodeAt(u);if(t||n!==126)return!1;const r=e.scanDelims(e.pos,!0);let o=r.length;const i=String.fromCharCode(n);if(o<2)return!1;let s;o%2&&(s=e.push("text","",0),s.content=i,o--);for(let a=0;a<o;a+=2)s=e.push("text","",0),s.content=i+i,e.delimiters.push({marker:n,length:0,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0}function Dn(e,t){let u;const n=[],r=t.length;for(let o=0;o<r;o++){const i=t[o];if(i.marker!==126||i.end===-1)continue;const s=t[i.end];u=e.tokens[i.token],u.type="s_open",u.tag="s",u.nesting=1,u.markup="~~",u.content="",u=e.tokens[s.token],u.type="s_close",u.tag="s",u.nesting=-1,u.markup="~~",u.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&n.push(s.token-1)}for(;n.length;){const o=n.pop();let i=o+1;for(;i<e.tokens.length&&e.tokens[i].type==="s_close";)i++;i--,o!==i&&(u=e.tokens[i],e.tokens[i]=e.tokens[o],e.tokens[o]=u)}}function nl(e){const t=e.tokens_meta,u=e.tokens_meta.length;Dn(e,e.delimiters);for(let n=0;n<u;n++)t[n]&&t[n].delimiters&&Dn(e,t[n].delimiters)}const Pr={tokenize:ul,postProcess:nl};function rl(e,t){const u=e.pos,n=e.src.charCodeAt(u);if(t||n!==95&&n!==42)return!1;const r=e.scanDelims(e.pos,n===42);for(let o=0;o<r.length;o++){const i=e.push("text","",0);i.content=String.fromCharCode(n),e.delimiters.push({marker:n,length:r.length,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close})}return e.pos+=r.length,!0}function Tn(e,t){const u=t.length;for(let n=u-1;n>=0;n--){const r=t[n];if(r.marker!==95&&r.marker!==42||r.end===-1)continue;const o=t[r.end],i=n>0&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===o.token+1,s=String.fromCharCode(r.marker),a=e.tokens[r.token];a.type=i?"strong_open":"em_open",a.tag=i?"strong":"em",a.nesting=1,a.markup=i?s+s:s,a.content="";const l=e.tokens[o.token];l.type=i?"strong_close":"em_close",l.tag=i?"strong":"em",l.nesting=-1,l.markup=i?s+s:s,l.content="",i&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--)}}function ol(e){const t=e.tokens_meta,u=e.tokens_meta.length;Tn(e,e.delimiters);for(let n=0;n<u;n++)t[n]&&t[n].delimiters&&Tn(e,t[n].delimiters)}const zr={tokenize:rl,postProcess:ol};function il(e,t){let u,n,r,o,i="",s="",a=e.pos,l=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const c=e.pos,d=e.posMax,f=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let p=h+1;if(p<d&&e.src.charCodeAt(p)===40){for(l=!1,p++;p<d&&(u=e.src.charCodeAt(p),!(!U(u)&&u!==10));p++);if(p>=d)return!1;if(a=p,r=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),r.ok){for(i=e.md.normalizeLink(r.str),e.md.validateLink(i)?p=r.pos:i="",a=p;p<d&&(u=e.src.charCodeAt(p),!(!U(u)&&u!==10));p++);if(r=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<d&&a!==p&&r.ok)for(s=r.str,p=r.pos;p<d&&(u=e.src.charCodeAt(p),!(!U(u)&&u!==10));p++);}(p>=d||e.src.charCodeAt(p)!==41)&&(l=!0),p++}if(l){if(typeof e.env.references>"u")return!1;if(p<d&&e.src.charCodeAt(p)===91?(a=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?n=e.src.slice(a,p++):p=h+1):p=h+1,n||(n=e.src.slice(f,h)),o=e.env.references[Jt(n)],!o)return e.pos=c,!1;i=o.href,s=o.title}if(!t){e.pos=f,e.posMax=h;const b=e.push("link_open","a",1),v=[["href",i]];b.attrs=v,s&&v.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=d,!0}function sl(e,t){let u,n,r,o,i,s,a,l,c="";const d=e.pos,f=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(o=p+1,o<f&&e.src.charCodeAt(o)===40){for(o++;o<f&&(u=e.src.charCodeAt(o),!(!U(u)&&u!==10));o++);if(o>=f)return!1;for(l=o,s=e.md.helpers.parseLinkDestination(e.src,o,e.posMax),s.ok&&(c=e.md.normalizeLink(s.str),e.md.validateLink(c)?o=s.pos:c=""),l=o;o<f&&(u=e.src.charCodeAt(o),!(!U(u)&&u!==10));o++);if(s=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<f&&l!==o&&s.ok)for(a=s.str,o=s.pos;o<f&&(u=e.src.charCodeAt(o),!(!U(u)&&u!==10));o++);else a="";if(o>=f||e.src.charCodeAt(o)!==41)return e.pos=d,!1;o++}else{if(typeof e.env.references>"u")return!1;if(o<f&&e.src.charCodeAt(o)===91?(l=o+1,o=e.md.helpers.parseLinkLabel(e,o),o>=0?r=e.src.slice(l,o++):o=p+1):o=p+1,r||(r=e.src.slice(h,p)),i=e.env.references[Jt(r)],!i)return e.pos=d,!1;c=i.href,a=i.title}if(!t){n=e.src.slice(h,p);const b=[];e.md.inline.parse(n,e.md,e.env,b);const v=e.push("image","img",0),g=[["src",c],["alt",""]];v.attrs=g,v.children=b,v.content=n,a&&g.push(["title",a])}return e.pos=o,e.posMax=f,!0}const al=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,ll=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function cl(e,t){let u=e.pos;if(e.src.charCodeAt(u)!==60)return!1;const n=e.pos,r=e.posMax;for(;;){if(++u>=r)return!1;const i=e.src.charCodeAt(u);if(i===60)return!1;if(i===62)break}const o=e.src.slice(n+1,u);if(ll.test(o)){const i=e.md.normalizeLink(o);if(!e.md.validateLink(i))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",i]],s.markup="autolink",s.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(o);const l=e.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return e.pos+=o.length+2,!0}if(al.test(o)){const i=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(i))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",i]],s.markup="autolink",s.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(o);const l=e.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return e.pos+=o.length+2,!0}return!1}function dl(e){return/^<a[>\s]/i.test(e)}function fl(e){return/^<\/a\s*>/i.test(e)}function hl(e){const t=e|32;return t>=97&&t<=122}function pl(e,t){if(!e.md.options.html)return!1;const u=e.posMax,n=e.pos;if(e.src.charCodeAt(n)!==60||n+2>=u)return!1;const r=e.src.charCodeAt(n+1);if(r!==33&&r!==63&&r!==47&&!hl(r))return!1;const o=e.src.slice(n).match(Va);if(!o)return!1;if(!t){const i=e.push("html_inline","",0);i.content=o[0],dl(i.content)&&e.linkLevel++,fl(i.content)&&e.linkLevel--}return e.pos+=o[0].length,!0}const gl=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,ml=/^&([a-z][a-z0-9]{1,31});/i;function bl(e,t){const u=e.pos,n=e.posMax;if(e.src.charCodeAt(u)!==38||u+1>=n)return!1;if(e.src.charCodeAt(u+1)===35){const o=e.src.slice(u).match(gl);if(o){if(!t){const i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),s=e.push("text_special","",0);s.content=Xu(i)?jt(i):jt(65533),s.markup=o[0],s.info="entity"}return e.pos+=o[0].length,!0}}else{const o=e.src.slice(u).match(ml);if(o){const i=Ar(o[0]);if(i!==o[0]){if(!t){const s=e.push("text_special","",0);s.content=i,s.markup=o[0],s.info="entity"}return e.pos+=o[0].length,!0}}}return!1}function En(e){const t={},u=e.length;if(!u)return;let n=0,r=-2;const o=[];for(let i=0;i<u;i++){const s=e[i];if(o.push(0),(e[n].marker!==s.marker||r!==s.token-1)&&(n=i),r=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const a=t[s.marker][(s.open?3:0)+s.length%3];let l=n-o[n]-1,c=l;for(;l>a;l-=o[l]+1){const d=e[l];if(d.marker===s.marker&&d.open&&d.end<0){let f=!1;if((d.close||s.open)&&(d.length+s.length)%3===0&&(d.length%3!==0||s.length%3!==0)&&(f=!0),!f){const h=l>0&&!e[l-1].open?o[l-1]+1:0;o[i]=i-l+h,o[l]=h,s.open=!1,d.end=i,d.close=!1,c=-1,r=-2;break}}}c!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=c)}}function vl(e){const t=e.tokens_meta,u=e.tokens_meta.length;En(e.delimiters);for(let n=0;n<u;n++)t[n]&&t[n].delimiters&&En(t[n].delimiters)}function xl(e){let t,u,n=0;const r=e.tokens,o=e.tokens.length;for(t=u=0;t<o;t++)r[t].nesting<0&&n--,r[t].level=n,r[t].nesting>0&&n++,r[t].type==="text"&&t+1<o&&r[t+1].type==="text"?r[t+1].content=r[t].content+r[t+1].content:(t!==u&&(r[u]=r[t]),u++);t!==u&&(r.length=u)}const lu=[["text",Ya],["linkify",Ja],["newline",Ka],["escape",el],["backticks",tl],["strikethrough",Pr.tokenize],["emphasis",zr.tokenize],["link",il],["image",sl],["autolink",cl],["html_inline",pl],["entity",bl]],cu=[["balance_pairs",vl],["strikethrough",Pr.postProcess],["emphasis",zr.postProcess],["fragments_join",xl]];function It(){this.ruler=new oe;for(let e=0;e<lu.length;e++)this.ruler.push(lu[e][0],lu[e][1]);this.ruler2=new oe;for(let e=0;e<cu.length;e++)this.ruler2.push(cu[e][0],cu[e][1])}It.prototype.skipToken=function(e){const t=e.pos,u=this.ruler.getRules(""),n=u.length,r=e.md.options.maxNesting,o=e.cache;if(typeof o[t]<"u"){e.pos=o[t];return}let i=!1;if(e.level<r){for(let s=0;s<n;s++)if(e.level++,i=u[s](e,!0),e.level--,i){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;i||e.pos++,o[t]=e.pos};It.prototype.tokenize=function(e){const t=this.ruler.getRules(""),u=t.length,n=e.posMax,r=e.md.options.maxNesting;for(;e.pos<n;){const o=e.pos;let i=!1;if(e.level<r){for(let s=0;s<u;s++)if(i=t[s](e,!1),i){if(o>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(i){if(e.pos>=n)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};It.prototype.parse=function(e,t,u,n){const r=new this.State(e,t,u,n);this.tokenize(r);const o=this.ruler2.getRules(""),i=o.length;for(let s=0;s<i;s++)o[s](r)};It.prototype.State=Ft;function yl(e){const t={};e=e||{},t.src_Any=_r.source,t.src_Cc=kr.source,t.src_Z=Cr.source,t.src_P=Gu.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const u="[><｜]";return t.src_pseudo_letter="(?:(?!"+u+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+u+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+u+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+u+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Iu(e){return Array.prototype.slice.call(arguments,1).forEach(function(u){u&&Object.keys(u).forEach(function(n){e[n]=u[n]})}),e}function eu(e){return Object.prototype.toString.call(e)}function _l(e){return eu(e)==="[object String]"}function kl(e){return eu(e)==="[object Object]"}function wl(e){return eu(e)==="[object RegExp]"}function Mn(e){return eu(e)==="[object Function]"}function Cl(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Rr={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Sl(e){return Object.keys(e||{}).reduce(function(t,u){return t||Rr.hasOwnProperty(u)},!1)}const Al={"http:":{validate:function(e,t,u){const n=e.slice(t);return u.re.http||(u.re.http=new RegExp("^\\/\\/"+u.re.src_auth+u.re.src_host_port_strict+u.re.src_path,"i")),u.re.http.test(n)?n.match(u.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,u){const n=e.slice(t);return u.re.no_http||(u.re.no_http=new RegExp("^"+u.re.src_auth+"(?:localhost|(?:(?:"+u.re.src_domain+")\\.)+"+u.re.src_domain_root+")"+u.re.src_port+u.re.src_host_terminator+u.re.src_path,"i")),u.re.no_http.test(n)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:n.match(u.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,u){const n=e.slice(t);return u.re.mailto||(u.re.mailto=new RegExp("^"+u.re.src_email_name+"@"+u.re.src_host_strict,"i")),u.re.mailto.test(n)?n.match(u.re.mailto)[0].length:0}}},Dl="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Tl="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function El(e){e.__index__=-1,e.__text_cache__=""}function Ml(e){return function(t,u){const n=t.slice(u);return e.test(n)?n.match(e)[0].length:0}}function Fn(){return function(e,t){t.normalize(e)}}function Wt(e){const t=e.re=yl(e.__opts__),u=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||u.push(Dl),u.push(t.src_xn),t.src_tlds=u.join("|");function n(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");const r=[];e.__compiled__={};function o(s,a){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+a)}Object.keys(e.__schemas__).forEach(function(s){const a=e.__schemas__[s];if(a===null)return;const l={validate:null,link:null};if(e.__compiled__[s]=l,kl(a)){wl(a.validate)?l.validate=Ml(a.validate):Mn(a.validate)?l.validate=a.validate:o(s,a),Mn(a.normalize)?l.normalize=a.normalize:a.normalize?o(s,a):l.normalize=Fn();return}if(_l(a)){r.push(s);return}o(s,a)}),r.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:Fn()};const i=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(Cl).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+i+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+i+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),El(e)}function Fl(e,t){const u=e.__index__,n=e.__last_index__,r=e.__text_cache__.slice(u,n);this.schema=e.__schema__.toLowerCase(),this.index=u+t,this.lastIndex=n+t,this.raw=r,this.text=r,this.url=r}function Pu(e,t){const u=new Fl(e,t);return e.__compiled__[u.schema].normalize(u,e),u}function ae(e,t){if(!(this instanceof ae))return new ae(e,t);t||Sl(e)&&(t=e,e={}),this.__opts__=Iu({},Rr,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Iu({},Al,e),this.__compiled__={},this.__tlds__=Tl,this.__tlds_replaced__=!1,this.re={},Wt(this)}ae.prototype.add=function(t,u){return this.__schemas__[t]=u,Wt(this),this};ae.prototype.set=function(t){return this.__opts__=Iu(this.__opts__,t),this};ae.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let u,n,r,o,i,s,a,l,c;if(this.re.schema_test.test(t)){for(a=this.re.schema_search,a.lastIndex=0;(u=a.exec(t))!==null;)if(o=this.testSchemaAt(t,u[2],a.lastIndex),o){this.__schema__=u[2],this.__index__=u.index+u[1].length,this.__last_index__=u.index+u[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=t.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=t.indexOf("@"),c>=0&&(r=t.match(this.re.email_fuzzy))!==null&&(i=r.index+r[1].length,s=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=s))),this.__index__>=0};ae.prototype.pretest=function(t){return this.re.pretest.test(t)};ae.prototype.testSchemaAt=function(t,u,n){return this.__compiled__[u.toLowerCase()]?this.__compiled__[u.toLowerCase()].validate(t,n,this):0};ae.prototype.match=function(t){const u=[];let n=0;this.__index__>=0&&this.__text_cache__===t&&(u.push(Pu(this,n)),n=this.__last_index__);let r=n?t.slice(n):t;for(;this.test(r);)u.push(Pu(this,n)),r=r.slice(this.__last_index__),n+=this.__last_index__;return u.length?u:null};ae.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const u=this.re.schema_at_start.exec(t);if(!u)return null;const n=this.testSchemaAt(t,u[2],u[0].length);return n?(this.__schema__=u[2],this.__index__=u.index+u[1].length,this.__last_index__=u.index+u[0].length+n,Pu(this,0)):null};ae.prototype.tlds=function(t,u){return t=Array.isArray(t)?t:[t],u?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(n,r,o){return n!==o[r-1]}).reverse(),Wt(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Wt(this),this)};ae.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};ae.prototype.onCompile=function(){};const it=2147483647,ve=36,Ju=1,Dt=26,Il=38,Pl=700,$r=72,Lr=128,Br="-",zl=/^xn--/,Rl=/[^\0-\x7F]/,$l=/[\x2E\u3002\uFF0E\uFF61]/g,Ll={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},du=ve-Ju,xe=Math.floor,fu=String.fromCharCode;function Re(e){throw new RangeError(Ll[e])}function Bl(e,t){const u=[];let n=e.length;for(;n--;)u[n]=t(e[n]);return u}function Or(e,t){const u=e.split("@");let n="";u.length>1&&(n=u[0]+"@",e=u[1]),e=e.replace($l,".");const r=e.split("."),o=Bl(r,t).join(".");return n+o}function Nr(e){const t=[];let u=0;const n=e.length;for(;u<n;){const r=e.charCodeAt(u++);if(r>=55296&&r<=56319&&u<n){const o=e.charCodeAt(u++);(o&64512)==56320?t.push(((r&1023)<<10)+(o&1023)+65536):(t.push(r),u--)}else t.push(r)}return t}const Ol=e=>String.fromCodePoint(...e),Nl=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ve},In=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},qr=function(e,t,u){let n=0;for(e=u?xe(e/Pl):e>>1,e+=xe(e/t);e>du*Dt>>1;n+=ve)e=xe(e/du);return xe(n+(du+1)*e/(e+Il))},Hr=function(e){const t=[],u=e.length;let n=0,r=Lr,o=$r,i=e.lastIndexOf(Br);i<0&&(i=0);for(let s=0;s<i;++s)e.charCodeAt(s)>=128&&Re("not-basic"),t.push(e.charCodeAt(s));for(let s=i>0?i+1:0;s<u;){const a=n;for(let c=1,d=ve;;d+=ve){s>=u&&Re("invalid-input");const f=Nl(e.charCodeAt(s++));f>=ve&&Re("invalid-input"),f>xe((it-n)/c)&&Re("overflow"),n+=f*c;const h=d<=o?Ju:d>=o+Dt?Dt:d-o;if(f<h)break;const p=ve-h;c>xe(it/p)&&Re("overflow"),c*=p}const l=t.length+1;o=qr(n-a,l,a==0),xe(n/l)>it-r&&Re("overflow"),r+=xe(n/l),n%=l,t.splice(n++,0,r)}return String.fromCodePoint(...t)},Vr=function(e){const t=[];e=Nr(e);const u=e.length;let n=Lr,r=0,o=$r;for(const a of e)a<128&&t.push(fu(a));const i=t.length;let s=i;for(i&&t.push(Br);s<u;){let a=it;for(const c of e)c>=n&&c<a&&(a=c);const l=s+1;a-n>xe((it-r)/l)&&Re("overflow"),r+=(a-n)*l,n=a;for(const c of e)if(c<n&&++r>it&&Re("overflow"),c===n){let d=r;for(let f=ve;;f+=ve){const h=f<=o?Ju:f>=o+Dt?Dt:f-o;if(d<h)break;const p=d-h,b=ve-h;t.push(fu(In(h+p%b,0))),d=xe(p/b)}t.push(fu(In(d,0))),o=qr(r,l,s===i),r=0,++s}++r,++n}return t.join("")},ql=function(e){return Or(e,function(t){return zl.test(t)?Hr(t.slice(4).toLowerCase()):t})},Hl=function(e){return Or(e,function(t){return Rl.test(t)?"xn--"+Vr(t):t})},jr={version:"2.3.1",ucs2:{decode:Nr,encode:Ol},decode:Hr,encode:Vr,toASCII:Hl,toUnicode:ql},Vl={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},jl={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Wl={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Zl={default:Vl,zero:jl,commonmark:Wl},Gl=/^(vbscript|javascript|file|data):/,Ul=/^data:image\/(gif|png|jpeg|webp);/;function Xl(e){const t=e.trim().toLowerCase();return Gl.test(t)?Ul.test(t):!0}const Wr=["http:","https:","mailto:"];function Yl(e){const t=Zu(e,!0);if(t.hostname&&(!t.protocol||Wr.indexOf(t.protocol)>=0))try{t.hostname=jr.toASCII(t.hostname)}catch{}return Mt(Wu(t))}function Ql(e){const t=Zu(e,!0);if(t.hostname&&(!t.protocol||Wr.indexOf(t.protocol)>=0))try{t.hostname=jr.toUnicode(t.hostname)}catch{}return lt(Wu(t),lt.defaultChars+"%")}function le(e,t){if(!(this instanceof le))return new le(e,t);t||Uu(e)||(t=e||{},e="default"),this.inline=new It,this.block=new Kt,this.core=new Yu,this.renderer=new ft,this.linkify=new ae,this.validateLink=Xl,this.normalizeLink=Yl,this.normalizeLinkText=Ql,this.utils=Ks,this.helpers=Qt({},na),this.options={},this.configure(e),t&&this.set(t)}le.prototype.set=function(e){return Qt(this.options,e),this};le.prototype.configure=function(e){const t=this;if(Uu(e)){const u=e;if(e=Zl[u],!e)throw new Error('Wrong `markdown-it` preset "'+u+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(u){e.components[u].rules&&t[u].ruler.enableOnly(e.components[u].rules),e.components[u].rules2&&t[u].ruler2.enableOnly(e.components[u].rules2)}),this};le.prototype.enable=function(e,t){let u=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(r){u=u.concat(this[r].ruler.enable(e,!0))},this),u=u.concat(this.inline.ruler2.enable(e,!0));const n=e.filter(function(r){return u.indexOf(r)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};le.prototype.disable=function(e,t){let u=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(r){u=u.concat(this[r].ruler.disable(e,!0))},this),u=u.concat(this.inline.ruler2.disable(e,!0));const n=e.filter(function(r){return u.indexOf(r)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};le.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};le.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const u=new this.core.State(e,this,t);return this.core.process(u),u.tokens};le.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};le.prototype.parseInline=function(e,t){const u=new this.core.State(e,this,t);return u.inlineMode=!0,this.core.process(u),u.tokens};le.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const Jl={class:"unified-tool-card my-3 overflow-hidden rounded-xl border border-border/30 bg-gradient-to-br from-card/80 via-background/60 to-card/40 shadow-lg backdrop-blur-xl"},Kl={class:"relative z-10 flex items-center gap-3"},e0={key:0,class:"relative flex items-center justify-center"},t0={class:"text-base font-semibold text-foreground"},u0={class:"flex items-center gap-2"},n0={class:"rounded-full bg-primary/20 px-3 py-1 text-sm font-bold leading-none text-primary"},r0={key:0,class:"rounded-full bg-gradient-to-r from-purple-200/80 to-blue-200/80 px-3 py-1 text-sm font-bold leading-none text-purple-700"},o0={key:1,class:"rounded-full bg-gradient-to-r from-green-200/80 to-blue-200/80 px-3 py-1 text-sm font-bold leading-none text-green-700"},i0={class:"relative z-10 flex items-center gap-3"},s0={key:0,class:"flex items-center gap-1"},a0={class:"border-t border-border/20"},l0={key:0,class:"border-b border-border/10 bg-muted/20 px-4 py-3"},c0={class:"mb-2 flex items-center gap-2"},d0={class:"min-w-0 flex-1"},f0={class:"truncate text-sm font-semibold text-foreground"},h0={class:"truncate text-xs text-muted-foreground"},p0={key:0,class:"text-xs font-bold text-green-600"},g0={key:1,class:"text-xs font-medium text-blue-600"},m0={class:"p-4"},b0={key:0,class:"space-y-4"},v0={class:"rounded-lg bg-muted/30 p-3"},x0={class:"mb-2 flex items-center justify-between"},y0={class:"flex items-center gap-2"},_0={class:"rounded bg-primary/20 px-2 py-1 text-xs font-medium text-primary"},k0={class:"rounded bg-accent/20 px-2 py-1 text-xs font-medium text-accent-foreground"},w0={key:0,class:"space-y-2"},C0={class:"mb-1 flex items-center gap-2 text-xs font-semibold text-muted-foreground"},S0={class:"text-xs font-bold text-primary"},A0={key:0,class:"absolute inset-0 animate-pulse rounded-lg bg-gradient-to-r from-green-400/10 via-emerald-400/5 to-green-400/10"},D0={class:"relative z-10 flex items-center gap-3"},T0={class:"relative flex items-center justify-center"},E0={key:0,class:"absolute size-4 animate-ping rounded-full bg-green-500/30"},M0={class:"flex items-center gap-2"},F0={class:"text-sm font-semibold text-foreground"},I0={class:"text-xs font-medium text-muted-foreground"},P0={class:"relative z-10"},z0={key:0,class:"inline-flex items-center gap-1.5 text-xs font-bold text-green-700 dark:text-green-400"},R0={key:1,class:"inline-flex items-center gap-1 text-xs font-medium text-blue-700 dark:text-blue-400"},$0={key:2,class:"text-xs text-muted-foreground"},L0={class:"group"},B0={class:"flex cursor-pointer select-none items-center justify-between rounded-lg bg-card/40 p-3 text-sm font-medium text-foreground transition-colors hover:bg-card/60"},O0={class:"text-xs text-muted-foreground"},N0={class:"relative mt-2 rounded-lg border border-border/30 bg-gradient-to-br from-amber-50/90 via-orange-50/80 to-yellow-50/90 shadow-sm dark:from-amber-950/30 dark:via-orange-950/20 dark:to-yellow-950/30"},q0={class:"max-h-64 overflow-x-auto whitespace-pre-wrap p-4 pr-8 font-mono text-xs text-amber-900 dark:text-amber-100"},H0={key:1,class:"space-y-3"},V0={class:"rounded-lg bg-muted/30 p-3"},j0={class:"flex items-center justify-between"},W0={class:"text-xs text-muted-foreground"},Z0={class:"group"},G0={class:"cursor-pointer select-none bg-card/40 p-3 transition-colors hover:bg-card/60"},U0={class:"flex items-center justify-between"},X0={class:"flex items-center gap-2"},Y0={class:"text-sm font-semibold text-primary"},Q0={class:"text-sm font-bold text-foreground"},J0={key:0,class:"ml-2 inline-flex items-center gap-1"},K0={class:"max-w-32 truncate font-mono text-xs text-orange-600"},ec={key:1,class:"ml-2 inline-flex items-center gap-1"},tc={class:"max-w-32 truncate text-xs text-green-600"},uc={class:"flex items-center gap-2"},nc=["onClick"],rc={class:"border-t border-border/20 bg-card/20 p-4"},oc={key:0,class:"mb-3"},ic={class:"grid gap-2"},sc={class:"min-w-20 shrink-0 text-xs font-semibold text-primary"},ac={class:"break-all font-mono text-xs text-foreground"},lc={class:"rounded-lg border border-border/30 bg-gradient-to-br from-slate-50/90 via-gray-50/80 to-zinc-50/90 shadow-sm dark:from-slate-950/30 dark:via-gray-950/20 dark:to-zinc-950/30"},cc={class:"flex items-center justify-between border-b border-border/20 bg-muted/20 px-3 py-2"},dc={class:"flex items-center gap-2"},fc={class:"p-4"},hc={class:"max-h-64 overflow-x-auto whitespace-pre-wrap font-mono text-xs text-slate-900 dark:text-slate-100"},pc={__name:"UnifiedToolCard",props:{partialContent:{type:String,default:""},toolCalls:{type:Array,default:()=>[]},isStreaming:{type:Boolean,default:!1}},setup(e){const t=e,u=Z(!1),n=j(()=>t.isStreaming||t.partialContent&&!t.toolCalls.length),r=j(()=>t.partialContent||""),o=j(()=>{if(n.value){const m=r.value.match(/"tool"\s*:\s*"[^"]+"/g)||[];return Math.max(m.length,1)}return t.toolCalls.length}),i=j(()=>{var A,T;if(!n.value)return[];const m=[],y=r.value,_=/"tool"\s*:\s*"([^"]+)"/g,k=/"server"\s*:\s*"([^"]+)"/g,w=[...y.matchAll(_)],C=[...y.matchAll(k)];for(let F=0;F<Math.max(w.length,C.length);F++)m.push({tool:((A=w[F])==null?void 0:A[1])||"unknown",server:((T=C[F])==null?void 0:T[1])||"unknown",isActive:F===Math.max(w.length,C.length)-1,isCompleted:!1});return m}),s=j(()=>n.value?[]:t.toolCalls.map(m=>({...m,path:d(m),query:f(m),isCompleted:!0}))),a=j(()=>{if(!n.value)return"";const m=r.value;if(!m)return"";if(m.trim().startsWith("{"))try{const y=JSON.parse(m);return JSON.stringify(y,null,2)}catch{let _=m.replace(/,/g,`,
  `).replace(/:/g,": ").replace(/\{/g,`{
  `).replace(/\[/g,`[
    `);return _.length>800&&(_=_.substring(0,800)+`
  ...`),_}return m}),l=()=>{const m=r.value;return m?m.includes('"server"')&&m.includes('"tool"')?"MCP 도구 호출":m.trim().startsWith("{")?"JSON 데이터":"텍스트 데이터":"대기중"},c=m=>m<1e3?`${m}B`:m<1e6?`${Math.round(m/100)/10}KB`:`${Math.round(m/1e5)/10}MB`,d=m=>{if(!m.arguments)return null;const y=["path","file_path","filepath","dir","directory"];for(const _ of y)if(m.arguments[_])return m.arguments[_];return null},f=m=>m.arguments&&m.arguments.query||null,h=async m=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(m);else{const y=document.createElement("textarea");y.value=m,y.style.position="fixed",y.style.left="-999999px",document.body.appendChild(y),y.focus(),y.select(),document.execCommand("copy"),y.remove()}}catch(y){console.error("복사 실패:",y)}},p=m=>{if(!m||typeof m!="object")return{};const y=["query","path","file_path","url","command","stocks","message","content"],_={};for(const k of y)m[k]!==void 0&&(_[k]=m[k]);if(Object.keys(_).length===0){const k=Object.keys(m).slice(0,3);for(const w of k)_[w]=m[w]}return _},b=m=>typeof m=="string"?m.length>100?m.substring(0,100)+"...":m:typeof m=="object"?Array.isArray(m)?`Array(${m.length})`:"Object":String(m),v=()=>{const m=t.sessionData?t.sessionData.currentStreamingContent:r.value;return m?m.length:0},g=()=>{if(t.sessionData){const{isActive:m,completedTools:y=[],currentStreamingContent:_}=t.sessionData,k=y.length,w=m&&_;return w&&k>0?`MCP 도구 실행 중 (${k}개 완료)`:w?"MCP 도구 실행 중":k>0?`MCP 도구 실행 <tool_call> 완료 (${k}개)`:"MCP 도구 세션"}return n.value?"MCP 도구 실행 중":"MCP 도구 <tool_call> 실행 완료"};return(m,y)=>(S(),D("div",Jl,[x("div",{class:"hover:to-accent/8 relative flex cursor-pointer items-center justify-between bg-gradient-to-r from-primary/10 to-accent/5 px-4 py-3 transition-all duration-200 hover:from-primary/15",onClick:y[0]||(y[0]=_=>!n.value&&(u.value=!u.value))},[y[3]||(y[3]=x("div",{class:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent"},null,-1)),x("div",Kl,[n.value?(S(),D("div",e0,[...y[1]||(y[1]=[x("div",{class:"absolute size-8 animate-spin rounded-full bg-gradient-to-tr from-primary via-accent to-primary opacity-50",style:{"animation-duration":"3s"}},null,-1),x("div",{class:"absolute size-6 animate-spin rounded-full border-2 border-transparent border-r-primary border-t-primary",style:{"animation-duration":"1.5s"}},null,-1),x("div",{class:"size-2 animate-pulse rounded-full bg-primary shadow-lg shadow-primary/50"},null,-1)])])):(S(),Ge(O(_i),{key:1,class:G(["size-5 text-muted-foreground transition-transform duration-300",u.value?"rotate-90":""])},null,8,["class"])),Y(O(vi),{class:"size-5 text-primary"}),x("span",t0,R(g()),1),x("div",u0,[x("div",n0,R(o.value)+"개 도구",1),o.value>1?(S(),D("div",r0," 배치 실행 ")):N("",!0),e.isStreaming?(S(),D("div",o0," 실시간 ")):N("",!0)])]),x("div",i0,[e.isStreaming?(S(),D("div",s0,[...y[2]||(y[2]=[x("div",{class:"size-2 animate-pulse rounded-full bg-primary",style:{"animation-delay":"0ms"}},null,-1),x("div",{class:"size-2 animate-pulse rounded-full bg-primary/70",style:{"animation-delay":"300ms"}},null,-1),x("div",{class:"size-2 animate-pulse rounded-full bg-primary/50",style:{"animation-delay":"600ms"}},null,-1)])])):N("",!0),Y(O(Di),{class:"size-5 text-muted-foreground"})])]),bt(x("div",a0,[o.value>1?(S(),D("div",l0,[x("div",c0,[Y(O(Ai),{class:"size-4 text-primary"}),y[4]||(y[4]=x("span",{class:"text-sm font-semibold text-foreground"},"도구 목록",-1))]),x("div",{class:G(["grid gap-2",o.value>2?"grid-cols-2":"grid-cols-1"])},[(S(!0),D(Q,null,J(i.value,(_,k)=>(S(),D("div",{key:k,class:"flex items-center gap-2 rounded-lg border border-border/30 bg-card/60 px-3 py-2"},[x("div",{class:G(["size-2 rounded-full",_.isActive?"bg-green-500 animate-pulse":_.isCompleted?"bg-blue-500":"bg-muted-foreground/50"])},null,2),x("div",d0,[x("div",f0,R(_.server||"unknown"),1),x("div",h0,R(_.tool||"unknown"),1)]),_.isActive?(S(),D("div",p0,"실행중")):_.isCompleted?(S(),D("div",g0,"완료")):N("",!0)]))),128))],2)])):N("",!0),x("div",m0,[n.value?(S(),D("div",b0,[x("div",v0,[x("div",x0,[y[5]||(y[5]=x("span",{class:"text-sm font-semibold text-foreground"},"실시간 진행 상황",-1)),x("div",y0,[x("div",_0,R(l()),1),x("div",k0,R(c(v())),1)])]),i.value.length>0?(S(),D("div",w0,[x("h4",C0,[y[6]||(y[6]=x("span",null,"현재 상태",-1)),x("span",S0,R(i.value.filter(_=>_.isActive).length)+"/"+R(i.value.length),1)]),(S(!0),D(Q,null,J(i.value,(_,k)=>(S(),D("div",{key:k,class:G(["relative flex items-center justify-between gap-3 rounded-lg border p-3 transition-all duration-300",_.isActive?"bg-gradient-to-r from-green-50/80 via-emerald-50/60 to-green-50/80 border-green-300 shadow-sm dark:from-green-950/30 dark:via-emerald-950/20 dark:to-green-950/30 dark:border-green-800":_.isCompleted?"bg-gradient-to-r from-blue-50/60 via-sky-50/40 to-blue-50/60 border-blue-200 dark:from-blue-950/20 dark:via-sky-950/10 dark:to-blue-950/20 dark:border-blue-800":"bg-card/40 border-border/20"])},[_.isActive?(S(),D("div",A0)):N("",!0),x("div",D0,[x("div",T0,[_.isActive?(S(),D("div",E0)):N("",!0),x("div",{class:G(["size-3 rounded-full border-2",_.isActive?"bg-green-500 border-green-300 shadow-lg shadow-green-500/50":_.isCompleted?"bg-blue-500 border-blue-300":"bg-muted-foreground/30 border-muted-foreground/20"])},null,2)]),x("div",M0,[x("span",F0,R(_.server),1),y[7]||(y[7]=x("span",{class:"text-muted-foreground"},"•",-1)),x("span",I0,R(_.tool),1)])]),x("div",P0,[_.isActive?(S(),D("span",z0,[...y[8]||(y[8]=[x("span",{class:"inline-block size-1.5 animate-pulse rounded-full bg-green-500"},null,-1),nt(" 실행중 ",-1)])])):_.isCompleted?(S(),D("span",R0,[...y[9]||(y[9]=[x("svg",{class:"size-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),nt(" 완료 ",-1)])])):(S(),D("span",$0,"대기중"))])],2))),128))])):N("",!0)]),x("details",L0,[x("summary",B0,[y[10]||(y[10]=x("span",null,"📄 원시 데이터 보기",-1)),x("span",O0,R(c(v())),1)]),x("div",N0,[y[12]||(y[12]=x("div",{class:"absolute right-2 top-2 flex gap-1"},[x("div",{class:"size-1.5 rounded-full bg-red-400"}),x("div",{class:"size-1.5 rounded-full bg-yellow-400"}),x("div",{class:"size-1.5 rounded-full bg-green-400"})],-1)),x("pre",q0,[x("code",null,[nt(R(a.value),1),y[11]||(y[11]=x("span",{class:"animate-pulse font-bold text-primary"},"█",-1))])])])])])):(S(),D("div",H0,[x("div",V0,[x("div",j0,[y[13]||(y[13]=x("span",{class:"text-sm font-semibold text-foreground"},"실행 완료된 도구들",-1)),x("span",W0,R(s.value.length)+"개 성공",1)])]),(S(!0),D(Q,null,J(s.value,(_,k)=>(S(),D("div",{key:k,class:"overflow-hidden rounded-lg border border-border/30"},[x("details",Z0,[x("summary",G0,[x("div",U0,[x("div",X0,[Y(O(Ti),{class:"size-4 text-primary"}),x("span",Y0,R(_.server),1),y[14]||(y[14]=x("span",{class:"text-muted-foreground"},"•",-1)),x("span",Q0,R(_.tool),1),_.path?(S(),D("div",J0,[Y(O(Si),{class:"size-3 text-orange-500"}),x("span",K0,R(_.path),1)])):N("",!0),_.query?(S(),D("div",ec,[Y(O(xi),{class:"size-3 text-green-500"}),x("span",tc,R(_.query),1)])):N("",!0)]),x("div",uc,[y[15]||(y[15]=x("span",{class:"text-xs font-medium text-green-600"},"✅ 완료",-1)),x("button",{onClick:wu(w=>h(JSON.stringify(_,null,2)),["stop"]),class:"rounded-md bg-background/80 p-1.5 opacity-60 backdrop-blur-sm transition-opacity hover:opacity-100",title:"JSON 복사"},[Y(O(ki),{class:"size-3 text-muted-foreground"})],8,nc)])])]),x("div",rc,[_.arguments?(S(),D("div",oc,[y[16]||(y[16]=x("h4",{class:"mb-2 text-sm font-semibold text-foreground"},"📋 주요 파라미터",-1)),x("div",ic,[(S(!0),D(Q,null,J(p(_.arguments),(w,C)=>(S(),D("div",{key:C,class:"flex items-start gap-2 rounded bg-background/50 p-2"},[x("span",sc,R(C)+":",1),x("span",ac,R(b(w)),1)]))),128))])])):N("",!0),x("details",null,[y[19]||(y[19]=x("summary",{class:"mb-2 flex cursor-pointer items-center justify-between text-sm font-medium text-muted-foreground transition-colors hover:text-foreground"},[x("span",null,"🔍 전체 JSON 데이터 보기")],-1)),x("div",lc,[x("div",cc,[x("div",dc,[Y(O(wi),{class:"size-4 text-muted-foreground"}),y[17]||(y[17]=x("span",{class:"text-xs font-medium text-muted-foreground"},"완전한 도구 데이터",-1))]),y[18]||(y[18]=x("div",{class:"flex gap-1"},[x("div",{class:"size-2 rounded-full bg-red-400"}),x("div",{class:"size-2 rounded-full bg-yellow-400"}),x("div",{class:"size-2 rounded-full bg-green-400"})],-1))]),x("div",fc,[x("pre",hc,[x("code",null,R(JSON.stringify(_,null,2)),1)])])])])])])]))),128))]))])],512),[[po,u.value||n.value]])]))}},gc=dt(pc,[["__scopeId","data-v-4cb07813"]]),mc={class:"markdown-wrapper"},bc={class:"markdown-content"},vc=["innerHTML"],xc={key:0,class:"fixed right-4 top-4 z-50 rounded-lg bg-green-500 px-4 py-2 text-white shadow-lg"},yc={__name:"MarkdownRender_flat",props:{content:{type:String,default:""},options:{type:Object,default:()=>({html:!0,linkify:!0,typographer:!0,breaks:!1})}},setup(e){const t=e,u=Z(!1),n=Z(new Set),r=Z(null);Ou(()=>{r.value=new le(t.options),rt(()=>s())});const o=Z({isActive:!1,allTools:[],completedTools:[],currentStreamingContent:"",sessionId:null}),i=j(()=>{if(!t.content)return[];const l=[],c=t.content,d=[];let f="",h=!1,p=0;for(;p<c.length;){const v=c.indexOf("<tool_call>",p);if(v===-1)break;const g=v+11,m=c.indexOf("</tool_call>",g);if(m===-1){f=c.slice(g).trim(),h=!0;break}else{const y=c.slice(g,m).trim();try{const _=JSON.parse(y);d.push(_)}catch{d.push({error:"Parse error",raw:y,server:"unknown",tool:"parse_error"})}p=m+12}}(d.length>0||h)&&(o.value={isActive:h,allTools:d,completedTools:d,currentStreamingContent:f,sessionId:Date.now()});let b=0;for(p=0;p<c.length;){const v=c.indexOf("<tool_call>",p);if(v===-1){const y=c.slice(b);if(y.trim()&&r.value)try{l.push({type:"markdown",content:r.value.render(y)})}catch(_){l.push({type:"markdown",content:`<div class="p-4 rounded-lg"><strong>마크다운 렌더링 오류</strong><br>${_}</div>`})}break}if(v>b){const y=c.slice(b,v);if(y.trim()&&r.value)try{l.push({type:"markdown",content:r.value.render(y)})}catch(_){l.push({type:"markdown",content:`<div class="p-4 rounded-lg"><strong>마크다운 렌더링 오류</strong><br>${_}</div>`})}}const g=v+11,m=c.indexOf("</tool_call>",g);if(m===-1)break;b=m+12,p=b}return(d.length>0||h)&&!l.some(v=>v.type==="unifiedToolSession")&&l.push({type:"unifiedToolSession",data:o.value}),l});me(()=>i.value,()=>{rt(()=>s())},{immediate:!0});const s=()=>{document.querySelectorAll(".markdown-content pre code").forEach((c,d)=>{const f=c.parentElement;if(!f||f.querySelector(".copy-button-container"))return;const h=`code-block-${d}`,p=c.textContent||"",b=document.createElement("div");b.className="copy-button-container absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-200";const v=document.createElement("button");v.className="copy-button flex items-center gap-1 bg-gray-700 hover:bg-gray-600 text-white text-xs px-2 py-1 rounded",v.onclick=()=>a(p,h);const g=()=>{const m=n.value.has(h);v.innerHTML=m?"✅ 복사됨!":"📋 복사",v.className=m?"copy-button flex items-center gap-1 bg-green-600 hover:bg-green-500 text-white text-xs px-2 py-1 rounded":"copy-button flex items-center gap-1 bg-gray-700 hover:bg-gray-600 text-white text-xs px-2 py-1 rounded"};g(),b.appendChild(v),f.style.position="relative",f.classList.add("group"),f.appendChild(b),setInterval(g,200)})},a=async(l,c)=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(l);else{const d=document.createElement("textarea");d.value=l,d.style.position="fixed",d.style.left="-999999px",document.body.appendChild(d),d.focus(),d.select(),document.execCommand("copy"),d.remove()}n.value.add(c),setTimeout(()=>n.value.delete(c),2e3),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch(d){console.error("복사 실패:",d)}};return(l,c)=>(S(),D("div",mc,[x("div",bc,[(S(!0),D(Q,null,J(i.value,(d,f)=>(S(),D("div",{key:f},[d.type==="unifiedToolSession"?(S(),Ge(gc,{key:0,toolCalls:d.data.completedTools,partialContent:d.data.currentStreamingContent,isStreaming:d.data.isActive,sessionData:d.data},null,8,["toolCalls","partialContent","isStreaming","sessionData"])):(S(),D("div",{key:1,innerHTML:d.content},null,8,vc))]))),128))]),Y(go,{name:"toast"},{default:cr(()=>[u.value?(S(),D("div",xc," ✅ 코드 복사됨! ")):N("",!0)]),_:1})]))}},Ku=dt(yc,[["__scopeId","data-v-c442fc43"]]),_c={key:0,class:"relative mt-6"},kc={class:"mb-6 space-y-4"},wc={class:"flex items-center justify-between"},Cc={class:"flex items-center gap-2"},Sc={class:"flex -space-x-2"},Ac=["src"],Dc={key:0,class:"flex size-8 items-center justify-center rounded-full border-2 border-white bg-gradient-to-r from-gray-600 to-gray-800 text-xs font-bold text-white shadow-lg"},Tc={class:"flex items-center"},Ec={class:"flex items-center text-sm text-gray-500"},Mc={class:"flex flex-wrap items-center gap-2"},Fc=["onClick"],Ic={class:"overflow-x-auto py-4"},Pc={class:"flex w-max gap-6"},zc={class:"mb-4 flex items-center justify-between"},Rc={class:"rounded-full bg-white/20 px-3 py-1 text-xs font-bold text-white"},$c={key:0,class:"text-xs font-medium text-white/80"},Lc={key:0,class:"mb-4 overflow-hidden rounded-2xl"},Bc=["src","alt"],Oc={class:"space-y-4"},Nc={class:"line-clamp-2 text-lg font-bold leading-tight text-white"},qc={key:0,class:"line-clamp-3 text-sm leading-relaxed text-white/80"},Hc={class:"flex items-center gap-2"},Vc=["onClick"],jc=["href"],Wc={class:"border-t border-white/10 pt-4"},Zc={class:"flex flex-wrap gap-2"},Gc=["onClick"],hu="qqqq",Uc={__name:"NewsCards",props:{mcpResults:{type:Array,default:()=>[]}},emits:["askAI","askQuickQuestion","askGlobalQuestion"],setup(e,{emit:t}){const u=e,n=t,r=j(()=>{const b=[];return u.mcpResults&&Array.isArray(u.mcpResults)&&u.mcpResults.forEach(v=>{var g,m;Array.isArray(v)?v.forEach(y=>{(y==null?void 0:y.tool)==="scrape"&&(y!=null&&y.result)&&Array.isArray(y.result)&&b.push(...y.result)}):((g=v==null?void 0:v.parsedContent)==null?void 0:g.dataType)==="news"&&((m=v.parsedContent)!=null&&m.articles)&&b.push(...v.parsedContent.articles)}),b}),o=j(()=>r.value.length>0),i=j(()=>r.value.map(b=>b.imageUrl).filter(Boolean).slice(0,5)),s=j(()=>[{type:"trend_analysis",label:"트렌드 분석",icon:"📈",style:"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"},{type:"market_summary",label:"시장 요약",icon:"💰",style:"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700"},{type:"hot_topics",label:"핫 토픽",icon:"🔥",style:"bg-gradient-to-r from-red-500 to-pink-600 text-white hover:from-red-600 hover:to-pink-700"},{type:"sector_analysis",label:"섹터 분석",icon:"🏭",style:"bg-gradient-to-r from-orange-500 to-yellow-600 text-white hover:from-orange-600 hover:to-yellow-700"},{type:"global_news",label:"글로벌 동향",icon:"🌍",style:"bg-gradient-to-r from-cyan-500 to-teal-600 text-white hover:from-cyan-600 hover:to-teal-700"}]),a=b=>{const v=["bg-gradient-to-br from-emerald-300 to-cyan-400","bg-gradient-to-br from-purple-300 to-pink-400","bg-gradient-to-br from-amber-300 to-orange-400","bg-gradient-to-br from-rose-300 to-red-400","bg-gradient-to-br from-blue-300 to-indigo-400","bg-gradient-to-br from-teal-300 to-green-400","bg-gradient-to-br from-violet-300 to-purple-400","bg-gradient-to-br from-cyan-300 to-blue-400"],g=["bg-gradient-to-br from-emerald-600 to-cyan-800","bg-gradient-to-br from-purple-600 to-pink-800","bg-gradient-to-br from-amber-600 to-orange-800","bg-gradient-to-br from-rose-600 to-red-800","bg-gradient-to-br from-blue-600 to-indigo-800","bg-gradient-to-br from-teal-600 to-green-800","bg-gradient-to-br from-violet-600 to-purple-800","bg-gradient-to-br from-cyan-600 to-blue-800"],y=Math.random()>.5?v:g;return y[b%y.length]},l=b=>{const v={주식:["주식","증시","코스피","코스닥","투자"],정치:["정치","정부","대통령","국회","선거"],경제:["경제","금리","환율","GDP","인플레이션"],기술:["기술","AI","IT","인공지능","테크"],사회:["사회","교육","의료","복지","문화"],국제:["국제","해외","글로벌","무역","외교"],스포츠:["스포츠","축구","야구","올림픽","경기"]},g=b.toLowerCase();for(const[m,y]of Object.entries(v))if(y.some(_=>g.includes(_)))return m;return"뉴스"},c=b=>{let v=` 다음 뉴스에 대해 분석해주세요:

제목: ${b.title}

`;b.body&&(v+=`내용: ${b.body.slice(3e3)}

`),b.articleLink&&(v+=`뉴스 링크: ${b.articleLink}

`),b.imageUrl&&(v+=`이미지: ${b.imageUrl}

`),v+=`${hu}

반듯이 위에서 분석한 내용을 기반으로 50줄 정도 키워드, 내용요약.  카카오에도 이미지 잘넣고, 텔레그램에 각각 도구 호출.  전달 도구 호출방법에 따라서 앞에서 한내용을 그대로 넣고 메시지 <tool_call>  </tool_call> 만들어줘 `,n("askAI",{article:b,prompt:v})},d=b=>{var m;const v=["요약해줘","배경 설명","영향 분석"],g=((m=b.title)==null?void 0:m.toLowerCase())||"";return(g.includes("주식")||g.includes("증시")||g.includes("코스피"))&&v.push("주식 영향"),(g.includes("정치")||g.includes("정부")||g.includes("대통령"))&&v.push("정치적 의미"),(g.includes("경제")||g.includes("금리")||g.includes("환율"))&&v.push("경제 영향"),(g.includes("기술")||g.includes("AI")||g.includes("IT"))&&v.push("기술 트렌드"),v.slice(0,4)},f=b=>{let v="";switch(b){case"trend_analysis":v="현재 뉴스들을 분석해서 주요 트렌드와 패턴을 분석해주세요. 경제, 정치, 사회, 기술 등 여러 분야의 동향을 종합적으로 정리해주세요.";break;case"market_summary":v="오늘의 주요 경제/금융 뉴스를 요약하고 시장에 미칠 영향을 분석해주세요. 주식, 환율, 금리 등 주요 지표에 대한 전망도 포함해주세요.";break;case"hot_topics":v="현재 가장 화제가 되고 있는 뉴스 토픽들을 정리하고, 각각이 왜 주목받고 있는지 배경과 의미를 설명해주세요.";break;case"sector_analysis":v="업종별/섹터별 주요 뉴스와 동향을 분석해주세요. 각 섹터의 기회와 리스크를 포함해서 정리해주세요.";break;case"global_news":v="해외 주요 뉴스와 글로벌 경제 동향을 정리하고, 국내에 미칠 영향을 분석해주세요.";break;default:v=`뉴스 전반에 대해 "${b}" 관점에서 분석해주세요.`}v=`${hu}

${v}

반듯이 위에서 분석한 내용을 기반으로 50줄 정도 키워드, 내용요약. 카카오에도 이미지 잘넣고, 텔레그램에 각각 도구 호출. 전달 도구 호출방법에 따라서 앞에서 한내용을 그대로 넣고 메시지 <tool_call> </tool_call> 만들어줘`,n("askGlobalQuestion",{questionType:b,prompt:v})},h=(b,v)=>{let g=`${v}:

제목: ${b.title}

`;return b.body&&(g+=`내용: ${b.body}

`),b.articleLink&&(g+=`뉴스 링크: ${b.articleLink}

`),b.imageUrl&&(g+=`이미지: ${b.imageUrl}

`),`${hu}

`+g.trim()},p=(b,v)=>{let g="";switch(v){case"요약해줘":g=h(b,"다음 뉴스를 간단히 요약해주세요");break;case"배경 설명":g=h(b,"다음 뉴스의 배경과 맥락을 설명해주세요");break;case"영향 분석":g=h(b,"다음 뉴스가 사회/경제에 미칠 영향을 분석해주세요");break;case"주식 영향":g=h(b,"다음 뉴스가 주식시장과 관련 종목에 미칠 영향을 분석해주세요");break;case"정치적 의미":g=h(b,"다음 뉴스의 정치적 의미와 파급효과를 분석해주세요");break;case"경제 영향":g=h(b,"다음 뉴스가 경제에 미칠 영향을 분석해주세요");break;case"기술 트렌드":g=h(b,"다음 뉴스의 기술적 의미와 미래 트렌드를 분석해주세요");break;default:g=h(b,`다음 뉴스에 대해 "${v}" 관점에서 분석해주세요`)}n("askQuickQuestion",{article:b,questionType:v,prompt:g})};return(b,v)=>o.value?(S(),D("div",_c,[x("div",kc,[x("div",wc,[x("div",Cc,[x("div",Sc,[(S(!0),D(Q,null,J(i.value.slice(0,3),(g,m)=>(S(),D(Q,{key:m},[g?(S(),D("img",{key:0,src:g,alt:"news source",class:"size-8 rounded-full border-2 border-white object-cover shadow-lg"},null,8,Ac)):N("",!0)],64))),128)),i.value.length>3?(S(),D("div",Dc," +"+R(i.value.length-3),1)):N("",!0)]),x("div",Tc,[x("div",Ec,[v[1]||(v[1]=x("svg",{class:"size-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[x("circle",{cx:"10",cy:"10",r:"6"})],-1)),nt(" "+R(r.value.length),1)])])]),v[2]||(v[2]=x("div",{class:"flex items-center gap-2"},[x("button",{class:"rounded-lg bg-gray-100 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200"},[x("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})])])],-1))]),x("div",Mc,[(S(!0),D(Q,null,J(s.value,g=>(S(),D("button",{key:g.label,onClick:m=>f(g.type),class:G(["rounded-full px-4 py-2 text-sm font-medium transition-all hover:scale-105",g.style])},R(g.icon)+" "+R(g.label),11,Fc))),128))])]),x("div",Ic,[x("div",Pc,[(S(!0),D(Q,null,J(r.value,(g,m)=>(S(),D("div",{key:g.link||g.title,class:G(["group relative w-80 shrink-0 overflow-hidden rounded-3xl p-6  transition-all duration-300 hover:-translate-y-2 hover:shadow-inner",a(m)])},[v[6]||(v[6]=dr('<div class="absolute -right-4 -top-4 opacity-20" data-v-4b80ecc3><div class="flex items-center gap-1" data-v-4b80ecc3><div class="size-3 rounded-full bg-white/30" data-v-4b80ecc3></div><div class="size-2 rounded-full bg-white/20" data-v-4b80ecc3></div><div class="size-1 rounded-full bg-white/10" data-v-4b80ecc3></div></div></div>',1)),x("div",zc,[x("span",Rc,R(l(g.title)),1),g.publish_date?(S(),D("span",$c,R(g.publish_date[1]||g.publish_date[0]),1)):N("",!0)]),g.imageUrl?(S(),D("div",Lc,[x("img",{src:g.imageUrl,alt:g.title,class:"h-32 w-full object-cover transition-transform duration-500 group-hover:scale-110",onError:v[0]||(v[0]=y=>y.target.style.display="none")},null,40,Bc)])):N("",!0),x("div",Oc,[x("h4",Nc,R(g.title),1),g.body?(S(),D("p",qc,R(g.body),1)):N("",!0),x("div",Hc,[x("button",{onClick:y=>c(g),class:"flex items-center gap-2 rounded-xl bg-black/20 px-4 py-2 text-sm font-semibold text-white backdrop-blur-sm transition-all hover:scale-105 hover:bg-black/30",title:"이 뉴스에 대해 AI에게 질문하기"},[...v[3]||(v[3]=[x("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),x("span",null,"AI 질문",-1)])],8,Vc),g.articleLink?(S(),D("a",{key:0,href:g.articleLink,target:"_blank",rel:"noopener noreferrer",class:"flex items-center gap-2 rounded-xl bg-white/20 px-4 py-2 text-sm font-semibold text-white backdrop-blur-sm transition-all hover:scale-105 hover:bg-white/30"},[...v[4]||(v[4]=[x("span",null,"읽기",-1),x("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,jc)):N("",!0)]),x("div",Wc,[v[5]||(v[5]=x("div",{class:"mb-2"},[x("span",{class:"text-xs font-medium text-white/70"},"빠른 질문")],-1)),x("div",Zc,[(S(!0),D(Q,null,J(d(g),y=>(S(),D("button",{key:y,onClick:_=>p(g,y),class:"rounded-full bg-white/10 px-3 py-1 text-xs font-medium text-white/90 backdrop-blur-sm transition-colors hover:bg-white/20"},R(y),9,Gc))),128))])])])],2))),128))])])])):N("",!0)}},Xc=dt(Uc,[["__scopeId","data-v-4b80ecc3"]]);var Ze=Gt(),Pn=st,pu=W,Yc=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,u,n,r){var o=u.get("value"),i=u.get("status");if(this._axisModel=t,this._axisPointerModel=u,this._api=n,!(!r&&this._lastValue===o&&this._lastStatus===i)){this._lastValue=o,this._lastStatus=i;var s=this._group,a=this._handle;if(!i||i==="hide"){s&&s.hide(),a&&a.hide();return}s&&s.show(),a&&a.show();var l={};this.makeElOption(l,o,t,u,n);var c=l.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var d=this._moveAnimation=this.determineAnimation(t,u);if(!s)s=this._group=new _t,this.createPointerEl(s,l,t,u),this.createLabelEl(s,l,t,u),n.getZr().add(s);else{var f=ie(zn,u,d);this.updatePointerEl(s,l,f),this.updateLabelEl(s,l,f,u)}$n(s,u,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,u){var n=u.get("animation"),r=t.axis,o=r.type==="category",i=u.get("snap");if(!i&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&r.getBandWidth()>s)return!0;if(i){var a=Co(t).seriesDataCount,l=r.getExtent();return Math.abs(l[0]-l[1])/a>s}return!1}return n===!0},e.prototype.makeElOption=function(t,u,n,r,o){},e.prototype.createPointerEl=function(t,u,n,r){var o=u.pointer;if(o){var i=Ze(t).pointerEl=new So[o.type](Pn(u.pointer));t.add(i)}},e.prototype.createLabelEl=function(t,u,n,r){if(u.label){var o=Ze(t).labelEl=new Oe(Pn(u.label));t.add(o),Rn(o,r)}},e.prototype.updatePointerEl=function(t,u,n){var r=Ze(t).pointerEl;r&&u.pointer&&(r.setStyle(u.pointer.style),n(r,{shape:u.pointer.shape}))},e.prototype.updateLabelEl=function(t,u,n,r){var o=Ze(t).labelEl;o&&(o.setStyle(u.label.style),n(o,{x:u.label.x,y:u.label.y}),Rn(o,r))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var u=this._axisPointerModel,n=this._api.getZr(),r=this._handle,o=u.getModel("handle"),i=u.get("status");if(!o.get("show")||!i||i==="hide"){r&&n.remove(r),this._handle=null;return}var s;this._handle||(s=!0,r=this._handle=hr(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(l){yt(l.event)},onmousedown:pu(this._onHandleDragMove,this,0,0),drift:pu(this._onHandleDragMove,this),ondragend:pu(this._onHandleDragEnd,this)}),n.add(r)),$n(r,u,!1),r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var a=o.get("size");be(a)||(a=[a,a]),r.scaleX=a[0]/2,r.scaleY=a[1]/2,Ut(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,u){zn(this._axisPointerModel,!u&&this._moveAnimation,this._handle,gu(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,u){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(gu(n),[t,u],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(gu(r)),Ze(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var u=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:u.cursorPoint[0],y:u.cursorPoint[1],tooltipOption:u.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var u=this._axisPointerModel.get("value");this._moveHandleToValue(u),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var u=t.getZr(),n=this._group,r=this._handle;u&&n&&(this._lastGraphicKey=null,n&&u.remove(n),r&&u.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),Ot(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,u,n){return n=n||0,{x:t[n],y:t[1-n],width:u[n],height:u[1-n]}},e}();function zn(e,t,u,n){Zr(Ze(u).lastProp,n)||(Ze(u).lastProp=n,t?pr(u,n,e):(u.stopAnimation(),u.attr(n)))}function Zr(e,t){if(Nt(e)&&Nt(t)){var u=!0;return $(t,function(n,r){u=u&&Zr(e[r],n)}),!!u}else return e===t}function Rn(e,t){e[t.get(["label","show"])?"show":"hide"]()}function gu(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function $n(e,t,u){var n=t.get("z"),r=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),r!=null&&(o.zlevel=r),o.silent=u)})}function Qc(e){var t=e.get("type"),u=e.getModel(t+"Style"),n;return t==="line"?(n=u.getLineStyle(),n.fill=null):t==="shadow"&&(n=u.getAreaStyle(),n.stroke=null),n}function Jc(e,t,u,n,r){var o=u.get("value"),i=Gr(o,t.axis,t.ecModel,u.get("seriesDataIndices"),{precision:u.get(["label","precision"]),formatter:u.get(["label","formatter"])}),s=u.getModel("label"),a=Nu(s.get("padding")||0),l=s.getFont(),c=Ao(i,l),d=r.position,f=c.width+a[1]+a[3],h=c.height+a[0]+a[2],p=r.align;p==="right"&&(d[0]-=f),p==="center"&&(d[0]-=f/2);var b=r.verticalAlign;b==="bottom"&&(d[1]-=h),b==="middle"&&(d[1]-=h/2),Kc(d,f,h,n);var v=s.get("backgroundColor");(!v||v==="auto")&&(v=t.get(["axisLine","lineStyle","color"])),e.label={x:d[0],y:d[1],style:kt(s,{text:i,font:l,fill:s.getTextColor(),padding:a,backgroundColor:v}),z2:10}}function Kc(e,t,u,n){var r=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,r)-t,e[1]=Math.min(e[1]+u,o)-u,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Gr(e,t,u,n,r){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:r.precision}),i=r.formatter;if(i){var s={value:gr(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};$(n,function(a){var l=u.getSeriesByIndex(a.seriesIndex),c=a.dataIndexInside,d=l&&l.getDataParams(c);d&&s.seriesData.push(d)}),ne(i)?o=i.replace("{value}",o):Ue(i)&&(o=i(s))}return o}function Ur(e,t,u){var n=Mo();return To(n,n,u.rotation),Eo(n,n,u.position),Su([e.dataToCoord(t),(u.labelOffset||0)+(u.labelDirection||1)*(u.labelMargin||0)],n)}function ed(e,t,u,n,r,o){var i=Do.innerTextLayout(u.rotation,0,u.labelDirection);u.labelMargin=r.get(["label","margin"]),Jc(t,n,r,o,{position:Ur(n.axis,e,u),align:i.textAlign,verticalAlign:i.textVerticalAlign})}function td(e,t,u){return u=u||0,{x1:e[u],y1:e[1-u],x2:t[u],y2:t[1-u]}}function ud(e,t,u){return u=u||0,{x:e[u],y:e[1-u],width:t[u],height:t[1-u]}}function F1(e,t,u,n,r,o){return{cx:e,cy:t,r0:u,r:n,startAngle:r,endAngle:o,clockwise:!0}}var nd=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(u,n,r,o,i){var s=r.axis,a=s.grid,l=o.get("type"),c=Ln(a,s).getOtherAxis(s).getGlobalExtent(),d=s.toGlobalCoord(s.dataToCoord(n,!0));if(l&&l!=="none"){var f=Qc(o),h=rd[l](s,d,c);h.style=f,u.graphicKey=h.type,u.pointer=h}var p=sn(a.model,r);ed(n,u,p,r,o,i)},t.prototype.getHandleTransform=function(u,n,r){var o=sn(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=r.get(["handle","margin"]);var i=Ur(n.axis,u,o);return{x:i[0],y:i[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(u,n,r,o){var i=r.axis,s=i.grid,a=i.getGlobalExtent(!0),l=Ln(s,i).getOtherAxis(i).getGlobalExtent(),c=i.dim==="x"?0:1,d=[u.x,u.y];d[c]+=n[c],d[c]=Math.min(a[1],d[c]),d[c]=Math.max(a[0],d[c]);var f=(l[1]+l[0])/2,h=[f,f];h[c]=d[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:u.rotation,cursorPoint:h,tooltipOption:p[c]}},t}(Yc);function Ln(e,t){var u={};return u[t.dim+"AxisIndex"]=t.index,e.getCartesian(u)}var rd={line:function(e,t,u){var n=td([t,u[0]],[t,u[1]],Bn(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,u){var n=Math.max(1,e.getBandWidth()),r=u[1]-u[0];return{type:"Rect",shape:ud([t-n/2,u[0]],[n,r],Bn(e))}}};function Bn(e){return e.dim==="x"?0:1}var od=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Tt),Se=Gt(),id=$;function Xr(e,t,u){if(!se.node){var n=t.getZr();Se(n).records||(Se(n).records={}),sd(n,t);var r=Se(n).records[e]||(Se(n).records[e]={});r.handler=u}}function sd(e,t){if(Se(e).initialized)return;Se(e).initialized=!0,u("click",ie(On,"click")),u("mousemove",ie(On,"mousemove")),u("globalout",ld);function u(n,r){e.on(n,function(o){var i=cd(t);id(Se(e).records,function(s){s&&r(s,o,i.dispatchAction)}),ad(i.pendings,t)})}}function ad(e,t){var u=e.showTip.length,n=e.hideTip.length,r;u?r=e.showTip[u-1]:n&&(r=e.hideTip[n-1]),r&&(r.dispatchAction=null,t.dispatchAction(r))}function ld(e,t,u){e.handler("leave",null,u)}function On(e,t,u,n){t.handler(e,u,n)}function cd(e){var t={showTip:[],hideTip:[]},u=function(n){var r=t[n.type];r?r.push(n):(n.dispatchAction=u,e.dispatchAction(n))};return{dispatchAction:u,pendings:t}}function zu(e,t){if(!se.node){var u=t.getZr(),n=(Se(u).records||{})[e];n&&(Se(u).records[e]=null)}}var dd=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.prototype.render=function(u,n,r){var o=n.getComponent("tooltip"),i=u.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";Xr("axisPointer",r,function(s,a,l){i!=="none"&&(s==="leave"||i.indexOf(s)>=0)&&l({type:"updateAxisPointer",currTrigger:s,x:a&&a.offsetX,y:a&&a.offsetY})})},t.prototype.remove=function(u,n){zu("axisPointer",n)},t.prototype.dispose=function(u,n){zu("axisPointer",n)},t.type="axisPointer",t}(Et);function Yr(e,t){var u=[],n=e.seriesIndex,r;if(n==null||!(r=t.getSeriesByIndex(n)))return{point:[]};var o=r.getData(),i=Fo(o,e);if(i==null||i<0||be(i))return{point:[]};var s=o.getItemGraphicEl(i),a=r.coordinateSystem;if(r.getTooltipPosition)u=r.getTooltipPosition(i)||[];else if(a&&a.dataToPoint)if(e.isStacked){var l=a.getBaseAxis(),c=a.getOtherAxis(l),d=c.dim,f=l.dim,h=d==="x"||d==="radius"?1:0,p=o.mapDimension(f),b=[];b[h]=o.get(p,i),b[1-h]=o.get(o.getCalculationInfo("stackResultDimension"),i),u=a.dataToPoint(b)||[]}else u=a.dataToPoint(o.getValues(qu(a.dimensions,function(g){return o.mapDimension(g)}),i))||[];else if(s){var v=s.getBoundingRect().clone();v.applyTransform(s.transform),u=[v.x+v.width/2,v.y+v.height/2]}return{point:u,el:s}}var Nn=Gt();function fd(e,t,u){var n=e.currTrigger,r=[e.x,e.y],o=e,i=e.dispatchAction||W(u.dispatchAction,u),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){Bt(r)&&(r=Yr({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var a=Bt(r),l=o.axesInfo,c=s.axesInfo,d=n==="leave"||Bt(r),f={},h={},p={list:[],map:{}},b={showPointer:ie(pd,h),showTooltip:ie(gd,p)};$(s.coordSysMap,function(g,m){var y=a||g.containPoint(r);$(s.coordSysAxesInfo[m],function(_,k){var w=_.axis,C=xd(l,_);if(!d&&y&&(!l||C)){var A=C&&C.value;A==null&&!a&&(A=w.pointToData(r)),A!=null&&qn(_,A,b,!1,f)}})});var v={};return $(c,function(g,m){var y=g.linkGroup;y&&!h[m]&&$(y.axesInfo,function(_,k){var w=h[k];if(_!==g&&w){var C=w.value;y.mapper&&(C=g.axis.scale.parse(y.mapper(C,Hn(_),Hn(g)))),v[g.key]=C}})}),$(v,function(g,m){qn(c[m],g,b,!0,f)}),md(h,c,f),bd(p,r,e,i),vd(c,i,u),f}}function qn(e,t,u,n,r){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){u.showPointer(e,t);return}var i=hd(t,e),s=i.payloadBatch,a=i.snapToValue;s[0]&&r.seriesIndex==null&&wt(r,s[0]),!n&&e.snap&&o.containData(a)&&a!=null&&(t=a),u.showPointer(e,t,s),u.showTooltip(e,i,a)}}function hd(e,t){var u=t.axis,n=u.dim,r=e,o=[],i=Number.MAX_VALUE,s=-1;return $(t.seriesModels,function(a,l){var c=a.getData().mapDimensionsAll(n),d,f;if(a.getAxisTooltipData){var h=a.getAxisTooltipData(c,e,u);f=h.dataIndices,d=h.nestestValue}else{if(f=a.getData().indicesOfNearest(c[0],e,u.type==="category"?.5:null),!f.length)return;d=a.getData().get(c[0],f[0])}if(!(d==null||!isFinite(d))){var p=e-d,b=Math.abs(p);b<=i&&((b<i||p>=0&&s<0)&&(i=b,s=p,r=d,o.length=0),$(f,function(v){o.push({seriesIndex:a.seriesIndex,dataIndexInside:v,dataIndex:a.getData().getRawIndex(v)})}))}}),{payloadBatch:o,snapToValue:r}}function pd(e,t,u,n){e[t.key]={value:u,payloadBatch:n}}function gd(e,t,u,n){var r=u.payloadBatch,o=t.axis,i=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!r.length)){var a=t.coordSys.model,l=Io(a),c=e.map[l];c||(c=e.map[l]={coordSysId:a.id,coordSysIndex:a.componentIndex,coordSysType:a.type,coordSysMainType:a.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:i.componentIndex,axisType:i.type,axisId:i.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function md(e,t,u){var n=u.axesInfo=[];$(t,function(r,o){var i=r.axisPointerModel.option,s=e[o];s?(!r.useHandle&&(i.status="show"),i.value=s.value,i.seriesDataIndices=(s.payloadBatch||[]).slice()):!r.useHandle&&(i.status="hide"),i.status==="show"&&n.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:i.value})})}function bd(e,t,u,n){if(Bt(t)||!e.list.length){n({type:"hideTip"});return}var r=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:u.tooltipOption,position:u.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:e.list})}function vd(e,t,u){var n=u.getZr(),r="axisPointerLastHighlights",o=Nn(n)[r]||{},i=Nn(n)[r]={};$(e,function(l,c){var d=l.axisPointerModel.option;d.status==="show"&&l.triggerEmphasis&&$(d.seriesDataIndices,function(f){var h=f.seriesIndex+" | "+f.dataIndex;i[h]=f})});var s=[],a=[];$(o,function(l,c){!i[c]&&a.push(l)}),$(i,function(l,c){!o[c]&&s.push(l)}),a.length&&u.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:a}),s.length&&u.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function xd(e,t){for(var u=0;u<(e||[]).length;u++){var n=e[u];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function Hn(e){var t=e.axis.model,u={},n=u.axisDim=e.axis.dim;return u.axisIndex=u[n+"AxisIndex"]=t.componentIndex,u.axisName=u[n+"AxisName"]=t.name,u.axisId=u[n+"AxisId"]=t.id,u}function Bt(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function Qr(e){Po.registerAxisPointerClass("CartesianAxisPointer",nd),e.registerComponentModel(od),e.registerComponentView(dd),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var u=t.axisPointer.link;u&&!be(u)&&(t.axisPointer.link=[u])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,u){t.getComponent("axisPointer").coordSysAxesInfo=zo(t,u)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},fd)}function yd(e){De(Ro),De(Qr)}var Vn=["x","y","radius","angle","single"],_d=["cartesian2d","polar","singleAxis"];function kd(e){var t=e.get("coordinateSystem");return Xt(_d,t)>=0}function Be(e){return e+"Axis"}function wd(e,t){var u=Te(),n=[],r=Te();e.eachComponent({mainType:"dataZoom",query:t},function(c){r.get(c.uid)||s(c)});var o;do o=!1,e.eachComponent("dataZoom",i);while(o);function i(c){!r.get(c.uid)&&a(c)&&(s(c),o=!0)}function s(c){r.set(c.uid,!0),n.push(c),l(c)}function a(c){var d=!1;return c.eachTargetAxis(function(f,h){var p=u.get(f);p&&p[h]&&(d=!0)}),d}function l(c){c.eachTargetAxis(function(d,f){(u.get(d)||u.set(d,[]))[f]=!0})}return n}function Jr(e){var t=e.ecModel,u={infoList:[],infoMap:Te()};return e.eachTargetAxis(function(n,r){var o=t.getComponent(Be(n),r);if(o){var i=o.getCoordSysModel();if(i){var s=i.uid,a=u.infoMap.get(s);a||(a={model:i,axisModels:[]},u.infoList.push(a),u.infoMap.set(s,a)),a.axisModels.push(o)}}}),u}var mu=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),Zt=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u._autoThrottle=!0,u._noTarget=!0,u._rangePropMode=["percent","percent"],u}return t.prototype.init=function(u,n,r){var o=jn(u);this.settledOption=o,this.mergeDefaultAndTheme(u,r),this._doInit(o)},t.prototype.mergeOption=function(u){var n=jn(u);Au(this.option,u,!0),Au(this.settledOption,n,!0),this._doInit(n)},t.prototype._doInit=function(u){var n=this.option;this._setDefaultThrottle(u),this._updateRangeUse(u);var r=this.settledOption;$([["start","startValue"],["end","endValue"]],function(o,i){this._rangePropMode[i]==="value"&&(n[o[0]]=r[o[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var u=this.get("orient",!0),n=this._targetAxisInfoMap=Te(),r=this._fillSpecifiedTargetAxis(n);r?this._orient=u||this._makeAutoOrientByTargetAxis():(this._orient=u||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(u){var n=!1;return $(Vn,function(r){var o=this.getReferringComponents(Be(r),$o);if(o.specified){n=!0;var i=new mu;$(o.models,function(s){i.add(s.componentIndex)}),u.set(r,i)}},this),n},t.prototype._fillAutoTargetAxisByOrient=function(u,n){var r=this.ecModel,o=!0;if(o){var i=n==="vertical"?"y":"x",s=r.findComponents({mainType:i+"Axis"});a(s,i)}if(o){var s=r.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===n}});a(s,"single")}function a(l,c){var d=l[0];if(d){var f=new mu;if(f.add(d.componentIndex),u.set(c,f),o=!1,c==="x"||c==="y"){var h=d.getReferringComponents("grid",Du).models[0];h&&$(l,function(p){d.componentIndex!==p.componentIndex&&h===p.getReferringComponents("grid",Du).models[0]&&f.add(p.componentIndex)})}}}o&&$(Vn,function(l){if(o){var c=r.findComponents({mainType:Be(l),filter:function(f){return f.get("type",!0)==="category"}});if(c[0]){var d=new mu;d.add(c[0].componentIndex),u.set(l,d),o=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var u;return this.eachTargetAxis(function(n){!u&&(u=n)},this),u==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(u){if(u.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(u){var n=this._rangePropMode,r=this.get("rangeMode");$([["start","startValue"],["end","endValue"]],function(o,i){var s=u[o[0]]!=null,a=u[o[1]]!=null;s&&!a?n[i]="percent":!s&&a?n[i]="value":r?n[i]=r[i]:s&&(n[i]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var u;return this.eachTargetAxis(function(n,r){u==null&&(u=this.ecModel.getComponent(Be(n),r))},this),u},t.prototype.eachTargetAxis=function(u,n){this._targetAxisInfoMap.each(function(r,o){$(r.indexList,function(i){u.call(n,o,i)})})},t.prototype.getAxisProxy=function(u,n){var r=this.getAxisModel(u,n);if(r)return r.__dzAxisProxy},t.prototype.getAxisModel=function(u,n){var r=this._targetAxisInfoMap.get(u);if(r&&r.indexMap[n])return this.ecModel.getComponent(Be(u),n)},t.prototype.setRawRange=function(u){var n=this.option,r=this.settledOption;$([["start","startValue"],["end","endValue"]],function(o){(u[o[0]]!=null||u[o[1]]!=null)&&(n[o[0]]=r[o[0]]=u[o[0]],n[o[1]]=r[o[1]]=u[o[1]])},this),this._updateRangeUse(u)},t.prototype.setCalculatedRange=function(u){var n=this.option;$(["start","startValue","end","endValue"],function(r){n[r]=u[r]})},t.prototype.getPercentRange=function(){var u=this.findRepresentativeAxisProxy();if(u)return u.getDataPercentWindow()},t.prototype.getValueRange=function(u,n){if(u==null&&n==null){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataValueWindow()}else return this.getAxisProxy(u,n).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(u){if(u)return u.__dzAxisProxy;for(var n,r=this._targetAxisInfoMap.keys(),o=0;o<r.length;o++)for(var i=r[o],s=this._targetAxisInfoMap.get(i),a=0;a<s.indexList.length;a++){var l=this.getAxisProxy(i,s.indexList[a]);if(l.hostedBy(this))return l;n||(n=l)}return n},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(Tt);function jn(e){var t={};return $(["start","end","startValue","endValue","throttle"],function(u){e.hasOwnProperty(u)&&(t[u]=e[u])}),t}var Kr=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.prototype.render=function(u,n,r,o){this.dataZoomModel=u,this.ecModel=n,this.api=r},t.type="dataZoom",t}(Et),ut=$,Wn=vt,Cd=function(){function e(t,u,n,r){this._dimName=t,this._axisIndex=u,this.ecModel=r,this._dataZoomModel=n}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(u){if(kd(u)){var n=Be(this._dimName),r=u.getReferringComponents(n,Du).models[0];r&&this._axisIndex===r.componentIndex&&t.push(u)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return st(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var u=this._dataExtent,n=this.getAxisModel(),r=n.axis.scale,o=this._dataZoomModel.getRangePropMode(),i=[0,100],s=[],a=[],l;ut(["start","end"],function(f,h){var p=t[f],b=t[f+"Value"];o[h]==="percent"?(p==null&&(p=i[h]),b=r.parse(re(p,i,u))):(l=!0,b=b==null?u[h]:r.parse(b),p=re(b,u,i)),a[h]=b==null||isNaN(b)?u[h]:b,s[h]=p==null||isNaN(p)?i[h]:p}),Wn(a),Wn(s);var c=this._minMaxSpan;l?d(a,s,u,i,!1):d(s,a,i,u,!0);function d(f,h,p,b,v){var g=v?"Span":"ValueSpan";Yt(0,f,p,"all",c["min"+g],c["max"+g]);for(var m=0;m<2;m++)h[m]=re(f[m],p,b,!0),v&&(h[m]=r.parse(h[m]))}return{valueWindow:a,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var u=this.getTargetSeriesModels();this._dataExtent=Sd(this,this._dimName,u),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,u){if(t!==this._dataZoomModel)return;var n=this._dimName,r=this.getTargetSeriesModels(),o=t.get("filterMode"),i=this._valueWindow;if(o==="none")return;ut(r,function(a){var l=a.getData(),c=l.mapDimensionsAll(n);if(c.length){if(o==="weakFilter"){var d=l.getStore(),f=qu(c,function(h){return l.getDimensionIndex(h)},l);l.filterSelf(function(h){for(var p,b,v,g=0;g<c.length;g++){var m=d.get(f[g],h),y=!isNaN(m),_=m<i[0],k=m>i[1];if(y&&!_&&!k)return!0;y&&(v=!0),_&&(p=!0),k&&(b=!0)}return v&&p&&b})}else ut(c,function(h){if(o==="empty")a.setData(l=l.map(h,function(b){return s(b)?b:NaN}));else{var p={};p[h]=i,l.selectRange(p)}});ut(c,function(h){l.setApproximateExtent(i,h)})}});function s(a){return a>=i[0]&&a<=i[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},u=this._dataZoomModel,n=this._dataExtent;ut(["min","max"],function(r){var o=u.get(r+"Span"),i=u.get(r+"ValueSpan");i!=null&&(i=this.getAxisModel().axis.scale.parse(i)),i!=null?o=re(n[0]+i,n,[0,100],!0):o!=null&&(i=re(o,[0,100],n,!0)-n[0]),t[r+"Span"]=o,t[r+"ValueSpan"]=i},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),u=this._percentWindow,n=this._valueWindow;if(u){var r=Lo(n,[0,500]);r=Math.min(r,20);var o=t.axis.scale.rawExtentInfo;u[0]!==0&&o.setDeterminedMinMax("min",+n[0].toFixed(r)),u[1]!==100&&o.setDeterminedMinMax("max",+n[1].toFixed(r)),o.freeze()}},e}();function Sd(e,t,u){var n=[1/0,-1/0];ut(u,function(i){Bo(n,i.getData(),t)});var r=e.getAxisModel(),o=Oo(r.axis.scale,r,n).calculate();return[o.min,o.max]}var Ad={getTargetSeries:function(e){function t(r){e.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(i,s){var a=e.getComponent(Be(i),s);r(i,s,a,o)})})}t(function(r,o,i,s){i.__dzAxisProxy=null});var u=[];t(function(r,o,i,s){i.__dzAxisProxy||(i.__dzAxisProxy=new Cd(r,o,s,e),u.push(i.__dzAxisProxy))});var n=Te();return $(u,function(r){$(r.getTargetSeriesModels(),function(o){n.set(o.uid,o)})}),n},overallReset:function(e,t){e.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(n,r){u.getAxisProxy(n,r).reset(u)}),u.eachTargetAxis(function(n,r){u.getAxisProxy(n,r).filterData(u,t)})}),e.eachComponent("dataZoom",function(u){var n=u.findRepresentativeAxisProxy();if(n){var r=n.getDataPercentWindow(),o=n.getDataValueWindow();u.setCalculatedRange({start:r[0],end:r[1],startValue:o[0],endValue:o[1]})}})}};function Dd(e){e.registerAction("dataZoom",function(t,u){var n=wd(u,t);$(n,function(r){r.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var Zn=!1;function eo(e){Zn||(Zn=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,Ad),Dd(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function I1(e,t,u){var n=t.getBoxLayoutParams(),r=t.get("padding"),o={width:u.getWidth(),height:u.getHeight()},i=at(n,o,r);ot(t.get("orient"),e,t.get("itemGap"),i.width,i.height),No(e,n,o,r)}function Td(e,t){var u=Nu(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Ae({shape:{x:e.x-u[3],y:e.y-u[0],width:e.width+u[1]+u[3],height:e.height+u[0]+u[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Ed=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Tt);function to(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function uo(e){if(se.domSupported){for(var t=document.documentElement.style,u=0,n=e.length;u<n;u++)if(e[u]in t)return e[u]}}var no=uo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Md=uo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function ro(e,t){if(!e)return t;t=mr(t,!0);var u=e.indexOf(t);return e=u===-1?t:"-"+e.slice(0,u)+"-"+t,e.toLowerCase()}function Fd(e,t){var u=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return u?u[t]:null}var Id=ro(Md,"transition"),en=ro(no,"transform"),Pd="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(se.transform3dSupported?"will-change:transform;":"");function zd(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Rd(e,t,u){if(!ne(u)||u==="inside")return"";var n=e.get("backgroundColor"),r=e.get("borderWidth");t=qt(t);var o=zd(u),i=Math.max(Math.round(r)*1.5,6),s="",a=en+":",l;Xt(["left","right"],o)>-1?(s+="top:50%",a+="translateY(-50%) rotate("+(l=o==="left"?-225:-45)+"deg)"):(s+="left:50%",a+="translateX(-50%) rotate("+(l=o==="top"?225:45)+"deg)");var c=l*Math.PI/180,d=i+r,f=d*Math.abs(Math.cos(c))+d*Math.abs(Math.sin(c)),h=Math.round(((f-Math.SQRT2*r)/2+Math.SQRT2*r-(f-d)/2)*100)/100;s+=";"+o+":-"+h+"px";var p=t+" solid "+r+"px;",b=["position:absolute;width:"+i+"px;height:"+i+"px;z-index:-1;",s+";"+a+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+b.join("")+'"></div>'}function $d(e,t){var u="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+u,r="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+u,r+=se.transformSupported?","+en+n:",left"+n+",top"+n),Id+":"+r}function Gn(e,t,u){var n=e.toFixed(0)+"px",r=t.toFixed(0)+"px";if(!se.transformSupported)return u?"top:"+r+";left:"+n+";":[["top",r],["left",n]];var o=se.transform3dSupported,i="translate"+(o?"3d":"")+"("+n+","+r+(o?",0":"")+")";return u?"top:0;left:0;"+en+":"+i+";":[["top",0],["left",0],[no,i]]}function Ld(e){var t=[],u=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont());var r=Hu(e.get("lineHeight"),Math.round(u*3/2));u&&t.push("line-height:"+r+"px");var o=e.get("textShadowColor"),i=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,a=e.get("textShadowOffsetY")||0;return o&&i&&t.push("text-shadow:"+s+"px "+a+"px "+i+"px "+o),$(["decoration","align"],function(l){var c=e.get(l);c&&t.push("text-"+l+":"+c)}),t.join(";")}function Bd(e,t,u){var n=[],r=e.get("transitionDuration"),o=e.get("backgroundColor"),i=e.get("shadowBlur"),s=e.get("shadowColor"),a=e.get("shadowOffsetX"),l=e.get("shadowOffsetY"),c=e.getModel("textStyle"),d=br(e,"html"),f=a+"px "+l+"px "+i+"px "+s;return n.push("box-shadow:"+f),t&&r&&n.push($d(r,u)),o&&n.push("background-color:"+o),$(["width","color","radius"],function(h){var p="border-"+h,b=mr(p),v=e.get(b);v!=null&&n.push(p+":"+v+(h==="color"?"":"px"))}),n.push(Ld(c)),d!=null&&n.push("padding:"+Nu(d).join("px ")+"px"),n.join(";")+";"}function Un(e,t,u,n,r){var o=t&&t.painter;if(u){var i=o&&o.getViewportRoot();i&&Ho(e,i,u,n,r)}else{e[0]=n,e[1]=r;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Od=function(){function e(t,u){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,se.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var r=this._zr=t.getZr(),o=u.appendTo,i=o&&(ne(o)?document.querySelector(o):an(o)?o:Ue(o)&&o(t.getDom()));Un(this._styleCoord,r,i,t.getWidth()/2,t.getHeight()/2),(i||t.getDom()).appendChild(n),this._api=t,this._container=i;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(a){if(a=a||window.event,!s._enterable){var l=r.handler,c=r.painter.getViewportRoot();qo(c,a,!0),l.dispatch("mousemove",a)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){if(!this._container){var u=this._api.getDom(),n=Fd(u,"position"),r=u.style;r.position!=="absolute"&&n!=="absolute"&&(r.position="relative")}var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=t.get("className")||""},e.prototype.show=function(t,u){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,r=n.style,o=this._styleCoord;n.innerHTML?r.cssText=Pd+Bd(t,!this._firstShow,this._longHide)+Gn(o[0],o[1],!0)+("border-color:"+qt(u)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,u,n,r,o){var i=this.el;if(t==null){i.innerHTML="";return}var s="";if(ne(o)&&n.get("trigger")==="item"&&!to(n)&&(s=Rd(n,r,o)),ne(t))i.innerHTML=t+s;else if(t){i.innerHTML="",be(t)||(t=[t]);for(var a=0;a<t.length;a++)an(t[a])&&t[a].parentNode!==i&&i.appendChild(t[a]);if(s&&i.childNodes.length){var l=document.createElement("div");l.innerHTML=s,i.appendChild(l)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},e.prototype.moveTo=function(t,u){if(this.el){var n=this._styleCoord;if(Un(n,this._zr,this._container,t,u),n[0]!=null&&n[1]!=null){var r=this.el.style,o=Gn(n[0],n[1]);$(o,function(i){r[i[0]]=i[1]})}}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],u=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),u*this._zr.getHeight())},e.prototype.hide=function(){var t=this,u=this.el.style;u.visibility="hidden",u.opacity="0",se.transform3dSupported&&(u.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(W(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}(),Nd=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),Yn(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var u=t.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,u,n,r,o){var i=this;Nt(t)&&Vo(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Oe({style:{rich:u.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:br(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),$(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(l){i.el.style[l]=n.get(l)}),$(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(l){i.el.style[l]=s.get(l)||0}),this._zr.add(this.el);var a=this;this.el.on("mouseover",function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0}),this.el.on("mouseout",function(){a._enterable&&a._show&&a.hideLater(a._hideDelay),a._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,u=this.el.getBoundingRect(),n=Xn(t.style);return[u.width+n.left+n.right,u.height+n.top+n.bottom]},e.prototype.moveTo=function(t,u){var n=this.el;if(n){var r=this._styleCoord;Yn(r,this._zr,t,u),t=r[0],u=r[1];var o=n.style,i=ze(o.borderWidth||0),s=Xn(o);n.x=t+i+s.left,n.y=u+i+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],u=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),u*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(W(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function ze(e){return Math.max(0,e)}function Xn(e){var t=ze(e.shadowBlur||0),u=ze(e.shadowOffsetX||0),n=ze(e.shadowOffsetY||0);return{left:ze(t-u),right:ze(t+u),top:ze(t-n),bottom:ze(t+n)}}function Yn(e,t,u,n){e[0]=u,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var qd=new Ae({shape:{x:-1,y:-1,width:2,height:2}}),Hd=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.prototype.init=function(u,n){if(!(se.node||!n.getDom())){var r=u.getComponent("tooltip"),o=this._renderMode=jo(r.get("renderMode"));this._tooltipContent=o==="richText"?new Nd(n):new Od(n,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},t.prototype.render=function(u,n,r){if(!(se.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=u,this._ecModel=n,this._api=r;var o=this._tooltipContent;o.update(u),o.setEnterable(u.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&u.get("transitionDuration")?Ut(this,"_updatePosition",50,"fixRate"):Ot(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var u=this._tooltipModel,n=u.get("triggerOn");Xr("itemTooltip",this._api,W(function(r,o,i){n!=="none"&&(n.indexOf(r)>=0?this._tryShow(o,i):r==="leave"&&this._hide(i))},this))},t.prototype._keepShow=function(){var u=this._tooltipModel,n=this._ecModel,r=this._api,o=u.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&i.manuallyShowTip(u,n,r,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(u,n,r,o){if(!(o.from===this.uid||se.node||!r.getDom())){var i=Qn(o,r);this._ticket="";var s=o.dataByCoordSys,a=Zd(o,n,r);if(a){var l=a.el.getBoundingRect().clone();l.applyTransform(a.el.transform),this._tryShow({offsetX:l.x+l.width/2,offsetY:l.y+l.height/2,target:a.el,position:o.position,positionDefault:"bottom"},i)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=qd;c.x=o.x,c.y=o.y,c.update(),he(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},i)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},i);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(u,n,r,o))return;var d=Yr(o,n),f=d.point[0],h=d.point[1];f!=null&&h!=null&&this._tryShow({offsetX:f,offsetY:h,target:d.el,position:o.position,positionDefault:"bottom"},i)}else o.x!=null&&o.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:r.getZr().findHover(o.x,o.y).target},i))}},t.prototype.manuallyHideTip=function(u,n,r,o){var i=this._tooltipContent;this._tooltipModel&&i.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(Qn(o,r))},t.prototype._manuallyAxisShowTip=function(u,n,r,o){var i=o.seriesIndex,s=o.dataIndex,a=n.getComponent("axisPointer").coordSysAxesInfo;if(!(i==null||s==null||a==null)){var l=n.getSeriesByIndex(i);if(l){var c=l.getData(),d=ht([c.getItemModel(s),l,(l.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:i,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(u,n){var r=u.target,o=this._tooltipModel;if(o){this._lastX=u.offsetX,this._lastY=u.offsetY;var i=u.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,u);else if(r){var s=he(r);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var a,l;Wo(r,function(c){if(he(c).dataIndex!=null)return a=c,!0;if(he(c).tooltipConfig!=null)return l=c,!0},!0),a?this._showSeriesItemTooltip(u,a,n):l?this._showComponentItemTooltip(u,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(u,n){var r=u.get("showDelay");n=W(n,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(n,r):n()},t.prototype._showAxisTooltip=function(u,n){var r=this._ecModel,o=this._tooltipModel,i=[n.offsetX,n.offsetY],s=ht([n.tooltipOption],o),a=this._renderMode,l=[],c=ln("section",{blocks:[],noHeader:!0}),d=[],f=new uu;$(u,function(m){$(m.dataByAxis,function(y){var _=r.getComponent(y.axisDim+"Axis",y.axisIndex),k=y.value;if(!(!_||k==null)){var w=Gr(k,_.axis,r,y.seriesDataIndices,y.valueLabelOpt),C=ln("section",{header:w,noHeader:!Zo(w),sortBlocks:!0,blocks:[]});c.blocks.push(C),$(y.seriesDataIndices,function(A){var T=r.getSeriesByIndex(A.seriesIndex),F=A.dataIndexInside,I=T.getDataParams(F);if(!(I.dataIndex<0)){I.axisDim=y.axisDim,I.axisIndex=y.axisIndex,I.axisType=y.axisType,I.axisId=y.axisId,I.axisValue=gr(_.axis,{value:k}),I.axisValueLabel=w,I.marker=f.makeTooltipMarker("item",qt(I.color),a);var H=cn(T.formatTooltip(F,!0,null)),P=H.frag;if(P){var M=ht([T],o).get("valueFormatter");C.blocks.push(M?wt({valueFormatter:M},P):P)}H.text&&d.push(H.text),l.push(I)}})}})}),c.blocks.reverse(),d.reverse();var h=n.position,p=s.get("order"),b=dn(c,f,a,p,r.get("useUTC"),s.get("textStyle"));b&&d.unshift(b);var v=a==="richText"?`

`:"<br/>",g=d.join(v);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(u,l)?this._updatePosition(s,h,i[0],i[1],this._tooltipContent,l):this._showTooltipContent(s,g,l,Math.random()+"",i[0],i[1],h,null,f)})},t.prototype._showSeriesItemTooltip=function(u,n,r){var o=this._ecModel,i=he(n),s=i.seriesIndex,a=o.getSeriesByIndex(s),l=i.dataModel||a,c=i.dataIndex,d=i.dataType,f=l.getData(d),h=this._renderMode,p=u.positionDefault,b=ht([f.getItemModel(c),l,a&&(a.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),v=b.get("trigger");if(!(v!=null&&v!=="item")){var g=l.getDataParams(c,d),m=new uu;g.marker=m.makeTooltipMarker("item",qt(g.color),h);var y=cn(l.formatTooltip(c,!1,d)),_=b.get("order"),k=b.get("valueFormatter"),w=y.frag,C=w?dn(k?wt({valueFormatter:k},w):w,m,h,_,o.get("useUTC"),b.get("textStyle")):y.text,A="item_"+l.name+"_"+c;this._showOrMove(b,function(){this._showTooltipContent(b,C,g,A,u.offsetX,u.offsetY,u.position,u.target,m)}),r({type:"showTip",dataIndexInside:c,dataIndex:f.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(u,n,r){var o=this._renderMode==="html",i=he(n),s=i.tooltipConfig,a=s.option||{},l=a.encodeHTMLContent;if(ne(a)){var c=a;a={content:c,formatter:c},l=!0}l&&o&&a.content&&(a=st(a),a.content=Go(a.content));var d=[a],f=this._ecModel.getComponent(i.componentMainType,i.componentIndex);f&&d.push(f),d.push({formatter:a.content});var h=u.positionDefault,p=ht(d,this._tooltipModel,h?{position:h}:null),b=p.get("content"),v=Math.random()+"",g=new uu;this._showOrMove(p,function(){var m=st(p.get("formatterParams")||{});this._showTooltipContent(p,b,m,v,u.offsetX,u.offsetY,u.position,n,g)}),r({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(u,n,r,o,i,s,a,l,c){if(this._ticket="",!(!u.get("showContent")||!u.get("show"))){var d=this._tooltipContent;d.setEnterable(u.get("enterable"));var f=u.get("formatter");a=a||u.get("position");var h=n,p=this._getNearestPoint([i,s],r,u.get("trigger"),u.get("borderColor")),b=p.color;if(f)if(ne(f)){var v=u.ecModel.get("useUTC"),g=be(r)?r[0]:r,m=g&&g.axisType&&g.axisType.indexOf("time")>=0;h=f,m&&(h=Uo(g.axisValue,h,v)),h=Xo(h,r,!0)}else if(Ue(f)){var y=W(function(_,k){_===this._ticket&&(d.setContent(k,c,u,b,a),this._updatePosition(u,a,i,s,d,r,l))},this);this._ticket=o,h=f(r,o,y)}else h=f;d.setContent(h,c,u,b,a),d.show(u,b),this._updatePosition(u,a,i,s,d,r,l)}},t.prototype._getNearestPoint=function(u,n,r,o){if(r==="axis"||be(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!be(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(u,n,r,o,i,s,a){var l=this._api.getWidth(),c=this._api.getHeight();n=n||u.get("position");var d=i.getSize(),f=u.get("align"),h=u.get("verticalAlign"),p=a&&a.getBoundingRect().clone();if(a&&p.applyTransform(a.transform),Ue(n)&&(n=n([r,o],s,i.el,p,{viewSize:[l,c],contentSize:d.slice()})),be(n))r=Ht(n[0],l),o=Ht(n[1],c);else if(Nt(n)){var b=n;b.width=d[0],b.height=d[1];var v=at(b,{width:l,height:c});r=v.x,o=v.y,f=null,h=null}else if(ne(n)&&a){var g=Wd(n,p,d,u.get("borderWidth"));r=g[0],o=g[1]}else{var g=Vd(r,o,i,l,c,f?null:20,h?null:20);r=g[0],o=g[1]}if(f&&(r-=Jn(f)?d[0]/2:f==="right"?d[0]:0),h&&(o-=Jn(h)?d[1]/2:h==="bottom"?d[1]:0),to(u)){var g=jd(r,o,i,l,c);r=g[0],o=g[1]}i.moveTo(r,o)},t.prototype._updateContentNotChangedOnAxis=function(u,n){var r=this._lastDataByCoordSys,o=this._cbParamsList,i=!!r&&r.length===u.length;return i&&$(r,function(s,a){var l=s.dataByAxis||[],c=u[a]||{},d=c.dataByAxis||[];i=i&&l.length===d.length,i&&$(l,function(f,h){var p=d[h]||{},b=f.seriesDataIndices||[],v=p.seriesDataIndices||[];i=i&&f.value===p.value&&f.axisType===p.axisType&&f.axisId===p.axisId&&b.length===v.length,i&&$(b,function(g,m){var y=v[m];i=i&&g.seriesIndex===y.seriesIndex&&g.dataIndex===y.dataIndex}),o&&$(f.seriesDataIndices,function(g){var m=g.seriesIndex,y=n[m],_=o[m];y&&_&&_.data!==y.data&&(i=!1)})})}),this._lastDataByCoordSys=u,this._cbParamsList=n,!!i},t.prototype._hide=function(u){this._lastDataByCoordSys=null,u({type:"hideTip",from:this.uid})},t.prototype.dispose=function(u,n){se.node||!n.getDom()||(Ot(this,"_updatePosition"),this._tooltipContent.dispose(),zu("itemTooltip",n))},t.type="tooltip",t}(Et);function ht(e,t,u){var n=t.ecModel,r;u?(r=new xt(u,n,n),r=new xt(t.option,r,n)):r=t;for(var o=e.length-1;o>=0;o--){var i=e[o];i&&(i instanceof xt&&(i=i.get("tooltip",!0)),ne(i)&&(i={formatter:i}),i&&(r=new xt(i,r,n)))}return r}function Qn(e,t){return e.dispatchAction||W(t.dispatchAction,t)}function Vd(e,t,u,n,r,o,i){var s=u.getSize(),a=s[0],l=s[1];return o!=null&&(e+a+o+2>n?e-=a+o:e+=o),i!=null&&(t+l+i>r?t-=l+i:t+=i),[e,t]}function jd(e,t,u,n,r){var o=u.getSize(),i=o[0],s=o[1];return e=Math.min(e+i,n)-i,t=Math.min(t+s,r)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function Wd(e,t,u,n){var r=u[0],o=u[1],i=Math.ceil(Math.SQRT2*n)+8,s=0,a=0,l=t.width,c=t.height;switch(e){case"inside":s=t.x+l/2-r/2,a=t.y+c/2-o/2;break;case"top":s=t.x+l/2-r/2,a=t.y-o-i;break;case"bottom":s=t.x+l/2-r/2,a=t.y+c+i;break;case"left":s=t.x-r-i,a=t.y+c/2-o/2;break;case"right":s=t.x+l+i,a=t.y+c/2-o/2}return[s,a]}function Jn(e){return e==="center"||e==="middle"}function Zd(e,t,u){var n=Yo(e).queryOptionMap,r=n.keys()[0];if(!(!r||r==="series")){var o=Qo(t,r,n.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),i=o.models[0];if(i){var s=u.getViewOfComponentModel(i),a;if(s.group.traverse(function(l){var c=he(l).tooltipConfig;if(c&&c.name===e.name)return a=l,!0}),a)return{componentMainType:r,componentIndex:i.componentIndex,el:a}}}}function Gd(e){De(Qr),e.registerComponentModel(Ed),e.registerComponentView(Hd),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Cu),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Cu)}var Ud=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u.layoutMode={type:"box",ignoreSize:!0},u}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Tt),Xd=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.prototype.render=function(u,n,r){if(this.group.removeAll(),!!u.get("show")){var o=this.group,i=u.getModel("textStyle"),s=u.getModel("subtextStyle"),a=u.get("textAlign"),l=Hu(u.get("textBaseline"),u.get("textVerticalAlign")),c=new Oe({style:kt(i,{text:u.get("text"),fill:i.getTextColor()},{disableBox:!0}),z2:10}),d=c.getBoundingRect(),f=u.get("subtext"),h=new Oe({style:kt(s,{text:f,fill:s.getTextColor(),y:d.height+u.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=u.get("link"),b=u.get("sublink"),v=u.get("triggerEvent",!0);c.silent=!p&&!v,h.silent=!b&&!v,p&&c.on("click",function(){fn(p,"_"+u.get("target"))}),b&&h.on("click",function(){fn(b,"_"+u.get("subtarget"))}),he(c).eventData=he(h).eventData=v?{componentType:"title",componentIndex:u.componentIndex}:null,o.add(c),f&&o.add(h);var g=o.getBoundingRect(),m=u.getBoxLayoutParams();m.width=g.width,m.height=g.height;var y=at(m,{width:r.getWidth(),height:r.getHeight()},u.get("padding"));a||(a=u.get("left")||u.get("right"),a==="middle"&&(a="center"),a==="right"?y.x+=y.width:a==="center"&&(y.x+=y.width/2)),l||(l=u.get("top")||u.get("bottom"),l==="center"&&(l="middle"),l==="bottom"?y.y+=y.height:l==="middle"&&(y.y+=y.height/2),l=l||"top"),o.x=y.x,o.y=y.y,o.markRedraw();var _={align:a,verticalAlign:l};c.setStyle(_),h.setStyle(_),g=o.getBoundingRect();var k=y.margin,w=u.getItemStyle(["color","opacity"]);w.fill=u.get("backgroundColor");var C=new Ae({shape:{x:g.x-k[3],y:g.y-k[0],width:g.width+k[1]+k[3],height:g.height+k[0]+k[2],r:u.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});o.add(C)}},t.type="title",t}(Et);function Yd(e){e.registerComponentModel(Ud),e.registerComponentView(Xd)}var Qd=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Ru=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u.layoutMode={type:"box",ignoreSize:!0},u}return t.prototype.init=function(u,n,r){this.mergeDefaultAndTheme(u,r),u.selected=u.selected||{},this._updateSelector(u)},t.prototype.mergeOption=function(u,n){e.prototype.mergeOption.call(this,u,n),this._updateSelector(u)},t.prototype._updateSelector=function(u){var n=u.selector,r=this.ecModel;n===!0&&(n=u.selector=["all","inverse"]),be(n)&&$(n,function(o,i){ne(o)&&(o={type:o}),n[i]=Au(o,Qd(r,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var u=this._data;if(u[0]&&this.get("selectedMode")==="single"){for(var n=!1,r=0;r<u.length;r++){var o=u[r].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(u[0].get("name"))}},t.prototype._updateData=function(u){var n=[],r=[];u.eachRawSeries(function(a){var l=a.name;r.push(l);var c;if(a.legendVisualProvider){var d=a.legendVisualProvider,f=d.getAllNames();u.isSeriesFiltered(a)||(r=r.concat(f)),f.length?n=n.concat(f):c=!0}else c=!0;c&&Jo(a)&&n.push(a.name)}),this._availableNames=r;var o=this.get("data")||n,i=Te(),s=qu(o,function(a){return(ne(a)||Ko(a))&&(a={name:a}),i.get(a.name)?null:(i.set(a.name,!0),new xt(a,this,this.ecModel))},this);this._data=ei(s,function(a){return!!a})},t.prototype.getData=function(){return this._data},t.prototype.select=function(u){var n=this.option.selected,r=this.get("selectedMode");if(r==="single"){var o=this._data;$(o,function(i){n[i.get("name")]=!1})}n[u]=!0},t.prototype.unSelect=function(u){this.get("selectedMode")!=="single"&&(this.option.selected[u]=!1)},t.prototype.toggleSelected=function(u){var n=this.option.selected;n.hasOwnProperty(u)||(n[u]=!0),this[n[u]?"unSelect":"select"](u)},t.prototype.allSelect=function(){var u=this._data,n=this.option.selected;$(u,function(r){n[r.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var u=this._data,n=this.option.selected;$(u,function(r){var o=r.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(u){var n=this.option.selected;return!(n.hasOwnProperty(u)&&!n[u])&&Xt(this._availableNames,u)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Tt),et=ie,$u=$,$t=_t,oo=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u.newlineDisabled=!1,u}return t.prototype.init=function(){this.group.add(this._contentGroup=new $t),this.group.add(this._selectorGroup=new $t),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(u,n,r){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!u.get("show",!0)){var i=u.get("align"),s=u.get("orient");(!i||i==="auto")&&(i=u.get("left")==="right"&&s==="vertical"?"right":"left");var a=u.get("selector",!0),l=u.get("selectorPosition",!0);a&&(!l||l==="auto")&&(l=s==="horizontal"?"end":"start"),this.renderInner(i,u,n,r,a,s,l);var c=u.getBoxLayoutParams(),d={width:r.getWidth(),height:r.getHeight()},f=u.get("padding"),h=at(c,d,f),p=this.layoutInner(u,i,h,o,a,l),b=at(fr({width:p.width,height:p.height},c),d,f);this.group.x=b.x-p.x,this.group.y=b.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Td(p,u))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(u,n,r,o,i,s,a){var l=this.getContentGroup(),c=Te(),d=n.get("selectedMode"),f=[];r.eachRawSeries(function(h){!h.get("legendHoverLink")&&f.push(h.id)}),$u(n.getData(),function(h,p){var b=h.get("name");if(!this.newlineDisabled&&(b===""||b===`
`)){var v=new $t;v.newline=!0,l.add(v);return}var g=r.getSeriesByName(b)[0];if(!c.get(b))if(g){var m=g.getData(),y=m.getVisual("legendLineStyle")||{},_=m.getVisual("legendIcon"),k=m.getVisual("style"),w=this._createItem(g,b,p,h,n,u,y,k,_,d,o);w.on("click",et(Kn,b,null,o,f)).on("mouseover",et(Lu,g.name,null,o,f)).on("mouseout",et(Bu,g.name,null,o,f)),r.ssr&&w.eachChild(function(C){var A=he(C);A.seriesIndex=g.seriesIndex,A.dataIndex=p,A.ssrType="legend"}),c.set(b,!0)}else r.eachRawSeries(function(C){if(!c.get(b)&&C.legendVisualProvider){var A=C.legendVisualProvider;if(!A.containName(b))return;var T=A.indexOfName(b),F=A.getItemVisual(T,"style"),I=A.getItemVisual(T,"legendIcon"),H=ti(F.fill);H&&H[3]===0&&(H[3]=.2,F=wt(wt({},F),{fill:ui(H,"rgba")}));var P=this._createItem(C,b,p,h,n,u,{},F,I,d,o);P.on("click",et(Kn,null,b,o,f)).on("mouseover",et(Lu,null,b,o,f)).on("mouseout",et(Bu,null,b,o,f)),r.ssr&&P.eachChild(function(M){var E=he(M);E.seriesIndex=C.seriesIndex,E.dataIndex=p,E.ssrType="legend"}),c.set(b,!0)}},this)},this),i&&this._createSelector(i,n,o,s,a)},t.prototype._createSelector=function(u,n,r,o,i){var s=this.getSelectorGroup();$u(u,function(l){var c=l.type,d=new Oe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:n.id})}});s.add(d);var f=n.getModel("selectorLabel"),h=n.getModel(["emphasis","selectorLabel"]);ni(d,{normal:f,emphasis:h},{defaultText:l.title}),Tu(d)})},t.prototype._createItem=function(u,n,r,o,i,s,a,l,c,d,f){var h=u.visualDrawType,p=i.get("itemWidth"),b=i.get("itemHeight"),v=i.isSelected(n),g=o.get("symbolRotate"),m=o.get("symbolKeepAspect"),y=o.get("icon");c=y||c||"roundRect";var _=Jd(c,o,a,l,h,v,f),k=new $t,w=o.getModel("textStyle");if(Ue(u.getLegendIcon)&&(!y||y==="inherit"))k.add(u.getLegendIcon({itemWidth:p,itemHeight:b,icon:c,iconRotate:g,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:m}));else{var C=y==="inherit"&&u.getData().getVisual("symbol")?g==="inherit"?u.getData().getVisual("symbolRotate"):g:0;k.add(Kd({itemWidth:p,itemHeight:b,icon:c,iconRotate:C,itemStyle:_.itemStyle,symbolKeepAspect:m}))}var A=s==="left"?p+5:-5,T=s,F=i.get("formatter"),I=n;ne(F)&&F?I=F.replace("{name}",n??""):Ue(F)&&(I=F(n));var H=v?w.getTextColor():o.get("inactiveColor");k.add(new Oe({style:kt(w,{text:I,x:A,y:b/2,fill:H,align:T,verticalAlign:"middle"},{inheritColor:H})}));var P=new Ae({shape:k.getBoundingRect(),style:{fill:"transparent"}}),M=o.getModel("tooltip");return M.get("show")&&ri({el:P,componentModel:i,itemName:n,itemTooltipOption:M.option}),k.add(P),k.eachChild(function(E){E.silent=!0}),P.silent=!d,this.getContentGroup().add(k),Tu(k),k.__legendDataIndex=r,k},t.prototype.layoutInner=function(u,n,r,o,i,s){var a=this.getContentGroup(),l=this.getSelectorGroup();ot(u.get("orient"),a,u.get("itemGap"),r.width,r.height);var c=a.getBoundingRect(),d=[-c.x,-c.y];if(l.markRedraw(),a.markRedraw(),i){ot("horizontal",l,u.get("selectorItemGap",!0));var f=l.getBoundingRect(),h=[-f.x,-f.y],p=u.get("selectorButtonGap",!0),b=u.getOrient().index,v=b===0?"width":"height",g=b===0?"height":"width",m=b===0?"y":"x";s==="end"?h[b]+=c[v]+p:d[b]+=f[v]+p,h[1-b]+=c[g]/2-f[g]/2,l.x=h[0],l.y=h[1],a.x=d[0],a.y=d[1];var y={x:0,y:0};return y[v]=c[v]+p+f[v],y[g]=Math.max(c[g],f[g]),y[m]=Math.min(0,f[m]+h[1-b]),y}else return a.x=d[0],a.y=d[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Et);function Jd(e,t,u,n,r,o,i){function s(v,g){v.lineWidth==="auto"&&(v.lineWidth=g.lineWidth>0?2:0),$u(v,function(m,y){v[y]==="inherit"&&(v[y]=g[y])})}var a=t.getModel("itemStyle"),l=a.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",d=a.getShallow("decal");l.decal=!d||d==="inherit"?n.decal:oi(d,i),l.fill==="inherit"&&(l.fill=n[r]),l.stroke==="inherit"&&(l.stroke=n[c]),l.opacity==="inherit"&&(l.opacity=(r==="fill"?n:u).opacity),s(l,n);var f=t.getModel("lineStyle"),h=f.getLineStyle();if(s(h,u),l.fill==="auto"&&(l.fill=n.fill),l.stroke==="auto"&&(l.stroke=n.fill),h.stroke==="auto"&&(h.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),b=l[c];l.lineWidth=p==="auto"?n.lineWidth>0&&b?2:0:l.lineWidth,l.fill=t.get("inactiveColor"),l.stroke=t.get("inactiveBorderColor"),h.stroke=f.get("inactiveColor"),h.lineWidth=f.get("inactiveWidth")}return{itemStyle:l,lineStyle:h}}function Kd(e){var t=e.icon||"roundRect",u=Eu(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return u.setStyle(e.itemStyle),u.rotation=(e.iconRotate||0)*Math.PI/180,u.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),u}function Kn(e,t,u,n){Bu(e,t,u,n),u.dispatchAction({type:"legendToggleSelect",name:e??t}),Lu(e,t,u,n)}function io(e){for(var t=e.getZr().storage.getDisplayList(),u,n=0,r=t.length;n<r&&!(u=t[n].states.emphasis);)n++;return u&&u.hoverLayer}function Lu(e,t,u,n){io(u)||u.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function Bu(e,t,u,n){io(u)||u.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}function ef(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(u){for(var n=0;n<t.length;n++)if(!t[n].isSelected(u.name))return!1;return!0})}function pt(e,t,u){var n=e==="allSelect"||e==="inverseSelect",r={},o=[];u.eachComponent({mainType:"legend",query:t},function(s){n?s[e]():s[e](t.name),er(s,r),o.push(s.componentIndex)});var i={};return u.eachComponent("legend",function(s){$(r,function(a,l){s[a?"select":"unSelect"](l)}),er(s,i)}),n?{selected:i,legendIndex:o}:{name:t.name,selected:i}}function er(e,t){var u=t||{};return $(e.getData(),function(n){var r=n.get("name");if(!(r===`
`||r==="")){var o=e.isSelected(r);ii(u,r)?u[r]=u[r]&&o:u[r]=o}}),u}function tf(e){e.registerAction("legendToggleSelect","legendselectchanged",ie(pt,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",ie(pt,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",ie(pt,"inverseSelect")),e.registerAction("legendSelect","legendselected",ie(pt,"select")),e.registerAction("legendUnSelect","legendunselected",ie(pt,"unSelect"))}function so(e){e.registerComponentModel(Ru),e.registerComponentView(oo),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,ef),e.registerSubTypeDefaulter("legend",function(){return"plain"}),tf(e)}var uf=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.prototype.setScrollDataIndex=function(u){this.option.scrollDataIndex=u},t.prototype.init=function(u,n,r){var o=vr(u);e.prototype.init.call(this,u,n,r),tr(this,u,o)},t.prototype.mergeOption=function(u,n){e.prototype.mergeOption.call(this,u,n),tr(this,this.option,u)},t.type="legend.scroll",t.defaultOption=Vu(Ru.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(Ru);function tr(e,t,u){var n=e.getOrient(),r=[1,1];r[n.index]=0,si(t,u,{type:"box",ignoreSize:!!r})}var ur=_t,bu=["width","height"],vu=["x","y"],nf=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u.newlineDisabled=!0,u._currentIndex=0,u}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new ur),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new ur)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(u,n,r,o,i,s,a){var l=this;e.prototype.renderInner.call(this,u,n,r,o,i,s,a);var c=this._controllerGroup,d=n.get("pageIconSize",!0),f=be(d)?d:[d,d];p("pagePrev",0);var h=n.getModel("pageTextStyle");c.add(new Oe({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(b,v){var g=b+"DataIndex",m=hr(n.get("pageIcons",!0)[n.getOrient().name][v],{onclick:W(l._pageGo,l,g,n,o)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});m.name=b,c.add(m)}},t.prototype.layoutInner=function(u,n,r,o,i,s){var a=this.getSelectorGroup(),l=u.getOrient().index,c=bu[l],d=vu[l],f=bu[1-l],h=vu[1-l];i&&ot("horizontal",a,u.get("selectorItemGap",!0));var p=u.get("selectorButtonGap",!0),b=a.getBoundingRect(),v=[-b.x,-b.y],g=st(r);i&&(g[c]=r[c]-b[c]-p);var m=this._layoutContentAndController(u,o,g,l,c,f,h,d);if(i){if(s==="end")v[l]+=m[c]+p;else{var y=b[c]+p;v[l]-=y,m[d]-=y}m[c]+=b[c]+p,v[1-l]+=m[h]+m[f]/2-b[f]/2,m[f]=Math.max(m[f],b[f]),m[h]=Math.min(m[h],b[h]+v[1-l]),a.x=v[0],a.y=v[1],a.markRedraw()}return m},t.prototype._layoutContentAndController=function(u,n,r,o,i,s,a,l){var c=this.getContentGroup(),d=this._containerGroup,f=this._controllerGroup;ot(u.get("orient"),c,u.get("itemGap"),o?r.width:null,o?null:r.height),ot("horizontal",f,u.get("pageButtonItemGap",!0));var h=c.getBoundingRect(),p=f.getBoundingRect(),b=this._showController=h[i]>r[i],v=[-h.x,-h.y];n||(v[o]=c[l]);var g=[0,0],m=[-p.x,-p.y],y=Hu(u.get("pageButtonGap",!0),u.get("itemGap",!0));if(b){var _=u.get("pageButtonPosition",!0);_==="end"?m[o]+=r[i]-p[i]:g[o]+=p[i]+y}m[1-o]+=h[s]/2-p[s]/2,c.setPosition(v),d.setPosition(g),f.setPosition(m);var k={x:0,y:0};if(k[i]=b?r[i]:h[i],k[s]=Math.max(h[s],p[s]),k[a]=Math.min(0,p[a]+m[1-o]),d.__rectSize=r[i],b){var w={x:0,y:0};w[i]=Math.max(r[i]-p[i]-y,0),w[s]=k[s],d.setClipPath(new Ae({shape:w})),d.__rectSize=w[i]}else f.eachChild(function(A){A.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(u);return C.pageIndex!=null&&pr(c,{x:C.contentPosition[0],y:C.contentPosition[1]},b?u:null),this._updatePageInfoView(u,C),k},t.prototype._pageGo=function(u,n,r){var o=this._getPageInfo(n)[u];o!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(u,n){var r=this._controllerGroup;$(["pagePrev","pageNext"],function(c){var d=c+"DataIndex",f=n[d]!=null,h=r.childOfName(c);h&&(h.setStyle("fill",f?u.get("pageIconColor",!0):u.get("pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var o=r.childOfName("pageText"),i=u.get("pageFormatter"),s=n.pageIndex,a=s!=null?s+1:0,l=n.pageCount;o&&i&&o.setStyle("text",ne(i)?i.replace("{current}",a==null?"":a+"").replace("{total}",l==null?"":l+""):i({current:a,total:l}))},t.prototype._getPageInfo=function(u){var n=u.get("scrollDataIndex",!0),r=this.getContentGroup(),o=this._containerGroup.__rectSize,i=u.getOrient().index,s=bu[i],a=vu[i],l=this._findTargetItemIndex(n),c=r.children(),d=c[l],f=c.length,h=f?1:0,p={contentPosition:[r.x,r.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var b=_(d);p.contentPosition[i]=-b.s;for(var v=l+1,g=b,m=b,y=null;v<=f;++v)y=_(c[v]),(!y&&m.e>g.s+o||y&&!k(y,g.s))&&(m.i>g.i?g=m:g=y,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),m=y;for(var v=l-1,g=b,m=b,y=null;v>=-1;--v)y=_(c[v]),(!y||!k(m,y.s))&&g.i<m.i&&(m=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=y;return p;function _(w){if(w){var C=w.getBoundingRect(),A=C[a]+w[a];return{s:A,e:A+C[s],i:w.__legendDataIndex}}}function k(w,C){return w.e>=C&&w.s<=C+o}},t.prototype._findTargetItemIndex=function(u){if(!this._showController)return 0;var n,r=this.getContentGroup(),o;return r.eachChild(function(i,s){var a=i.__legendDataIndex;o==null&&a!=null&&(o=s),a===u&&(n=s)}),n??o},t.type="legend.scroll",t}(oo);function rf(e){e.registerAction("legendScroll","legendscroll",function(t,u){var n=t.scrollDataIndex;n!=null&&u.eachComponent({mainType:"legend",subType:"scroll",query:t},function(r){r.setScrollDataIndex(n)})})}function of(e){De(so),e.registerComponentModel(uf),e.registerComponentView(nf),rf(e)}function sf(e){De(so),De(of)}var af=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.type="dataZoom.inside",t.defaultOption=Vu(Zt.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(Zt),tn=Gt();function lf(e,t,u){tn(e).coordSysRecordMap.each(function(n){var r=n.dataZoomInfoMap.get(t.uid);r&&(r.getRange=u)})}function cf(e,t){for(var u=tn(e).coordSysRecordMap,n=u.keys(),r=0;r<n.length;r++){var o=n[r],i=u.get(o),s=i.dataZoomInfoMap;if(s){var a=t.uid,l=s.get(a);l&&(s.removeKey(a),s.keys().length||ao(u,i))}}}function ao(e,t){if(t){e.removeKey(t.model.uid);var u=t.controller;u&&u.dispose()}}function df(e,t){var u={model:t,containsPoint:ie(hf,t),dispatchAction:ie(ff,e),dataZoomInfoMap:null,controller:null},n=u.controller=new Ei(e.getZr());return $(["pan","zoom","scrollMove"],function(r){n.on(r,function(o){var i=[];u.dataZoomInfoMap.each(function(s){if(o.isAvailableBehavior(s.model.option)){var a=(s.getRange||{})[r],l=a&&a(s.dzReferCoordSysInfo,u.model.mainType,u.controller,o);!s.model.get("disabled",!0)&&l&&i.push({dataZoomId:s.model.id,start:l[0],end:l[1]})}}),i.length&&u.dispatchAction(i)})}),u}function ff(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function hf(e,t,u,n){return e.coordinateSystem.containPoint([u,n])}function pf(e){var t,u="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return e.each(function(o){var i=o.model,s=i.get("disabled",!0)?!1:i.get("zoomLock",!0)?"move":!0;n[u+s]>n[u+t]&&(t=s),r=r&&i.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}function gf(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,u){var n=tn(u),r=n.coordSysRecordMap||(n.coordSysRecordMap=Te());r.each(function(o){o.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(o){var i=Jr(o);$(i.infoList,function(s){var a=s.model.uid,l=r.get(a)||r.set(a,df(u,s.model)),c=l.dataZoomInfoMap||(l.dataZoomInfoMap=Te());c.set(o.uid,{dzReferCoordSysInfo:s,model:o,getRange:null})})}),r.each(function(o){var i=o.controller,s,a=o.dataZoomInfoMap;if(a){var l=a.keys()[0];l!=null&&(s=a.get(l))}if(!s){ao(r,o);return}var c=pf(a);i.enable(c.controlType,c.opt),i.setPointerChecker(o.containsPoint),Ut(o,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var mf=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type="dataZoom.inside",u}return t.prototype.render=function(u,n,r){if(e.prototype.render.apply(this,arguments),u.noTarget()){this._clear();return}this.range=u.getPercentRange(),lf(r,u,{pan:W(xu.pan,this),zoom:W(xu.zoom,this),scrollMove:W(xu.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){cf(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(Kr),xu={zoom:function(e,t,u,n){var r=this.range,o=r.slice(),i=e.axisModels[0];if(i){var s=yu[t](null,[n.originX,n.originY],i,u,e),a=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],l=Math.max(1/n.scale,0);o[0]=(o[0]-a)*l+a,o[1]=(o[1]-a)*l+a;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Yt(0,o,[0,100],0,c.minSpan,c.maxSpan),this.range=o,r[0]!==o[0]||r[1]!==o[1])return o}},pan:nr(function(e,t,u,n,r,o){var i=yu[n]([o.oldX,o.oldY],[o.newX,o.newY],t,r,u);return i.signal*(e[1]-e[0])*i.pixel/i.pixelLength}),scrollMove:nr(function(e,t,u,n,r,o){var i=yu[n]([0,0],[o.scrollDelta,o.scrollDelta],t,r,u);return i.signal*(e[1]-e[0])*o.scrollDelta})};function nr(e){return function(t,u,n,r){var o=this.range,i=o.slice(),s=t.axisModels[0];if(s){var a=e(i,s,t,u,n,r);if(Yt(a,i,[0,100],"all"),this.range=i,o[0]!==i[0]||o[1]!==i[1])return i}}}var yu={grid:function(e,t,u,n,r){var o=u.axis,i={},s=r.model.coordinateSystem.getRect();return e=e||[0,0],o.dim==="x"?(i.pixel=t[0]-e[0],i.pixelLength=s.width,i.pixelStart=s.x,i.signal=o.inverse?1:-1):(i.pixel=t[1]-e[1],i.pixelLength=s.height,i.pixelStart=s.y,i.signal=o.inverse?-1:1),i},polar:function(e,t,u,n,r){var o=u.axis,i={},s=r.model.coordinateSystem,a=s.getRadiusAxis().getExtent(),l=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),u.mainType==="radiusAxis"?(i.pixel=t[0]-e[0],i.pixelLength=a[1]-a[0],i.pixelStart=a[0],i.signal=o.inverse?1:-1):(i.pixel=t[1]-e[1],i.pixelLength=l[1]-l[0],i.pixelStart=l[0],i.signal=o.inverse?-1:1),i},singleAxis:function(e,t,u,n,r){var o=u.axis,i=r.model.coordinateSystem.getRect(),s={};return e=e||[0,0],o.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=i.width,s.pixelStart=i.x,s.signal=o.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=i.height,s.pixelStart=i.y,s.signal=o.inverse?-1:1),s}};function bf(e){eo(e),e.registerComponentModel(af),e.registerComponentView(mf),gf(e)}var vf=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Vu(Zt.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(Zt),gt=Ae,rr=7,xf=1,_u=30,yf=7,mt="horizontal",or="vertical",_f=5,kf=["line","bar","candlestick","scatter"],wf={easing:"cubicOut",duration:100,delay:0},Cf=function(e){ue(t,e);function t(){var u=e!==null&&e.apply(this,arguments)||this;return u.type=t.type,u._displayables={},u}return t.prototype.init=function(u,n){this.api=n,this._onBrush=W(this._onBrush,this),this._onBrushEnd=W(this._onBrushEnd,this)},t.prototype.render=function(u,n,r,o){if(e.prototype.render.apply(this,arguments),Ut(this,"_dispatchZoomAction",u.get("throttle"),"fixRate"),this._orient=u.getOrient(),u.get("show")===!1){this.group.removeAll();return}if(u.noTarget()){this._clear(),this.group.removeAll();return}(!o||o.type!=="dataZoom"||o.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Ot(this,"_dispatchZoomAction");var u=this.api.getZr();u.off("mousemove",this._onBrush),u.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var u=this.group;u.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new _t;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),u.add(n),this._positionGroup()},t.prototype._resetLocation=function(){var u=this.dataZoomModel,n=this.api,r=u.get("brushSelect"),o=r?yf:0,i=this._findCoordRect(),s={width:n.getWidth(),height:n.getHeight()},a=this._orient===mt?{right:s.width-i.x-i.width,top:s.height-_u-rr-o,width:i.width,height:_u}:{right:rr,top:i.y,width:_u,height:i.height},l=vr(u.option);$(["right","top","width","height"],function(d){l[d]==="ph"&&(l[d]=a[d])});var c=at(l,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===or&&this._size.reverse()},t.prototype._positionGroup=function(){var u=this.group,n=this._location,r=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),i=o&&o.get("inverse"),s=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(r===mt&&!i?{scaleY:a?1:-1,scaleX:1}:r===mt&&i?{scaleY:a?1:-1,scaleX:-1}:r===or&&!i?{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2});var l=u.getBoundingRect([s]);u.x=n.x-l.x,u.y=n.y-l.y,u.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var u=this.dataZoomModel,n=this._size,r=this._displayables.sliderGroup,o=u.get("brushSelect");r.add(new gt({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:u.get("backgroundColor")},z2:-40}));var i=new gt({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:W(this._onClickPanel,this)}),s=this.api.getZr();o?(i.on("mousedown",this._onBrushStart,this),i.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),r.add(i)},t.prototype._renderDataShadow=function(){var u=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!u)return;var n=this._size,r=this._shadowSize||[],o=u.series,i=o.getRawData(),s=o.getShadowDim&&o.getShadowDim(),a=s&&i.getDimensionInfo(s)?o.getShadowDim():u.otherDim;if(a==null)return;var l=this._shadowPolygonPts,c=this._shadowPolylinePts;if(i!==this._shadowData||a!==this._shadowDim||n[0]!==r[0]||n[1]!==r[1]){var d=i.getDataExtent(a),f=(d[1]-d[0])*.3;d=[d[0]-f,d[1]+f];var h=[0,n[1]],p=[0,n[0]],b=[[n[0],0],[0,0]],v=[],g=p[1]/(i.count()-1),m=0,y=Math.round(i.count()/n[0]),_;i.each([a],function(T,F){if(y>0&&F%y){m+=g;return}var I=T==null||isNaN(T)||T==="",H=I?0:re(T,d,h,!0);I&&!_&&F?(b.push([b[b.length-1][0],0]),v.push([v[v.length-1][0],0])):!I&&_&&(b.push([m,0]),v.push([m,0])),b.push([m,H]),v.push([m,H]),m+=g,_=I}),l=this._shadowPolygonPts=b,c=this._shadowPolylinePts=v}this._shadowData=i,this._shadowDim=a,this._shadowSize=[n[0],n[1]];var k=this.dataZoomModel;function w(T){var F=k.getModel(T?"selectedDataBackground":"dataBackground"),I=new _t,H=new fi({shape:{points:l},segmentIgnoreThreshold:1,style:F.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),P=new hi({shape:{points:c},segmentIgnoreThreshold:1,style:F.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return I.add(H),I.add(P),I}for(var C=0;C<3;C++){var A=w(C===1);this._displayables.sliderGroup.add(A),this._displayables.dataShadowSegs.push(A)}},t.prototype._prepareDataShadowInfo=function(){var u=this.dataZoomModel,n=u.get("showDataShadow");if(n!==!1){var r,o=this.ecModel;return u.eachTargetAxis(function(i,s){var a=u.getAxisProxy(i,s).getTargetSeriesModels();$(a,function(l){if(!r&&!(n!==!0&&Xt(kf,l.get("type"))<0)){var c=o.getComponent(Be(i),s).axis,d=Sf(i),f,h=l.coordinateSystem;d!=null&&h.getOtherAxis&&(f=h.getOtherAxis(c).inverse),d=l.getData().mapDimension(d),r={thisAxis:c,series:l,thisDim:i,otherDim:d,otherAxisInverse:f}}},this)},this),r}},t.prototype._renderHandle=function(){var u=this.group,n=this._displayables,r=n.handles=[null,null],o=n.handleLabels=[null,null],i=this._displayables.sliderGroup,s=this._size,a=this.dataZoomModel,l=this.api,c=a.get("borderRadius")||0,d=a.get("brushSelect"),f=n.filler=new gt({silent:d,style:{fill:a.get("fillerColor")},textConfig:{position:"inside"}});i.add(f),i.add(new gt({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:xf,fill:"rgba(0,0,0,0)"}})),$([0,1],function(y){var _=a.get("handleIcon");!ai[_]&&_.indexOf("path://")<0&&_.indexOf("image://")<0&&(_="path://"+_);var k=Eu(_,-1,0,2,2,null,!0);k.attr({cursor:ir(this._orient),draggable:!0,drift:W(this._onDragMove,this,y),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1),z2:5});var w=k.getBoundingRect(),C=a.get("handleSize");this._handleHeight=Ht(C,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,k.setStyle(a.getModel("handleStyle").getItemStyle()),k.style.strokeNoScale=!0,k.rectHover=!0,k.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),Tu(k);var A=a.get("handleColor");A!=null&&(k.style.fill=A),i.add(r[y]=k);var T=a.getModel("textStyle"),F=a.get("handleLabel")||{},I=F.show||!1;u.add(o[y]=new Oe({silent:!0,invisible:!I,style:kt(T,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:T.getTextColor(),font:T.getFont()}),z2:10}))},this);var h=f;if(d){var p=Ht(a.get("moveHandleSize"),s[1]),b=n.moveHandle=new Ae({style:a.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),v=p*.8,g=n.moveHandleIcon=Eu(a.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);g.silent=!0,g.y=s[1]+p/2-.5,b.ensureState("emphasis").style=a.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(s[1]/2,Math.max(p,10));h=n.moveZone=new Ae({invisible:!0,shape:{y:s[1]-m,height:p+m}}),h.on("mouseover",function(){l.enterEmphasis(b)}).on("mouseout",function(){l.leaveEmphasis(b)}),i.add(b),i.add(g),i.add(h)}h.attr({draggable:!0,cursor:ir(this._orient),drift:W(this._onDragMove,this,"all"),ondragstart:W(this._showDataInfo,this,!0),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var u=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[re(u[0],[0,100],n,!0),re(u[1],[0,100],n,!0)]},t.prototype._updateInterval=function(u,n){var r=this.dataZoomModel,o=this._handleEnds,i=this._getViewExtent(),s=r.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];Yt(n,o,i,r.get("zoomLock")?"all":u,s.minSpan!=null?re(s.minSpan,a,i,!0):null,s.maxSpan!=null?re(s.maxSpan,a,i,!0):null);var l=this._range,c=this._range=vt([re(o[0],i,a,!0),re(o[1],i,a,!0)]);return!l||l[0]!==c[0]||l[1]!==c[1]},t.prototype._updateView=function(u){var n=this._displayables,r=this._handleEnds,o=vt(r.slice()),i=this._size;$([0,1],function(h){var p=n.handles[h],b=this._handleHeight;p.attr({scaleX:b/2,scaleY:b/2,x:r[h]+(h?-1:1),y:i[1]/2-b/2})},this),n.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:i[1]});var s={x:o[0],width:o[1]-o[0]};n.moveHandle&&(n.moveHandle.setShape(s),n.moveZone.setShape(s),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",s.x+s.width/2));for(var a=n.dataShadowSegs,l=[0,o[0],o[1],i[0]],c=0;c<a.length;c++){var d=a[c],f=d.getClipPath();f||(f=new Ae,d.setClipPath(f)),f.setShape({x:l[c],y:0,width:l[c+1]-l[c],height:i[1]})}this._updateDataInfo(u)},t.prototype._updateDataInfo=function(u){var n=this.dataZoomModel,r=this._displayables,o=r.handleLabels,i=this._orient,s=["",""];if(n.get("showDetail")){var a=n.findRepresentativeAxisProxy();if(a){var l=a.getAxisModel().axis,c=this._range,d=u?a.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:a.getDataValueWindow();s=[this._formatLabel(d[0],l),this._formatLabel(d[1],l)]}}var f=vt(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(p){var b=li(r.handles[p].parent,this.group),v=ci(p===0?"right":"left",b),g=this._handleWidth/2+_f,m=Su([f[p]+(p===0?-g:g),this._size[1]/2],b);o[p].setStyle({x:m[0],y:m[1],verticalAlign:i===mt?"middle":v,align:i===mt?v:"center",text:s[p]})}},t.prototype._formatLabel=function(u,n){var r=this.dataZoomModel,o=r.get("labelFormatter"),i=r.get("labelPrecision");(i==null||i==="auto")&&(i=n.getPixelPrecision());var s=u==null||isNaN(u)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(u)}):u.toFixed(Math.min(i,20));return Ue(o)?o(u,s):ne(o)?o.replace("{value}",s):s},t.prototype._showDataInfo=function(u){var n=this.dataZoomModel.get("handleLabel")||{},r=n.show||!1,o=this.dataZoomModel.getModel(["emphasis","handleLabel"]),i=o.get("show")||!1,s=u||this._dragging?i:r,a=this._displayables,l=a.handleLabels;l[0].attr("invisible",!s),l[1].attr("invisible",!s),a.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](a.moveHandle,1)},t.prototype._onDragMove=function(u,n,r,o){this._dragging=!0,yt(o.event);var i=this._displayables.sliderGroup.getLocalTransform(),s=Su([n,r],i,!0),a=this._updateInterval(u,s[0]),l=this.dataZoomModel.get("realtime");this._updateView(!l),a&&l&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var u=this.dataZoomModel.get("realtime");!u&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(u){var n=this._size,r=this._displayables.sliderGroup.transformCoordToLocal(u.offsetX,u.offsetY);if(!(r[0]<0||r[0]>n[0]||r[1]<0||r[1]>n[1])){var o=this._handleEnds,i=(o[0]+o[1])/2,s=this._updateInterval("all",r[0]-i);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(u){var n=u.offsetX,r=u.offsetY;this._brushStart=new di(n,r),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(u){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var r=n.shape,o=+new Date;if(!(o-this._brushStartTime<200&&Math.abs(r.width)<5)){var i=this._getViewExtent(),s=[0,100];this._range=vt([re(r.x,i,s,!0),re(r.x+r.width,i,s,!0)]),this._handleEnds=[r.x,r.x+r.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(u){this._brushing&&(yt(u.event),this._updateBrushRect(u.offsetX,u.offsetY))},t.prototype._updateBrushRect=function(u,n){var r=this._displayables,o=this.dataZoomModel,i=r.brushRect;i||(i=r.brushRect=new gt({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),r.sliderGroup.add(i)),i.attr("ignore",!1);var s=this._brushStart,a=this._displayables.sliderGroup,l=a.transformCoordToLocal(u,n),c=a.transformCoordToLocal(s.x,s.y),d=this._size;l[0]=Math.max(Math.min(d[0],l[0]),0),i.setShape({x:c[0],y:0,width:l[0]-c[0],height:d[1]})},t.prototype._dispatchZoomAction=function(u){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:u?wf:null,start:n[0],end:n[1]})},t.prototype._findCoordRect=function(){var u,n=Jr(this.dataZoomModel).infoList;if(!u&&n.length){var r=n[0].model.coordinateSystem;u=r.getRect&&r.getRect()}if(!u){var o=this.api.getWidth(),i=this.api.getHeight();u={x:o*.2,y:i*.2,width:o*.6,height:i*.6}}return u},t.type="dataZoom.slider",t}(Kr);function Sf(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function ir(e){return e==="vertical"?"ns-resize":"ew-resize"}function Af(e){e.registerComponentModel(vf),e.registerComponentView(Cf),eo(e)}function Df(e){De(bf),De(Af)}function Tf(e){if(!e||e.length<2)return console.warn("Insufficient candle data for finding lowest points"),[null,null];const t=e.filter(o=>o&&o.close&&o.date);if(t.length<2)return console.warn("Insufficient valid candle data for finding lowest points"),[null,null];const u=[...t].sort((o,i)=>o.close-i.close),n=u[0],r=u[Math.min(u.length-1,Math.max(1,u.length-15))];return[n,r]}function Ef(e){const[t,u]=Tf(e);if(!t||!u||!t.date||!u.date)return console.warn("Invalid low points data for trendline calculation"),[];const n=new Date(t.date).getTime(),r=new Date(u.date).getTime(),o=t.close,i=u.close,a=(i-o)/(r-n)>0?"red":"blue";return{name:"최저점 연결선",type:"line",data:[[t.date,o],[u.date,i]],lineStyle:{color:a,width:15,type:"solid"},symbol:"circle",symbolSize:6,itemStyle:{color:a}}}function Mf(e){if(!e||e.length<2)return console.warn("Not enough candle data for highest points calculation"),[null,null];const t=e.filter(o=>o&&o.close!==void 0&&o.date);if(t.length<2)return console.warn("Not enough valid candle data for highest points calculation"),[null,null];const u=[...t].sort((o,i)=>i.close-o.close),n=u[0],r=u[1];return[n,r]}function Ff(e){const[t,u]=Mf(e);if(!t||!u||!t.date||!u.date)return console.warn("Invalid high points data for trendline calculation"),[];const n=new Date(t.date).getTime(),r=new Date(u.date).getTime(),o=t.close,i=u.close,a=(i-o)/(r-n)>0?"red":"blue";return{name:"최고점 연결선",type:"line",data:[[t.date,o],[u.date,i]],lineStyle:{color:a,width:15,type:"solid"},symbol:"circle",symbolSize:6,itemStyle:{color:a}}}function qe(e,t=2){const u=e.map(i=>i.high-i.low),n=u.reduce((i,s)=>i+s,0)/u.length,r=Math.sqrt(u.reduce((i,s)=>i+(s-n)**2,0)/u.length),o=[];return u.forEach((i,s)=>{if(i>n+t*r){const a=s+15;a<e.length?o.push({index:a,date:e[a].date,volatility:e[a].high-e[a].low}):o.push({index:s,date:e[s].date,volatility:i})}}),o}function He(e,t=2,u=125){const r=e.map(l=>l.close).map((l,c,d)=>c>0?Math.abs(l-d[c-1]):0);function o(l,c){const d=[],f=[];for(let h=0;h<l.length;h++)if(h<c)d.push(null),f.push(null);else{const p=l.slice(h-c,h),b=p.reduce((g,m)=>g+m,0)/c,v=Math.sqrt(p.reduce((g,m)=>g+(m-b)**2,0)/c);d.push(b),f.push(v)}return{means:d,stds:f}}const{means:i,stds:s}=o(r,u),a=[];return r.forEach((l,c)=>{c>=u&&l>i[c]+t*s[c]&&a.push({index:c,date:e[c].date,close_change:l})}),a}function Ve(e,t,u){const n=[];t.forEach(({index:i,date:s,volatility:a})=>{const l=e[i];n.push({name:`특성 (${s})`,type:"scatter",data:[[l.date,l.high]],symbol:"circle",symbolSize:20,itemStyle:{color:"red"},label:{show:!0,formatter:"88",position:"top",color:"yellow",fontWeight:"bold",fontSize:12}})}),u.forEach(({index:i,date:s,close_change:a})=>{const l=e[i];n.push({name:`이벤트 (${s})`,type:"scatter",data:[[l.date,l.low]],symbol:"circle",symbolSize:20,itemStyle:{color:"green"},label:{show:!0,formatter:"33",position:"top",color:"yellow",fontWeight:"bold",fontSize:12}})});const r=Ef(e),o=Ff(e);return n.push(r),n.push(o),n}function If(e,t,u={shortPeriod:12,longPeriod:26,signalPeriod:9}){function n(f,h){const p=2/(h+1),b=[f[0]];for(let v=1;v<f.length;v++)b.push(f[v]*p+b[v-1]*(1-p));return b}function r(f){const{shortPeriod:h,longPeriod:p,signalPeriod:b}=u,v=n(f,h),g=n(f,p),m=v.map((k,w)=>k-g[w]),y=n(m.slice(p-1),b),_=m.slice(p-1).map((k,w)=>k-y[w]);return{macd:m.slice(p-1),signal:y,hist:_,offset:p-1}}function o(f,h){const p=f.map(_=>_.close),{macd:b,offset:v}=r(p),g=[];for(let _=1;_<b.length;_++){const k=b[_-1],w=b[_];(k>0&&w<0||k<0&&w>0)&&g.push(_+v)}if(g.length<h-1){const _=Math.floor(f.length/h);return[0,...Array.from({length:h-1},(w,C)=>(C+1)*_),f.length].map((w,C,A)=>C<A.length-1?[A[C],A[C+1]]:null).filter(Boolean)}const m=Math.floor(g.length/(h-1));return[0,...Array.from({length:h-1},(_,k)=>g[k*m]),f.length].map((_,k,w)=>k<w.length-1?[w[k],w[k+1]]:null).filter(Boolean)}function i(f,h,p){const b=p.length,v=Array.from({length:b},(B,q)=>q),g=B=>B.reduce((q,z)=>q+z,0),m=B=>g(B)/B.length,y=m(v),_=m(p),k=g(v.map((B,q)=>(B-y)*(p[q]-_))),w=g(v.map(B=>(B-y)**2)),C=k/w,A=_-C*y,T=v.map(B=>C*B+A),F=f.map((B,q)=>B-T[q]),I=h.map((B,q)=>B-T[q]),H=F.indexOf(Math.max(...F)),P=I.indexOf(Math.min(...I));function M(B,q,z,L){const X=Math.max(...L),K=Math.min(...L),ce=(X-K)/L.length;let je=1,Ee=1e-4,de=z,ge=-z*q+L[q],Me=g(v.map((we,Ce)=>(z*we+ge-L[Ce])**2));for(;je>Ee;){let we=!1;for(const Ce of[1,-1]){const fe=de+Ce*ce*je,Fe=-fe*q+L[q],Xe=v.map(Pe=>fe*Pe+Fe).map((Pe,We)=>Pe-L[We]);if(B&&Math.max(...Xe)>1e-5||!B&&Math.min(...Xe)<-1e-5)continue;const Ye=g(Xe.map(Pe=>Pe**2));if(Ye<Me){de=fe,Me=Ye,we=!0;break}}we||(je*=.5)}return[de,-de*q+L[q]]}const E=M(!0,P,C,h),V=M(!1,H,C,f);return{supportCoefs:E,resistCoefs:V}}const s=o(e,t),a=[],l=[],c=["#00C853","#43A047","#B2FF59","#388E3C","#81C784"],d=["#D50000","#FF5252","#FF8A80","#C62828","#FF1744"];{const f=qe(e),h=He(e),p=Ve(e,f,h);a.push(...p)}return s.forEach(([f,h],p)=>{const b=e.slice(f,h),v=b.map(A=>A.high),g=b.map(A=>A.low),m=b.map(A=>A.close),{supportCoefs:y,resistCoefs:_}=i(v,g,m),k=Array.from({length:b.length},(A,T)=>T),w=k.map(A=>y[0]*A+y[1]),C=k.map(A=>_[0]*A+_[1]);a.push({name:`지지선${p+1}`,type:"line",data:b.map((A,T)=>[A.date,w[T]]),symbol:"none",lineStyle:{color:c[p%c.length],width:2,type:p%2===0?"solid":"dashed"}}),l.push({name:`저항선${p+1}`,type:"line",data:b.map((A,T)=>[A.date,C[T]]),symbol:"none",lineStyle:{color:d[p%d.length],width:2,type:p%2===0?"solid":"dashed"}})}),{supportSeries:a,resistSeries:l}}function Pf(e,t){function u(l,c,d){const f=d.length,h=Array.from({length:f},(M,E)=>E),p=M=>M.reduce((E,V)=>E+V,0),b=M=>p(M)/M.length,v=b(h),g=b(d),m=p(h.map((M,E)=>(M-v)*(d[E]-g))),y=p(h.map(M=>(M-v)**2)),_=m/y,k=g-_*v,w=h.map(M=>_*M+k),C=l.map((M,E)=>M-w[E]),A=c.map((M,E)=>M-w[E]),T=C.indexOf(Math.max(...C)),F=A.indexOf(Math.min(...A));function I(M,E,V,B){const q=Math.max(...B),z=Math.min(...B),L=(q-z)/B.length;let X=1,K=1e-4,ce=V,je=-V*E+B[E],Ee=p(h.map((de,ge)=>(V*de+je-B[ge])**2));for(;X>K;){let de=!1;for(const ge of[1,-1]){const Me=ce+ge*L*X,we=-Me*E+B[E],fe=h.map(Ie=>Me*Ie+we).map((Ie,Xe)=>Ie-B[Xe]);if(M&&Math.max(...fe)>1e-5||!M&&Math.min(...fe)<-1e-5)continue;const Fe=p(fe.map(Ie=>Ie**2));if(Fe<Ee){ce=Me,Ee=Fe,de=!0;break}}de||(X*=.5)}return[ce,-ce*E+B[E]]}const H=I(!0,F,_,c),P=I(!1,T,_,l);return{supportCoefs:H,resistCoefs:P}}function n(l,c){const f=l.map(g=>g.close).map((g,m,y)=>m>0?g-y[m-1]:0),h=[];for(let g=1;g<f.length-1;g++){const m=f[g-1],y=f[g],_=f[g+1];(m>0&&y<0&&_<0||m<0&&y>0&&_>0)&&h.push(g)}const p=Math.floor(h.length/c),b=[0,...Array.from({length:c-1},(g,m)=>h[(m+1)*p]),l.length],v=[];for(let g=0;g<b.length-1;g++)v.push([b[g],b[g+1]]);return v}const r=n(e,t),o=[],i=[],s=["#00C853","#43A047","#B2FF59","#388E3C","#81C784"],a=["#D50000","#FF5252","#FF8A80","#C62828","#FF1744"];{const l=qe(e),c=He(e),d=Ve(e,l,c);o.push(...d)}return r.forEach(([l,c],d)=>{const f=e.slice(l,c),h=f.map(k=>k.high),p=f.map(k=>k.low),b=f.map(k=>k.close),{supportCoefs:v,resistCoefs:g}=u(h,p,b),m=Array.from({length:f.length},(k,w)=>w),y=m.map(k=>v[0]*k+v[1]),_=m.map(k=>g[0]*k+g[1]);o.push({name:`지지선${d+1}`,type:"line",data:f.map((k,w)=>[k.date,y[w]]),symbol:"none",lineStyle:{color:s[d%s.length],width:2,type:d%2===0?"solid":"dashed"}}),i.push({name:`저항선${d+1}`,type:"line",data:f.map((k,w)=>[k.date,_[w]]),symbol:"none",lineStyle:{color:a[d%a.length],width:2,type:d%2===0?"solid":"dashed"}})}),{supportSeries:o,resistSeries:i}}function zf(e,t){function u(s){const a=s.length,l=Array.from({length:a},(m,y)=>y),c=m=>m.reduce((y,_)=>y+_,0),d=m=>c(m)/m.length,f=d(l),h=d(s),p=c(l.map((m,y)=>(m-f)*(s[y]-h))),b=c(l.map(m=>(m-f)**2)),v=p/b,g=h-v*f;return{slope:v,intercept:g}}function n(s,a){const l=s.length,c=Math.floor(l/a),d=[];for(let f=0;f<a;f++){const h=f*c,p=f===a-1?l:(f+1)*c;d.push([h,p])}return d}const r=n(e,t),o=[],i=["#1976d2","#00bcd4","#90caf9","#1565c0","#039be5"];{const s=qe(e),a=He(e),l=Ve(e,s,a);o.push(...l)}return r.forEach(([s,a],l)=>{const c=e.slice(s,a),d=c.map(v=>v.close),{slope:f,intercept:h}=u(d),b=Array.from({length:c.length},(v,g)=>g).map(v=>f*v+h);o.push({name:`트렌드라인${l+1}`,type:"line",data:c.map((v,g)=>[v.date,b[g]]),symbol:"none",lineStyle:{color:i[l%i.length],width:2,type:l%2===0?"solid":"dashed"}})}),{supportSeries:[],resistSeries:[],trendSeries:o}}function Rf(e,t){function u(l,c){return l.map((d,f,h)=>f<c-1?null:h.slice(f-c+1,f+1).reduce((p,b)=>p+b,0)/c)}function n(l,c){const d=l.length,f=Math.floor(d/c),h=[];for(let p=0;p<c;p++){const b=p*f,v=p===c-1?d:(p+1)*f;h.push([b,v])}return h}const r=n(e,t),o=[],i=[],s=10,a=["#6d4c41","#ffb300","#ffe082","#8d6e63","#ffecb3"];{const l=qe(e),c=He(e),d=Ve(e,l,c);i.push(...d)}return r.forEach(([l,c],d)=>{const f=e.slice(l,c),h=f.map(g=>g.close),b=u(h,s).filter(g=>g!==null);if(b.length===0)return;const v=b[b.length-1];o.push({name:`지지선${d+1}`,type:"line",data:f.map((g,m)=>[g.date,v]),symbol:"none",lineStyle:{color:a[d%a.length],width:2,type:d%2===0?"solid":"dashed"}}),i.push({name:`저항선${d+1}`,type:"line",data:f.map((g,m)=>[g.date,v]),symbol:"none",lineStyle:{color:a[d%a.length],width:2,type:d%2===0?"solid":"dashed"}})}),{supportSeries:o,resistSeries:i}}function $f(e,t,u={window:20,k:2}){function n(h,p,b){const v=[],g=[];for(let m=0;m<h.length;m++)if(m<p-1)v.push(null),g.push(null);else{const y=h.slice(m-p+1,m+1),_=y.reduce((w,C)=>w+C,0)/p,k=y.reduce((w,C)=>w+(C-_)**2,0)/p;v.push(_),g.push(Math.sqrt(k))}return{ma:v,upper:v.map((m,y)=>m!==null?m+b*g[y]:null),lower:v.map((m,y)=>m!==null?m-b*g[y]:null)}}function r(h,p,b,v){const g=h.map(C=>C.close),{upper:m,lower:y}=n(g,b,v),_=[];for(let C=b;C<g.length;C++)(g[C-1]<=m[C-1]&&g[C]>m[C]||g[C-1]>=y[C-1]&&g[C]<y[C])&&_.push(C);if(_.length<p-1){const C=Math.floor(h.length/p);return[0,...Array.from({length:p-1},(T,F)=>(F+1)*C),h.length].map((T,F,I)=>F<I.length-1?[I[F],I[F+1]]:null).filter(Boolean)}const k=Math.floor(_.length/(p-1));return[0,...Array.from({length:p-1},(C,A)=>_[A*k]),h.length].map((C,A,T)=>A<T.length-1?[T[A],T[A+1]]:null).filter(Boolean)}function o(h,p,b){const v=b.length,g=Array.from({length:v},(q,z)=>z),m=q=>q.reduce((z,L)=>z+L,0),y=q=>m(q)/q.length,_=y(g),k=y(b),w=m(g.map((q,z)=>(q-_)*(b[z]-k))),C=m(g.map(q=>(q-_)**2)),A=w/C,T=k-A*_,F=g.map(q=>A*q+T),I=h.map((q,z)=>q-F[z]),H=p.map((q,z)=>q-F[z]),P=I.indexOf(Math.max(...I)),M=H.indexOf(Math.min(...H));function E(q,z,L,X){const K=Math.max(...X),ce=Math.min(...X),je=(K-ce)/X.length;let Ee=1,de=1e-4,ge=L,Me=-L*z+X[z],we=m(g.map((Ce,fe)=>(L*Ce+Me-X[fe])**2));for(;Ee>de;){let Ce=!1;for(const fe of[1,-1]){const Fe=ge+fe*je*Ee,Ie=-Fe*z+X[z],Ye=g.map(We=>Fe*We+Ie).map((We,co)=>We-X[co]);if(q&&Math.max(...Ye)>1e-5||!q&&Math.min(...Ye)<-1e-5)continue;const Pe=m(Ye.map(We=>We**2));if(Pe<we){ge=Fe,we=Pe,Ce=!0;break}}Ce||(Ee*=.5)}return[ge,-ge*z+X[z]]}const V=E(!0,M,A,p),B=E(!1,P,A,h);return{supportCoefs:V,resistCoefs:B}}const{window:i,k:s}=u,a=r(e,t,i,s),l=[],c=[],d=["#00C853","#43A047","#B2FF59","#388E3C","#81C784"],f=["#D50000","#FF5252","#FF8A80","#C62828","#FF1744"];{const h=qe(e),p=He(e),b=Ve(e,h,p);c.push(...b)}return a.forEach(([h,p],b)=>{const v=e.slice(h,p),g=v.map(T=>T.high),m=v.map(T=>T.low),y=v.map(T=>T.close),{supportCoefs:_,resistCoefs:k}=o(g,m,y),w=Array.from({length:v.length},(T,F)=>F),C=w.map(T=>_[0]*T+_[1]),A=w.map(T=>k[0]*T+k[1]);l.push({name:`지지선${b+1}`,type:"line",data:v.map((T,F)=>[T.date,C[F]]),symbol:"none",lineStyle:{color:d[b%d.length],width:2,type:b%2===0?"solid":"dashed"}}),c.push({name:`저항선${b+1}`,type:"line",data:v.map((T,F)=>[T.date,A[F]]),symbol:"none",lineStyle:{color:f[b%f.length],width:2,type:b%2===0?"solid":"dashed"}})}),{supportSeries:l,resistSeries:c}}function Lf(e,t=20){function u(o){const i=o.length,s=Array.from({length:i},(v,g)=>g),a=v=>v.reduce((g,m)=>g+m,0),l=v=>a(v)/v.length,c=l(s),d=l(o),f=a(s.map((v,g)=>(v-c)*(o[g]-d))),h=a(s.map(v=>(v-c)**2)),p=f/h,b=d-p*c;return{slope:p,intercept:b}}const n=[],r=e.length;for(let o=0;o<=r-t;o++){const i=e.slice(o,o+t),s=i.map(f=>f.close),{slope:a,intercept:l}=u(s),d=Array.from({length:t},(f,h)=>h).map(f=>a*f+l);n.push({name:`MovingReg_${o+1}`,type:"line",data:i.map((f,h)=>[f.date,d[h]]),symbol:"none",lineStyle:{color:"#1976d2",width:2}})}{const o=qe(e),i=He(e),s=Ve(e,o,i);n.push(...s)}return{trendSeries:n}}function Bf(e,t){function u(s){const a=s.length,l=Array.from({length:a},(E,V)=>V),c=E=>E.reduce((V,B)=>V+B,0),d=(E,V)=>c(E.map(B=>B**V)),f=(E,V,B)=>c(E.map((q,z)=>q**B*V[z])),h=c(l),p=d(l,2),b=d(l,3),v=d(l,4),g=c(s),m=f(l,s,1),y=f(l,s,2),_=[[v,b,p],[b,p,h],[p,h,a]],k=[y,m,g];function w(E){return E[0][0]*(E[1][1]*E[2][2]-E[1][2]*E[2][1])-E[0][1]*(E[1][0]*E[2][2]-E[1][2]*E[2][0])+E[0][2]*(E[1][0]*E[2][1]-E[1][1]*E[2][0])}function C(E,V,B){return E.map((q,z)=>q.map((L,X)=>X===V?B[z]:L))}const A=w(_);if(A===0)return{a:0,b:0,c:0};const T=w(C(_,0,k)),F=w(C(_,1,k)),I=w(C(_,2,k)),H=T/A,P=F/A,M=I/A;return{a:H,b:P,c:M}}function n(s,a){const l=s.length,c=Math.floor(l/a),d=[];for(let f=0;f<a;f++){const h=f*c,p=f===a-1?l:(f+1)*c;d.push([h,p])}return d}const r=n(e,t),o=[],i=["#FF5722","#FF9800","#FFC107","#FFB300","#FF6F00"];r.forEach(([s,a],l)=>{const c=e.slice(s,a),d=c.map(g=>g.close),{a:f,b:h,c:p}=u(d),v=Array.from({length:c.length},(g,m)=>m).map(g=>f*g**2+h*g+p);o.push({name:`Poly2_${l+1}`,type:"line",data:c.map((g,m)=>[g.date,v[m]]),symbol:"none",lineStyle:{color:i[l%i.length],width:2,type:l%2===0?"solid":"dashed"}})});{const s=qe(e),a=He(e),l=Ve(e,s,a);o.push(...l)}return{trendSeries:o}}function Of(e,t=.2,u=!1){function n(l){return l>=1?0:(1-l**3)**3}const r=e.length,o=Array.from({length:r},(l,c)=>c),i=e.map(l=>l.close),s=[];for(let l=0;l<r;l++){const c=o.map(k=>Math.abs(k-l)),d=c.reduce((k,w)=>Math.max(k,w),0),f=t*d,h=c.map(k=>n(k/f)),p=h.reduce((k,w)=>k+w,0),b=h.reduce((k,w,C)=>k+w*o[C],0)/p,v=h.reduce((k,w,C)=>k+w*i[C],0)/p;let g=0,m=0;for(let k=0;k<r;k++)g+=h[k]*(o[k]-b)*(i[k]-v),m+=h[k]*(o[k]-b)**2;const y=m===0?0:g/m,_=v-y*b;s.push(y*l+_)}const a=[{name:"Lowess",type:"line",data:e.map((l,c)=>[l.date,s[c]]),symbol:"none",lineStyle:{color:"#009688",width:2}}];if(u){const l=qe(e),c=He(e),d=Ve(e,l,c);a.push(...d)}return{trendSeries:a}}const ku={bw:{label:"bw 감지",fn:$f},highlow:{label:"macd 감지",fn:If},simple:{label:"단순 Linear Regression",fn:zf},ma:{label:"이동평균선 기반 평행선",fn:Rf},normal:{label:"등락률 변경감지",fn:Pf},movingRegression:{label:"이동회귀 (Moving Regression)",fn:Lf},polynomial2:{label:"2차 다항 회귀 (Polynomial Regression 2)",fn:Bf},lowess:{label:"로컬 회귀 (Lowess/LOESS)",fn:Of}},Nf={key:0,class:"mt-4"},qf={class:"space-y-4"},Hf={class:"overflow-hidden rounded-lg border border-border/20 bg-card/90 p-3 sm:p-4"},Vf={class:"overflow-hidden rounded-lg border border-border/20 bg-card/90 p-3 sm:p-4"},jf={class:"mb-3 flex items-center justify-between"},Wf={class:"text-xs text-muted-foreground"},Zf={class:"mb-3 flex items-center gap-2"},Gf={class:"mb-3 flex flex-wrap gap-2"},Uf=["onClick"],Xf={key:0,class:"flex flex-wrap gap-1"},Yf=["onClick"],Qf={class:"overflow-hidden rounded-lg border border-border/20 bg-card/90 p-3 sm:p-4"},Jf={class:"mb-3 flex items-center justify-between"},Kf={key:0,class:"space-y-3 text-sm"},eh={class:"flex flex-wrap gap-1"},th=["onClick"],uh={class:"flex items-center gap-2"},nh={class:"text-sm font-medium"},rh={__name:"StockChart",props:{mcpResults:{type:Array,default:()=>[]}},setup(e){De([pi,gi,mi,bi,Yd,Gd,sf,yd,Df]);const t=e,u=Z(""),n=Z("candlestick"),r=Z(""),o=Z(!0),i=Z("highlow"),s=Z(3),a=j(()=>Object.entries(ku).map(([_,{label:k}])=>({key:_,label:k}))),l=_=>({market:"",이차전지:"",반도체:"",자동차:"",바이오:"",금융:"",IT:"",화학:"",에너지:"",통신:""})[_]||"",c=_=>(_.includes("삼성")||_.includes("LG")||_.includes("SK")||_.includes("현대")||_.includes("코스피")||_.includes("코스닥")||_.includes("에코프로"),""),d=j(()=>{var _;if(!t.mcpResults||!Array.isArray(t.mcpResults))return null;for(const k of t.mcpResults)if(Array.isArray(k)){for(const w of k)if((w==null?void 0:w.tool)==="fetch_stock_candles"&&((_=w==null?void 0:w.result)!=null&&_.data))return w.result}return null}),f=j(()=>d.value&&d.value.data),h=j(()=>{var _;return(_=d.value)!=null&&_.categories?d.value.categories:[]}),p=j(()=>{if(!f.value)return 0;let _=0;for(const k of h.value)d.value.data[k]&&(_+=Object.keys(d.value.data[k]).length);return _}),b=j(()=>{if(!f.value||!u.value)return[];const _=d.value.data[u.value];return _?Object.keys(_):[]}),v=j(()=>{if(!f.value||!u.value)return null;const _=d.value.data[u.value];return _?n.value==="bar"?g(_):n.value==="candlestick"?y(_):null:null}),g=_=>{const k=[],w=[],C=Object.values(_)[0];return C&&C.length>0&&w.push(...C.map(A=>A.Date)),Object.entries(_).forEach(([A,T])=>{const F=T.map(I=>I.Change*100);k.push({name:A,type:"bar",data:F,itemStyle:{color:I=>I.value>=0?"#ef4444":"#3b82f6"}})}),{title:{text:`${l(u.value)} ${u.value} 수익률 분석`,textStyle:{fontSize:18,fontWeight:"bold",color:"#1f2937"},left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontSize:14,color:"#374151"},formatter:function(A){let T=`<div style="font-weight: bold; margin-bottom: 8px; color: #1f2937;">${A[0].axisValue}</div>`;return A.forEach(F=>{const I=F.value>=0?"#ef4444":"#3b82f6",H=F.value>=0?"📈":"📉",P=F.value>=0?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)";T+=`<div style="background: ${P}; padding: 4px 8px; margin: 2px 0; border-radius: 4px;">
            <span style="color: ${I}; font-weight: bold;">${H} ${F.seriesName}</span><br/>
            <span style="color: ${I}; font-size: 16px; font-weight: bold;">${F.value.toFixed(2)}%</span>
          </div>`}),T}},legend:{data:k.map(A=>A.name),top:"12%",textStyle:{fontSize:14,fontWeight:"500"},itemGap:20},grid:{left:"5%",right:"5%",bottom:"15%",top:"25%",containLabel:!0},xAxis:{type:"category",data:w,axisLabel:{fontSize:12,fontWeight:"500",color:"#6b7280",formatter:function(A){return A.substring(5)}},axisLine:{lineStyle:{color:"#d1d5db",width:2}}},yAxis:{type:"value",name:"수익률 (%)",nameTextStyle:{fontSize:14,fontWeight:"bold",color:"#374151"},axisLabel:{fontSize:12,fontWeight:"500",color:"#6b7280",formatter:"{value}%"},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}},axisLine:{show:!0,lineStyle:{color:"#d1d5db",width:2}}},series:k}},m=(_,k,w)=>{const C=[{name:_,type:"candlestick",data:k,itemStyle:{color:"#ef4444",color0:"#3b82f6",borderColor:"#ef4444",borderColor0:"#3b82f6"}}];if(o.value&&i.value&&ku[i.value])try{const A=ku[i.value],T=w.map(I=>({date:I.Date,open:I.Open,high:I.High,low:I.Low,close:I.Close,volume:I.Volume||0}));let F;i.value==="bw"?F=A.fn(T,s.value,{window:20,k:2}):F=A.fn(T,s.value,{shortPeriod:12,longPeriod:26,signalPeriod:9}),F.supportSeries&&Array.isArray(F.supportSeries)&&C.push(...F.supportSeries),F.resistSeries&&Array.isArray(F.resistSeries)&&C.push(...F.resistSeries),F.trendSeries&&Array.isArray(F.trendSeries)&&C.push(...F.trendSeries)}catch(A){console.warn("트렌드라인 계산 중 오류:",A)}return C},y=_=>{const k=r.value||Object.keys(_)[0],w=_[k];if(!w||w.length===0)return null;const C=w.map(T=>T.Date),A=w.map(T=>[T.Open,T.Close,T.Low,T.High]);return{title:{text:`🕯️ ${u.value} - ${c(k)} ${k}`,textStyle:{fontSize:18,fontWeight:"bold",color:"#1f2937"},left:"center"},tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontSize:14,color:"#374151"},formatter:function(T){const F=T[0],I=F.data,H=I[2]>=I[1],P=(I[2]-I[1])/I[1]*100,M=H?"#ef4444":"#3b82f6",E=H?"↗":"↘",V=H?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)";return`
          <div style="font-weight: bold; margin-bottom: 12px; color: #1f2937; font-size: 16px;">${F.axisValue}</div>
          <div style="background: ${V}; padding: 12px; border-radius: 8px; margin: 8px 0;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <span style="font-weight: bold;">시가:</span>
              <span style="color: #374151; font-weight: bold;">${I[1].toLocaleString()}원</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <span style="font-weight: bold;">종가:</span>
              <span style="color: ${M}; font-weight: bold;">${I[2].toLocaleString()}원</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <span style="font-weight: bold;">최고:</span>
              <span style="color: #ef4444; font-weight: bold;">${I[4].toLocaleString()}원</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
              <span style="font-weight: bold;">최저:</span>
              <span style="color: #3b82f6; font-weight: bold;">${I[3].toLocaleString()}원</span>
            </div>
            <div style="text-align: center; padding: 8px; background: oklch(var(--pale-yellow-100)); border-radius: 4px;">
              <span style="color: ${M}; font-size: 18px; font-weight: bold;">
                ${E} ${P.toFixed(2)}%
              </span>
            </div>
          </div>
        `}},grid:{left:"5%",right:"5%",bottom:"15%",top:"20%",containLabel:!0},xAxis:{type:"category",data:C,axisLabel:{fontSize:12,fontWeight:"500",color:"#6b7280",formatter:function(T){return T.substring(5)}},axisLine:{lineStyle:{color:"#d1d5db",width:2}}},yAxis:{type:"value",scale:!0,axisLabel:{fontSize:12,fontWeight:"500",color:"#6b7280",formatter:function(T){return T.toLocaleString()}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}},axisLine:{show:!0,lineStyle:{color:"#d1d5db",width:2}}},dataZoom:[{type:"inside",start:0,end:100}],series:m(k,A,w)}};return me(h,_=>{_.length>0&&!u.value&&(u.value=_[0])},{immediate:!0}),me([o,i,s],()=>{}),me(b,_=>{_.length>0&&(!r.value||!_.includes(r.value))&&(r.value=_[0])},{immediate:!0}),(_,k)=>f.value?(S(),D("div",Nf,[x("div",qf,[x("div",Hf,[v.value?(S(),Ge(O(yi),{key:0,option:v.value,class:"h-[280px] w-full text-black sm:h-[320px]",autoresize:""},null,8,["option"])):N("",!0)]),x("div",Vf,[x("div",jf,[k[5]||(k[5]=x("span",{class:"rounded-md bg-muted px-2 py-1 text-xs font-medium text-foreground"},"🔍 차트 필터",-1)),x("span",Wf,"결과 ("+R(p.value)+")",1)]),x("div",Zf,[x("button",{onClick:k[0]||(k[0]=w=>n.value="bar"),class:G(["rounded-md px-3 py-1.5 text-xs font-medium transition-colors",n.value==="bar"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"])}," 📊 수익률 ",2),x("button",{onClick:k[1]||(k[1]=w=>n.value="candlestick"),class:G(["rounded-md px-3 py-1.5 text-xs font-medium transition-colors",n.value==="candlestick"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"])}," 🕯️ 캔들 ",2)]),x("div",Gf,[(S(!0),D(Q,null,J(h.value,w=>(S(),D("button",{key:w,onClick:C=>u.value=w,class:G(["rounded-md px-2 py-1 text-xs font-medium transition-colors",u.value===w?"bg-accent text-accent-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted"])},R(w),11,Uf))),128))]),n.value==="candlestick"&&b.value.length>1?(S(),D("div",Xf,[(S(!0),D(Q,null,J(b.value,w=>(S(),D("button",{key:w,onClick:C=>r.value=w,class:G(["rounded-md px-2 py-1 text-xs font-medium transition-colors",r.value===w?"bg-accent text-accent-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted"])},R(w),11,Yf))),128))])):N("",!0)]),x("div",Qf,[x("div",Jf,[k[6]||(k[6]=x("span",{class:"rounded-md bg-muted px-2 py-1 text-xs font-medium text-foreground"},"📈 트렌드라인",-1)),x("button",{onClick:k[2]||(k[2]=w=>o.value=!o.value),class:"rounded-md bg-primary px-3 py-1 text-xs font-medium text-primary-foreground transition-colors hover:bg-primary/90"},R(o.value?"✕ 숨기기":"✓ 표시"),1)]),o.value?(S(),D("div",Kf,[x("div",null,[k[7]||(k[7]=x("div",{class:"mb-2 text-xs font-medium text-muted-foreground"},"⚙ 알고리즘",-1)),x("div",eh,[(S(!0),D(Q,null,J(a.value,w=>(S(),D("button",{key:w.key,onClick:C=>i.value=w.key,class:G(["rounded-md px-2 py-1 text-xs font-medium transition-colors",i.value===w.key?"bg-accent text-accent-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted"])},R(w.label),11,th))),128))])]),x("div",null,[k[8]||(k[8]=x("div",{class:"mb-2 text-xs font-medium text-muted-foreground"},"🔧 세그먼트",-1)),x("div",uh,[x("button",{onClick:k[3]||(k[3]=w=>s.value=Math.max(1,s.value-1)),class:"flex size-7 items-center justify-center rounded-md bg-destructive text-xs font-medium text-destructive-foreground hover:bg-destructive/90"}," - "),x("span",nh,R(s.value),1),x("button",{onClick:k[4]||(k[4]=w=>s.value=Math.min(10,s.value+1)),class:"flex size-7 items-center justify-center rounded-md bg-primary text-xs font-medium text-primary-foreground hover:bg-primary/90"}," + ")])])])):N("",!0)])])])):N("",!0)}},oh=dt(rh,[["__scopeId","data-v-0ce46137"]]),ih=["title"],sh={key:0,class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ah={key:1,class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},lo={__name:"ResendButton",props:{message:{type:String,required:!0},variant:{type:String,default:"primary",validator:e=>["primary","secondary"].includes(e)},type:{type:String,default:"question",validator:e=>["question","answer"].includes(e)},title:{type:String,default:"다시 보내기"}},emits:["resend"],setup(e){return(t,u)=>(S(),D("button",{onClick:u[0]||(u[0]=n=>t.$emit("resend",e.message+`

 위내용과 정 반대의견 으로 정리`)),class:G(["absolute -bottom-2 -right-2 rounded-full p-2 opacity-0 shadow-lg transition-all duration-200 group-hover:opacity-100",e.variant==="primary"?"bg-primary text-primary-foreground hover:bg-primary/80":"bg-secondary text-secondary-foreground hover:bg-secondary/80"]),title:e.title},[e.type==="question"?(S(),D("svg",sh,[...u[1]||(u[1]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(S(),D("svg",ah,[...u[2]||(u[2]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)])]))],10,ih))}},lh={class:"flex justify-end"},ch={class:"group max-w-[70%]"},dh={class:"relative rounded-2xl border border-primary/20 bg-primary/10 px-4 py-3 shadow-sm backdrop-blur-sm transition-colors hover:bg-primary/15"},fh={__name:"ChatUserMessage",props:{message:{type:String,required:!0}},emits:["resend"],setup(e){const t=e,u=j(()=>String(t.message.replace("qqqq","")));return(n,r)=>(S(),D("div",lh,[x("div",ch,[x("div",dh,[Y(Ku,{content:u.value,class:"prose max-w-none break-words leading-normal"},null,8,["content"]),Y(lo,{message:e.message,variant:"primary",type:"question",onResend:r[0]||(r[0]=o=>n.$emit("resend",o))},null,8,["message"])])])]))}},hh={class:"relative"},ph={class:"relative z-10 mb-8"},gh={class:"flex flex-wrap gap-3"},mh=["onClick"],bh={key:0,class:"absolute inset-0 animate-pulse bg-gradient-to-r from-primary/10 to-accent/10"},vh={class:"relative z-10 flex items-center gap-2"},xh={key:0,class:"inline-block size-1.5 animate-pulse rounded-full bg-primary"},yh={key:0,class:"relative z-10"},_h={key:0,class:"space-y-4"},kh={class:"relative overflow-hidden rounded-2xl border border-border/30 bg-gradient-to-br from-card/95 via-background/85 to-card/90 p-6 shadow-2xl backdrop-blur-xl"},wh={class:"relative z-10 flex items-center justify-between"},Ch={class:"flex items-center gap-3"},Sh={class:"text-xs text-muted-foreground"},Ah={key:0,class:"relative overflow-hidden rounded-2xl border border-border/30 bg-gradient-to-br from-card/95 via-background/85 to-card/90 shadow-2xl backdrop-blur-xl"},Dh={class:"relative z-10 p-6"},Th={key:1,class:"relative overflow-hidden rounded-2xl border border-border/30 bg-gradient-to-br from-card/95 via-background/85 to-card/90 shadow-2xl backdrop-blur-xl"},Eh={class:"relative z-10 max-h-96 overflow-auto p-6"},Mh={class:"whitespace-pre-wrap font-mono text-xs text-foreground/90"},Fh={key:1,class:"relative overflow-hidden rounded-2xl border border-border/30 bg-gradient-to-br from-card/95 via-background/85 to-card/90 shadow-2xl backdrop-blur-xl"},Ih={class:"relative z-10 p-6"},Ph={class:"mb-4 flex items-center gap-3"},zh={class:"text-xs text-muted-foreground"},Rh={class:"max-h-96 overflow-auto rounded-lg border border-border/20 bg-muted/30 p-4"},$h={class:"whitespace-pre-wrap font-mono text-xs text-foreground/90"},Lh={__name:"McpCallRawData",props:{mcpResults:{type:Array,default:()=>[]}},setup(e){const t=e,u=j(()=>{const l=new Set;return t.mcpResults.forEach(c=>{Array.isArray(c)?c.forEach(d=>{d!=null&&d.tool&&l.add(d.tool)}):c!=null&&c.tool&&l.add(c.tool)}),Array.from(l).map(c=>({tool:c}))}),n=Z(null);me(u,l=>{l.some(({tool:d})=>d==="generate")&&!n.value&&(n.value="generate")},{immediate:!0});const r=j(()=>{if(!n.value||t.mcpResults.length===0)return[];const l=[];return t.mcpResults.forEach(c=>{Array.isArray(c)?c.forEach(d=>{(d==null?void 0:d.tool)===n.value&&l.push(d)}):(c==null?void 0:c.tool)===n.value&&l.push(c)}),l}),o=j(()=>n.value==="generate"),i=j(()=>{var c;if(!o.value||r.value.length===0)return"";const l=r.value[0];return((c=l==null?void 0:l.result)==null?void 0:c.content)||""}),s=j(()=>r.value.length===0?"":r.value.map(l=>JSON.stringify(l,null,2)).join(`

---

`)),a=Z(!1);return(l,c)=>(S(),D("div",hh,[c[9]||(c[9]=x("div",{class:"pointer-events-none absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5"},null,-1)),x("div",ph,[x("div",gh,[(S(!0),D(Q,null,J(u.value,({tool:d},f)=>(S(),D("button",{key:f,class:G(["group relative overflow-hidden rounded-xl px-4 py-2 text-sm font-medium transition-all duration-300",n.value===d?"bg-gradient-to-r from-primary/20 to-accent/20 text-primary shadow-lg scale-105":"bg-card/50 backdrop-blur-sm text-card-foreground hover:bg-card/80 hover:scale-102 hover:shadow-md border border-border/30"]),onClick:h=>n.value=n.value===d?null:d},[n.value===d?(S(),D("span",bh)):N("",!0),x("span",vh,[n.value===d?(S(),D("span",xh)):N("",!0),nt(" "+R(d),1)])],10,mh))),128))])]),r.value.length>0?(S(),D("div",yh,[o.value&&i.value?(S(),D("div",_h,[x("div",kh,[c[3]||(c[3]=x("div",{class:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5"},null,-1)),x("div",wh,[x("div",Ch,[c[2]||(c[2]=x("div",{class:"flex size-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-accent"},[x("svg",{class:"size-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),x("div",null,[c[1]||(c[1]=x("h4",{class:"font-semibold text-foreground"},"AI 생성 결과",-1)),x("p",Sh,"도구: "+R(n.value),1)])]),x("button",{onClick:c[0]||(c[0]=d=>a.value=!a.value),class:"rounded-lg border border-border/30 bg-muted/50 px-3 py-1.5 text-xs font-medium transition-colors hover:bg-muted"},R(a.value?"AI 결과 보기":"Raw 데이터 보기"),1)])]),a.value?(S(),D("div",Th,[c[5]||(c[5]=x("div",{class:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5"},null,-1)),x("div",Eh,[x("pre",Mh,R(s.value),1)])])):(S(),D("div",Ah,[c[4]||(c[4]=x("div",{class:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5"},null,-1)),x("div",Dh,[Y(Ku,{content:i.value,class:"prose max-w-none break-words leading-normal"},null,8,["content"])])]))])):(S(),D("div",Fh,[c[8]||(c[8]=x("div",{class:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5"},null,-1)),x("div",Ih,[x("div",Ph,[c[7]||(c[7]=x("div",{class:"flex size-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-accent"},[x("svg",{class:"size-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})])],-1)),x("div",null,[c[6]||(c[6]=x("h4",{class:"font-semibold text-foreground"},"도구 실행 결과",-1)),x("p",zh,"도구: "+R(n.value),1)])]),x("div",Rh,[x("pre",$h,R(s.value),1)])])]))])):N("",!0)]))}},Bh=dt(Lh,[["__scopeId","data-v-bcaba365"]]),Oh={class:"mt-1 flex space-x-2 text-xs text-muted-foreground"},Nh={key:0,class:"uppercase"},qh={key:1,class:"flex animate-pulse items-center space-x-1 text-primary"},Hh={key:1,class:"min-h-[calc(15dvh-var(--viewport-message))]"},sr={__name:"ChatAIMessage",props:{ask:{type:[String,Object],required:!0},message:{type:String,required:!0},mcpResults:{type:Array,default:()=>[]},timestamp:{type:String,default:""},messageType:{type:String,default:""},isStreaming:{type:Boolean,default:!1}},emits:["resend","resend-answer","send-ai-message","ask-ai","ask-quick-question"],setup(e){const t=e,u=j(()=>String(t.message.replace("qqqq",""))),n=j(()=>typeof t.ask=="string"?t.ask:typeof t.ask=="object"&&t.ask.content?t.ask.content:String(t.ask));return(r,o)=>(S(),D(Q,null,[n.value?(S(),Ge(fh,{key:0,message:n.value,onResend:o[0]||(o[0]=i=>r.$emit("resend",i))},null,8,["message"])):N("",!0),x("div",{class:G(["group relative",{"":e.isStreaming}])},[Y(Ku,{content:u.value,class:"prose max-w-none break-words leading-normal"},null,8,["content"]),Y(Xc,{"mcp-results":e.mcpResults,onSendAiMessage:o[1]||(o[1]=i=>r.$emit("send-ai-message",i)),onAskAI:o[2]||(o[2]=i=>r.$emit("ask-ai",i)),onAskQuickQuestion:o[3]||(o[3]=i=>r.$emit("ask-quick-question",i))},null,8,["mcp-results"]),Y(oh,{"mcp-results":e.mcpResults},null,8,["mcp-results"]),Y(lo,{message:e.message,variant:"secondary",type:"answer",title:"답변 다시 보내기",onResend:o[4]||(o[4]=i=>r.$emit("resend-answer",i))},null,8,["message"]),Y(Bh,{"mcp-results":e.mcpResults},null,8,["mcp-results"]),x("div",Oh,[e.messageType==="done"?(S(),D("span",Nh,R(e.messageType),1)):N("",!0),e.isStreaming?(S(),D("span",qh,[...o[5]||(o[5]=[x("div",{class:"size-2 animate-ping rounded-full bg-primary"},null,-1),x("span",null,"열나개 생각중...",-1)])])):N("",!0)])],2),e.isStreaming?N("",!0):(S(),D("div",Hh))],64))}},Vh={class:"mx-auto max-w-4xl space-y-4 px-3 py-4 sm:p-6"},jh={key:0,class:"min-h-[calc(75dvh-var(--viewport-message))]"},Wh={class:"space-y-4 sm:space-y-6"},ar={__name:"ChatMessages",props:{messages:{type:Array,default:()=>[]}},emits:["resend-message","resend-answer","send-ai-message"],setup(e,{emit:t}){const u=e,n=t,r=Z(null),o=Z(u.messages.length),i=j(()=>!u.messages||u.messages.length<=1?[]:u.messages.slice(0,-1).filter(l=>{var c,d;return((c=l.contents)==null?void 0:c.answer)&&((d=l.metas)==null?void 0:d.type)!=="streaming"})),s=j(()=>{const l=u.messages;return l.length>0?l[l.length-1]:null});me(()=>u.messages.length,l=>{l>o.value&&rt(()=>{if(r.value){const c={top:r.value.scrollHeight,behavior:"smooth"};r.value.scrollTo(c)}}),o.value=l});const a=l=>n("send-ai-message",l.prompt);return(l,c)=>{var d,f,h,p,b,v,g;return S(),D("main",{ref_key:"messageContainer",ref:r,class:"flex-1 overflow-y-auto overscroll-contain"},[x("div",Vh,[(S(!0),D(Q,null,J(i.value,(m,y,_,k)=>{var A,T,F,I,H,P,M;const w=[m.id,(A=m.metas)==null?void 0:A.type,(T=m.contents)==null?void 0:T.answer,s.value.mcpcall];if(k&&k.key===m.id&&mo(k,w))return k;const C=(S(),D("div",{key:m.id,"data-message-id":m.id,class:"space-y-4 sm:space-y-6"},[(F=m.contents)!=null&&F.answer?(S(),Ge(sr,{key:0,ask:(I=m.contents)==null?void 0:I.ask,message:m.contents.answer,"mcp-results":m.mcpcall||[],timestamp:(P=(H=m.metas)==null?void 0:H.answer)==null?void 0:P.timestamp,"message-type":(M=m.metas)==null?void 0:M.type,"is-streaming":!1,onResend:c[0]||(c[0]=E=>l.$emit("resend-message",E)),onResendAnswer:c[1]||(c[1]=E=>l.$emit("resend-answer",E)),onSendAiMessage:c[2]||(c[2]=E=>l.$emit("send-ai-message",E)),onAskAi:a,onAskQuickQuestion:a},null,8,["ask","message","mcp-results","timestamp","message-type"])):N("",!0)],8,["data-message-id"]));return C.memo=w,C},c,3),128)),s.value?(S(),D("div",jh,[x("div",Wh,[(d=s.value.contents)!=null&&d.answer&&((f=s.value.contents)!=null&&f.ask)?(S(),Ge(sr,{key:0,ask:(h=s.value.contents)==null?void 0:h.ask,message:s.value.contents.answer,"mcp-results":s.value.mcpcall||[],timestamp:(b=(p=s.value.metas)==null?void 0:p.answer)==null?void 0:b.timestamp,"message-type":(v=s.value.metas)==null?void 0:v.type,"is-streaming":((g=s.value.metas)==null?void 0:g.type)==="streaming",onResend:c[5]||(c[5]=m=>l.$emit("resend-message",m)),onResendAnswer:c[6]||(c[6]=m=>l.$emit("resend-answer",m)),onSendAiMessage:c[7]||(c[7]=m=>l.$emit("send-ai-message",m)),onAskAi:a,onAskQuickQuestion:a},null,8,["ask","message","mcp-results","timestamp","message-type","is-streaming"])):N("",!0)])])):N("",!0)])],512)}}},Zh={coding:{code_review:{id:"code_review",name:"디자인",category:"개발",icon:"🔍",description:"코드의 품질, 성능, 보안을 검토합니다",template:`다음 코드를 전문적으로 리뷰해주세요:

# You are HG, 강력한 AI 코딩 에이전트야. 아래 지침을 반드시지키고 사용자요청에 따른 질문답변을 도와줘.

# #일반 규칙
# 너는 아트 디자이너이자 컬러 시스템, 경제·주식·거시·미시, 소프트웨어 알고리즘 전문가야.
# 마크다운 코드블럭과 html 태그(pre, code, h1~h6 등) 절대 사용 금지.
# 특히 html사용할때는 마크다운 코드블럭, , #,###,### 금지. 대답내용에  pre, code 안에 넣지 마
# 답변에서 헤더나 글자를 크게 할 때는 tailwind 클래스(글자크기는 text 클래스만 사용)만 써. bg-white 마진과 정렬 일정하게 .
# 중요한 키워드는 클래스로 강조하고 중복은 피해.
# 웹페이지와 프롬프트가 같이 주어지면 내용 추출·요약해서 항상 원시 html로 반환해.

# #디자인 규칙
# 출력은 카드 형태로 만들고, 배경색 쓰면 대비 높은 글자색 써서 가독성 높여.
# 여백, 정렬, 라운드 처리 같은 기본 디자인 룰로 깔끔하고 균형 잡힌 레이아웃 유지.
# 요청이 html 코드 아니면 마크다운 코드블럭 절대 금지.
# 전체모양은 잘만들어진 카드디자인으로 해줘 

# ## 검색 사용 지침
# 검색어는 1~6단어로 간결하게 정리해.
# 중복 검색 하지 말고, -, site, 따옴표 같은 연산자 쓰지 마.
# 최신 정보 필요하면 연도/날짜 포함해서 찾아.
# 이 강력한 규칙과 지침 무조건 지켜야 해. 한글로 대답`},debug_helper:{id:"debug_helper",name:"디버깅 도우미",category:"개발",icon:"🐛",description:"에러나 버그를 분석하고 해결책을 제시합니다",template:`다음 에러/버그를 분석하고 해결책을 제시해주세요:

**문제 상황:**
{problem}

**에러 메시지 (있다면):**
{error}

**관련 코드:**
{code}

**분석해주세요:**
1. 문제의 근본 원인
2. 단계별 해결 방법
3. 향후 예방 방법
4. 관련 베스트 프랙티스`},optimize_code:{id:"optimize_code",name:"코드 최적화",category:"개발",icon:"⚡",description:"코드 성능과 효율성을 개선합니다",template:`다음 코드를 성능과 효율성 관점에서 최적화해주세요:

**현재 코드:**
{code}

**최적화 요청 사항:**
{requirements}

**제공해주세요:**
1. 최적화된 코드
2. 개선된 부분 설명
3. 성능 향상 예상 효과
4. 추가 최적화 가능한 부분`}},business:{market_analysis:{id:"market_analysis",name:"시장 분석",category:"비즈니스",icon:"📊",description:"시장 동향과 경쟁사를 분석합니다",template:`다음 주제에 대한 시장 분석을 수행해주세요:

**분석 대상:** {topic}
**업종/분야:** {industry}

**분석 항목:**
1. **시장 규모 및 성장률**
   - 현재 시장 규모
   - 연간 성장률 및 전망

2. **주요 경쟁사 분석**
   - TOP 5 경쟁사
   - 각사의 강점/약점

3. **시장 트렌드**
   - 최신 기술/서비스 트렌드
   - 소비자 니즈 변화

4. **기회 요인**
   - 시장 진입 기회
   - 블루오션 영역

5. **위험 요인**
   - 시장 리스크
   - 진입 장벽

구체적인 데이터와 함께 분석 결과를 제시해주세요.`},business_plan:{id:"business_plan",name:"사업 계획서",category:"비즈니스",icon:"📋",description:"사업 계획서를 작성하거나 검토합니다",template:`다음 사업 아이디어에 대한 사업 계획서를 작성해주세요:

**사업 아이디어:** {idea}
**대상 고객:** {target}
**예상 투자금:** {budget}

**사업 계획서 구성:**

1. **사업 개요**
   - 사업 목적 및 비전
   - 제품/서비스 설명

2. **시장 분석**
   - 타겟 시장 규모
   - 경쟁사 분석

3. **마케팅 전략**
   - 고객 획득 방법
   - 마케팅 채널

4. **운영 계획**
   - 인력 구성
   - 운영 프로세스

5. **재무 계획**
   - 초기 투자 비용
   - 손익 예측 (3년)
   - 자금 조달 방안

6. **위험 관리**
   - 예상 리스크
   - 대응 방안

실행 가능하고 구체적인 계획을 제시해주세요.`}},learning:{explain_concept:{id:"explain_concept",name:"개념 설명",category:"학습",icon:"🎓",description:"복잡한 개념을 쉽게 설명합니다",template:`다음 개념을 초보자도 이해할 수 있게 쉽게 설명해주세요:

**개념:** {concept}
**학습자 수준:** {level}
**학습 목적:** {purpose}

**설명 구성:**

1. **기본 정의**
   - 개념의 핵심 의미
   - 왜 중요한가?

2. **일상 예시**
   - 실생활에서 볼 수 있는 사례
   - 비유를 통한 설명

3. **단계별 이해**
   - 쉬운 것부터 어려운 것까지
   - 점진적 학습 과정

4. **실습 방법**
   - 직접 해볼 수 있는 방법
   - 연습 문제

5. **추가 학습 자료**
   - 더 깊이 공부할 수 있는 자료
   - 관련 개념들

이해하기 쉬운 언어로 체계적으로 설명해주세요.`},study_plan:{id:"study_plan",name:"학습 계획",category:"학습",icon:"📚",description:"효과적인 학습 계획을 수립합니다",template:`다음 학습 목표에 대한 체계적인 학습 계획을 세워주세요:

**학습 주제:** {subject}
**현재 수준:** {current_level}
**목표 수준:** {target_level}
**학습 기간:** {duration}
**하루 학습 시간:** {daily_hours}

**학습 계획 구성:**

1. **학습 로드맵**
   - 단계별 학습 순서
   - 주차별 목표

2. **일일 학습 스케줄**
   - 시간대별 학습 계획
   - 과목별 시간 배분

3. **학습 자료 추천**
   - 책, 온라인 강의
   - 실습 프로젝트

4. **진도 체크 방법**
   - 주간 평가 방법
   - 이해도 확인 방법

5. **동기 부여 방법**
   - 목표 달성 보상
   - 학습 동기 유지 팁

실행 가능하고 현실적인 계획을 제시해주세요.`}},creative:{content_writing:{id:"content_writing",name:"콘텐츠 작성",category:"창작",icon:"✍️",description:"블로그, 기사, SNS 콘텐츠를 작성합니다",template:`다음 요구사항에 맞는 콘텐츠를 작성해주세요:

**콘텐츠 유형:** {type}
**주제:** {topic}
**타겟 독자:** {audience}
**글 길이:** {length}
**톤앤매너:** {tone}

**작성 요구사항:**

1. **제목**
   - 흥미를 끄는 제목
   - SEO 최적화 고려

2. **구성**
   - 도입부: 독자의 관심 유발
   - 본문: 핵심 내용 전달
   - 결론: 행동 유도 또는 요약

3. **스타일**
   - 읽기 쉬운 문체
   - 적절한 단락 구분
   - 불릿 포인트 활용

4. **SEO 고려사항**
   - 키워드 자연스럽게 포함
   - 메타 디스크립션 제안

5. **CTA (Call to Action)**
   - 독자의 다음 행동 유도
   - 구체적이고 명확한 안내

매력적이고 가치 있는 콘텐츠로 작성해주세요.`},brainstorming:{id:"brainstorming",name:"아이디어 브레인스토밍",category:"창작",icon:"💡",description:"창의적인 아이디어를 발굴합니다",template:`다음 주제에 대한 창의적인 아이디어를 브레인스토밍해주세요:

**브레인스토밍 주제:** {topic}
**목적:** {purpose}
**제약 조건:** {constraints}

**브레인스토밍 방법:**

1. **자유 발상**
   - 판단 없이 자유롭게 아이디어 생성
   - 양보다 질 우선
   - 기존 틀에서 벗어난 사고

2. **카테고리별 아이디어**
   - 실용적 아이디어
   - 혁신적 아이디어
   - 재미있는 아이디어

3. **아이디어 확장**
   - 기존 아이디어의 변형
   - 다른 분야와의 결합
   - 반대 관점에서의 접근

4. **아이디어 평가**
   - 실현 가능성
   - 창의성 수준
   - 임팩트 크기

5. **TOP 5 선정**
   - 가장 유망한 아이디어 5개
   - 각각의 장단점 분석
   - 실행 방안 제안

다양하고 창의적인 아이디어를 제시해주세요.`}},problem_solving:{decision_making:{id:"decision_making",name:"의사결정 도우미",category:"문제해결",icon:"🤔",description:"복잡한 결정을 체계적으로 분석합니다",template:`다음 상황에서 최적의 결정을 내릴 수 있도록 도와주세요:

**결정해야 할 사항:** {decision}
**배경 상황:** {context}
**제약 조건:** {constraints}

**의사결정 분석:**

1. **선택지 정리**
   - 가능한 모든 옵션 나열
   - 각 옵션의 핵심 특징

2. **평가 기준 설정**
   - 중요한 고려 요소들
   - 각 기준의 우선순위

3. **장단점 분석**
   - 각 선택지의 장점
   - 각 선택지의 단점
   - 예상되는 결과

4. **위험 요소 평가**
   - 각 선택의 리스크
   - 최악의 시나리오
   - 리스크 대응 방안

5. **권장 결정**
   - 최적의 선택 추천
   - 선택 이유
   - 실행 계획

객관적이고 논리적인 분석을 제공해주세요.`},process_improvement:{id:"process_improvement",name:"프로세스 개선",category:"문제해결",icon:"🔄",description:"업무 프로세스를 분석하고 개선합니다",template:`다음 프로세스를 분석하고 개선 방안을 제시해주세요:

**현재 프로세스:** {process}
**문제점:** {problems}
**개선 목표:** {goals}

**프로세스 개선 분석:**

1. **현재 상태 분석**
   - 프로세스 단계별 분해
   - 소요 시간 및 비용
   - 병목 구간 식별

2. **문제점 진단**
   - 비효율적인 부분
   - 불필요한 단계
   - 품질 이슈

3. **개선 아이디어**
   - 단순화 방안
   - 자동화 가능 영역
   - 품질 향상 방법

4. **개선 프로세스 설계**
   - 새로운 프로세스 흐름
   - 단계별 상세 설명
   - 예상 개선 효과

5. **실행 계획**
   - 단계별 실행 방안
   - 필요 리소스
   - 성과 측정 방법

실용적이고 구현 가능한 개선안을 제시해주세요.`}},communication:{email_writing:{id:"email_writing",name:"이메일 작성",category:"커뮤니케이션",icon:"📧",description:"전문적이고 효과적인 이메일을 작성합니다",template:`다음 상황에 맞는 이메일을 작성해주세요:

**이메일 목적:** {purpose}
**수신자:** {recipient}
**관계:** {relationship}
**긴급도:** {urgency}
**톤:** {tone}

**이메일 구성:**

1. **제목**
   - 명확하고 구체적
   - 내용을 잘 표현
   - 적절한 길이

2. **인사말**
   - 수신자와의 관계에 맞는 인사
   - 정중하고 적절한 표현

3. **본문**
   - 목적 명확히 제시
   - 논리적인 순서
   - 간결하고 명확한 표현

4. **요청사항/액션아이템**
   - 구체적인 요청
   - 명확한 데드라인
   - 필요한 정보

5. **마무리**
   - 정중한 마무리 인사
   - 연락처 정보
   - 적절한 서명

전문적이고 효과적인 이메일을 작성해주세요.`},presentation_prep:{id:"presentation_prep",name:"프레젠테이션 준비",category:"커뮤니케이션",icon:"🎤",description:"효과적인 프레젠테이션을 준비합니다",template:`다음 프레젠테이션 준비를 도와주세요:

**프레젠테이션 주제:** {topic}
**청중:** {audience}
**발표 시간:** {duration}
**목적:** {objective}

**프레젠테이션 구성:**

1. **오프닝**
   - 강력한 시작
   - 청중의 관심 끌기
   - 발표 개요 소개

2. **메인 내용**
   - 핵심 메시지 3-5개
   - 논리적 흐름
   - 데이터와 사례 활용

3. **시각자료 제안**
   - 슬라이드 구성
   - 그래프/차트 활용
   - 이미지 활용 방안

4. **스토리텔링**
   - 흥미로운 스토리
   - 개인적 경험
   - 사례 연구

5. **클로징**
   - 핵심 메시지 요약
   - 행동 유도
   - Q&A 준비

6. **발표 팁**
   - 목소리 및 제스처
   - 시간 관리
   - 긴장감 극복

청중을 사로잡는 프레젠테이션 계획을 제시해주세요.`}}},Gh={class:"p-2 sm:p-4"},Uh={class:"bg-pale-yellow-100/90 sm:from-pale-yellow-100/95 sm:via-pale-yellow-100/90 sm:to-pale-yellow-100/95 mx-auto w-full max-w-4xl overflow-hidden rounded-xl border border-border/20 shadow-lg sm:rounded-2xl sm:bg-gradient-to-br sm:shadow-xl"},Xh={class:"p-3 sm:p-6"},Yh={class:"relative mb-3 sm:mb-4"},Qh={class:"bg-pale-yellow-100/50 focus-within:bg-pale-yellow-100/70 relative overflow-hidden rounded-lg border border-border/30 transition-all duration-200 focus-within:border-primary/40 sm:rounded-xl"},Jh=["disabled","onKeydown"],Kh={key:0,class:"absolute right-2 top-2 flex items-center gap-1 rounded-full border border-destructive/30 bg-destructive/10 px-2 py-1 text-xs text-destructive sm:right-3 sm:top-3"},e1={key:1,class:"absolute right-[110px] top-2 z-50 flex items-center gap-1 rounded-full border border-primary/20 bg-primary/10 px-2 py-1 text-xs text-primary sm:right-[40px] sm:top-3"},t1={class:"space-y-2 sm:space-y-3"},u1={key:0,class:"hidden gap-2 sm:flex sm:flex-row sm:items-center"},n1={class:"flex items-center gap-2"},r1=["value"],o1={class:"flex items-center gap-2"},i1=["value"],s1={class:"flex flex-1 items-center gap-2"},a1={class:"flex flex-1 items-center gap-2"},l1=["label"],c1=["value"],d1={class:"flex items-center justify-between gap-2"},f1=["disabled"],h1={class:"hidden text-xs font-medium text-foreground lg:inline"},p1={class:"flex items-center gap-2 sm:gap-3"},g1=["disabled"],tt=40,m1=120,b1={__name:"ChatInput",props:{modelValue:String,connected:Boolean,isAnalysisMode:Boolean,isStreaming:Boolean,currentPrompt:Object,inputeBoxShowState:Boolean},emits:["update:modelValue","send-message","send-stock-message","cancel-stream","model-change","provider-change"],setup(e,{expose:t,emit:u}){const n=xr(),r=e,o=u,i=Z(null),s=Z(r.modelValue||""),a=Z(!1),l=Z(!1),c=Z(36),d=Z("groq"),f=Z(""),h=Z(""),p=Z(Zh),b=Mu(),v=Z(b.providers),g=j(()=>{const P=v.value[d.value];return P?P.models:[]}),m=()=>{const P=g.value;P.length>0&&(f.value=P[0],o("model-change",f.value)),o("provider-change",d.value)},y=()=>{o("model-change",f.value)},_=P=>({coding:"📝 개발",business:"💼 비즈니스",learning:"🎓 학습",creative:"🎨 창작",problem_solving:"🔧 문제해결",communication:"💬 커뮤니케이션"})[P]||P,k=()=>{},w=()=>{if(!h.value)return;let P=null;for(const M of Object.values(p.value))if(P=Object.values(M).find(V=>V.id===h.value),P)break;P&&(s.value=P.template,rt(()=>{C()}),h.value="")};me(()=>r.currentPrompt,P=>{P!=null&&P.model&&(f.value=P.model)},{immediate:!0});const C=()=>{if(!i.value)return;if(!s.value.trim()){c.value=tt,i.value.style.height=tt+"px";return}i.value.style.height=tt+"px";const P=i.value.scrollHeight,M=Math.max(tt,Math.min(m1,P));c.value=M,i.value.style.height=M+"px"},A=()=>{setTimeout(()=>{C()},0)},T=()=>{c.value=tt,i.value&&(i.value.style.height=tt+"px",i.value.blur())},F=()=>{a.value=!a.value},I=()=>{l.value=!l.value},H=async()=>{let P="";b.prompts.contextwindow_msg.template&&n.contextwindow&&n.contextwindow.length>2?(P+=`

${n.contextwindow}`,P+=`

${b.prompts.contextwindow_msg.template}`,P+=`

${s.value}`):P=s.value.trim();const M={content:P,provider:d.value,model:f.value,toolEnabled:a.value};if(a.value&&s.value.trim()){let E=`qqqq ${n.contextwindow} ${s.value.trim()}`;b.prompts.contextwindow_msg.template&&(E+=`

${b.prompts.contextwindow_msg.template}`),n.contextwindow.length>2&&(E+=`

${n.contextwindow}`),M.content=E}o("send-message",M),s.value="",await rt(),T()};return me(()=>r.modelValue,P=>{s.value=P,setTimeout(()=>{C()},0)}),me(s,P=>{o("update:modelValue",P),rt(()=>{C()})}),Ou(()=>{g.value.length>0&&!f.value&&(f.value=g.value[0]),setTimeout(()=>{C()},100)}),me(d,()=>{const P=g.value;P.length>0&&(f.value=P[0])},{immediate:!0}),t({textareaRef:i,resetTextareaHeight:T,selectedProvider:d,selectedModel:f}),(P,M)=>(S(),D("div",Gh,[x("div",Uh,[x("section",Xh,[x("div",Yh,[x("div",Qh,[bt(x("textarea",{"onUpdate:modelValue":M[0]||(M[0]=E=>s.value=E),style:vo({height:c.value+"px"}),disabled:!e.connected||e.isAnalysisMode,class:"w-full resize-none overflow-y-auto bg-transparent px-3 py-2 text-sm text-foreground outline-none transition-all duration-200 placeholder:text-muted-foreground disabled:opacity-50 sm:px-4 sm:py-3 sm:text-base",placeholder:"메시지 입력...",ref_key:"textareaRef",ref:i,onKeydown:[M[1]||(M[1]=un(wu(E=>e.isStreaming?P.$emit("cancel-stream"):H(),["exact","prevent"]),["enter"])),un(wu(A,["shift"]),["enter"])]},null,44,Jh),[[bo,s.value]]),l.value?(S(),D("div",Kh,[...M[7]||(M[7]=[x("span",{class:"hidden sm:inline"},"C ",-1)])])):N("",!0),a.value?(S(),D("div",e1,[...M[8]||(M[8]=[x("span",{class:"hidden sm:inline"},"툴",-1)])])):N("",!0)])]),x("div",t1,[e.currentPrompt?(S(),D("div",u1,[x("div",n1,[M[9]||(M[9]=x("label",{class:"hidden text-xs font-medium text-muted-foreground sm:inline"},"만들년",-1)),bt(x("select",{"onUpdate:modelValue":M[2]||(M[2]=E=>d.value=E),onChange:m,class:"bg-pale-yellow-100/80 w-20 rounded-lg border border-border/40 px-3 py-2 text-xs text-foreground outline-none backdrop-blur-sm transition-all duration-200 focus:border-primary/50 focus:ring-2 focus:ring-primary/10 sm:w-24"},[(S(!0),D(Q,null,J(v.value,(E,V)=>(S(),D("option",{key:V,value:V},R(E.name),9,r1))),128))],544),[[tu,d.value]])]),x("div",o1,[M[10]||(M[10]=x("label",{class:"hidden text-xs font-medium text-muted-foreground sm:inline"},"모델",-1)),bt(x("select",{"onUpdate:modelValue":M[3]||(M[3]=E=>f.value=E),onChange:y,class:"bg-pale-yellow-100/80 w-32 rounded-lg border border-border/40 px-3 py-2 text-xs text-foreground outline-none backdrop-blur-sm transition-all duration-200 focus:border-primary/50 focus:ring-2 focus:ring-primary/10 sm:w-40"},[(S(!0),D(Q,null,J(g.value,E=>(S(),D("option",{key:E,value:E},R(E),9,i1))),128))],544),[[tu,f.value]])]),x("div",s1,[M[12]||(M[12]=x("label",{class:"hidden text-xs font-medium text-muted-foreground lg:inline"},"프롬프트",-1)),x("div",a1,[bt(x("select",{"onUpdate:modelValue":M[4]||(M[4]=E=>h.value=E),onChange:k,class:"bg-pale-yellow-100/80 min-w-0 flex-1 rounded-lg border border-border/40 px-3 py-2 text-xs text-foreground outline-none backdrop-blur-sm transition-all duration-200 focus:border-primary/50 focus:ring-2 focus:ring-primary/10"},[M[11]||(M[11]=x("option",{value:""},"프롬프트 선택",-1)),(S(!0),D(Q,null,J(p.value,(E,V)=>(S(),D("optgroup",{key:V,label:_(V)},[(S(!0),D(Q,null,J(E,B=>(S(),D("option",{key:B.id,value:B.id},R(B.icon)+" "+R(B.name),9,c1))),128))],8,l1))),128))],544),[[tu,h.value]]),h.value?(S(),D("button",{key:0,onClick:w,class:"shrink-0 rounded-lg bg-gradient-to-r from-primary to-primary/80 px-3 py-2 text-xs font-medium text-primary-foreground shadow-sm transition-all duration-200 hover:scale-105 hover:shadow-md"}," 적용 ")):N("",!0)])])])):N("",!0),x("div",d1,[e.isStreaming?N("",!0):(S(),D("button",{key:0,onClick:M[5]||(M[5]=E=>P.$emit("send-stock-message")),disabled:!e.connected||!s.value.trim()||e.isAnalysisMode,class:"flex h-8 items-center gap-1 rounded-lg border border-border/40 bg-muted/60 px-2 transition-all duration-200 hover:bg-muted/80 disabled:opacity-50 sm:h-10 sm:gap-2 sm:rounded-xl sm:px-4"},[M[13]||(M[13]=x("span",{class:"text-sm sm:text-lg"},"🕯️",-1)),x("span",h1,R(O(n).contextwindow.slice(0,20)),1)],8,f1)),x("div",p1,[x("button",{onClick:F,class:G(["relative inline-flex h-6 w-10 shrink-0 items-center rounded-full transition-all duration-200 sm:h-8 sm:w-14",a.value?"bg-primary shadow-md shadow-primary/30":"border border-border/50 bg-muted/60"])},[x("span",{class:G(["inline-flex size-4 items-center justify-center rounded-full bg-pale-yellow-100 text-black shadow transition-all duration-200 sm:size-6",a.value?"translate-x-5 sm:translate-x-7":"translate-x-0.5 sm:translate-x-1"])},"S ",2)],2),x("button",{onClick:I,class:G(["relative inline-flex h-6 w-10 shrink-0 items-center rounded-full transition-all duration-200 sm:h-8 sm:w-14",l.value?"bg-primary shadow-md shadow-primary/30":"border border-border/50 bg-muted/60"])},[x("span",{class:G(["inline-flex size-4 items-center justify-center rounded-full bg-pale-yellow-100 text-primary shadow transition-all duration-200 sm:size-6",l.value?"translate-x-5 sm:translate-x-7":"translate-x-0.5 sm:translate-x-1"])}," C ",2)],2),e.isStreaming?(S(),D("button",{key:1,onClick:M[6]||(M[6]=E=>P.$emit("cancel-stream")),class:"flex h-8 items-center gap-1 rounded-lg bg-destructive px-4 font-medium text-destructive-foreground shadow-md transition-all duration-200 hover:opacity-90 sm:h-10 sm:gap-2 sm:rounded-xl sm:px-6"},[...M[15]||(M[15]=[x("span",{class:"text-xs sm:text-sm"},"중단",-1),x("svg",{class:"size-3 sm:size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):(S(),D("button",{key:0,onClick:H,disabled:!e.connected||!s.value.trim()||e.isAnalysisMode,class:"flex h-8 items-center gap-1 rounded-lg bg-primary px-4 font-medium text-primary-foreground shadow-md transition-all duration-200 hover:opacity-90 disabled:bg-muted disabled:text-muted-foreground disabled:shadow-none sm:h-10 sm:gap-2 sm:rounded-xl sm:px-6"},[...M[14]||(M[14]=[x("span",{class:"text-xs sm:text-sm"},"Send",-1),x("svg",{class:"size-3 sm:size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,g1))])])])])])]))}},lr=dt(b1,[["__scopeId","data-v-6e3cb0b1"]]),v1={class:"relative flex size-full flex-col overflow-hidden bg-gradient-to-br from-background via-background/95 to-primary/20 font-sans"},x1={class:"flex flex-1 overflow-hidden"},y1={class:"flex flex-1 flex-col"},_1={class:"shrink-0"},k1={key:1,class:"flex flex-1 items-center justify-center p-4 sm:p-6"},w1={class:"w-full max-w-2xl space-y-6"},C1={__name:"ChatView",setup(e){const t=xr(),{answerStreamState:u,threads:n,activeThreadId:r,inputMessage:o,connected:i,isStreaming:s,prompts:a,selectedPromptType:l,isAnalysisMode:c,messagesByActiveThread:d,currentPrompt:f,availableModels:h,inputeBoxShowState:p,receivedMessages:b}=xo(t),{connectWebSocket:v,sendMessage:g,cancelStream:m,closeWebSocket:y,selectModel:_}=t,k=Z(!1),w=j(()=>n.value[r.value]),C=j(()=>Object.values(n.value)),A=j(()=>{const z=d.value;return z.length?z.reduce((L,X)=>{var ce;const K=((ce=X.mcpcall)==null?void 0:ce.length)??0;return L+(K>1?K-1:0)},0):0});function T(){k.value=!k.value}function F(z){t.switchThread(z)}function I(){t.startNewThread(),k.value=!1}function H(){w.value&&(n.value[r.value].messages=[],n.value[r.value].title="(제목 없음)",n.value[r.value].updatedAt=new Date().toISOString())}function P(z){typeof z=="object"&&z.content?(g(null,z.content,z.provider,z.model),o.value=""):typeof z=="string"?(g(null,z),o.value=""):g()}function M(z){o.value=z.replace("qqqq ",""),P(z)}function E(z){o.value=z.replace("qqqq",""),P(z)}function V(z){o.value=z.replace("qqqq",""),P(z)}function B(z){_(z)}function q(z){if(z&&typeof z=="object"){Object.keys(n.value).forEach(X=>{delete n.value[X]}),Object.assign(n.value,z);const L=Object.keys(n.value);if(L.length>0){const X=L[0];(!r.value||!n.value[r.value])&&t.switchThread(X)}console.log("✅ 스레드가 성공적으로 로드되었습니다:",z)}}return Ou(()=>{Object.keys(n.value).length===0&&t.startNewThread(),v();const z=L=>{if(L.ctrlKey||L.metaKey)switch(L.key){case"n":L.preventDefault(),I();break;case"b":L.preventDefault(),T();break;case"`":L.preventDefault();break}L.key==="Escape"&&k.value&&(k.value=!1)};window.addEventListener("keydown",z),nn(()=>{window.removeEventListener("keydown",z)})}),nn(()=>{y()}),(z,L)=>{var X;return S(),D("div",v1,[Y(Yi,{connected:O(i),"message-count":O(d).length,"thread-title":(X=w.value)==null?void 0:X.title,"total-mcp-calls":A.value,"is-analysis-mode":O(c),threads:O(n),onToggleSidebar:T,onStartNewThread:I,onClearThread:H,onThreadsLoaded:q},null,8,["connected","message-count","thread-title","total-mcp-calls","is-analysis-mode","threads"]),x("div",x1,[x("div",y1,[O(p)?(S(),D(Q,{key:0},[Y(ar,{"is-streaming":O(s),messages:O(d),"current-stream-answer":O(u).currentAnswer,onResendMessage:M,onResendAnswer:E,onSendAiMessage:V},null,8,["is-streaming","messages","current-stream-answer"]),x("div",_1,[Y(lr,{modelValue:O(o),"onUpdate:modelValue":L[0]||(L[0]=K=>rn(o)?o.value=K:null),connected:O(i),"is-analysis-mode":O(c),"is-streaming":O(s),"current-prompt":O(f),"available-models":O(h),inputeBoxShowState:O(p),onSendMessage:P,onSendStockMessage:L[1]||(L[1]=K=>O(g)(O(Mu)().prompts.stock_categories)),onCancelStream:O(m),onModelChange:B},null,8,["modelValue","connected","is-analysis-mode","is-streaming","current-prompt","available-models","inputeBoxShowState","onCancelStream"])])],64)):O(u).currentAnswer?(S(),Ge(ar,{key:2,messages:O(d),"current-stream-answer":O(u).currentAnswer,onResendMessage:M,onResendAnswer:E,onSendAiMessage:V},null,8,["messages","current-stream-answer"])):(S(),D("div",k1,[x("div",w1,[L[7]||(L[7]=dr('<div class="space-y-3 text-center"><div class="mx-auto flex size-16 items-center justify-center rounded-full border border-border/30 bg-gradient-to-br from-primary/20 to-accent/20 backdrop-blur-sm"><span class="text-2xl">💬</span></div><h1 class="text-xl font-bold text-foreground sm:text-2xl">AI 채팅을 시작하세요</h1><p class="mx-auto max-w-md text-sm text-muted-foreground">질문을 입력하거나 분석할 내용을 알려주세요</p></div>',1)),Y(lr,{modelValue:O(o),"onUpdate:modelValue":L[2]||(L[2]=K=>rn(o)?o.value=K:null),connected:O(i),"is-analysis-mode":O(c),"is-streaming":O(s),"current-prompt":O(f),"available-models":O(h),onSendMessage:P,onSendStockMessage:L[3]||(L[3]=K=>O(g)(O(Mu)().prompts.stock_categories)),onCancelStream:O(m),onModelChange:B},null,8,["modelValue","connected","is-analysis-mode","is-streaming","current-prompt","available-models","onCancelStream"])])]))])]),Y(fs,{"is-open":k.value,threads:C.value,"active-thread-id":O(r),prompts:O(a),"selected-prompt-type":O(l),onClose:L[4]||(L[4]=K=>k.value=!1),onSelectThread:F,onSelectPrompt:L[5]||(L[5]=K=>l.value=K)},null,8,["is-open","threads","active-thread-id","prompts","selected-prompt-type"]),k.value?(S(),D("div",{key:0,class:"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm lg:hidden",onClick:L[6]||(L[6]=K=>k.value=!1)})):N("",!0)])}}},P1=Object.freeze(Object.defineProperty({__proto__:null,default:C1},Symbol.toStringTag,{value:"Module"}));export{ku as A,Yc as B,_i as C,Zt as D,fs as E,Si as F,ar as G,lr as H,C1 as I,P1 as J,Ku as M,Ai as P,Ei as R,Yi as _,Jc as a,Qc as b,td as c,ed as d,ud as e,Kr as f,Ur as g,eo as h,Qr as i,Td as j,nu as k,I1 as l,F1 as m,Qe as n,Ci as o,yd as p,Gd as q,M1 as r,Yt as s,E1 as t,Mi as u,Yd as v,sf as w,Df as x,bf as y,Af as z};
