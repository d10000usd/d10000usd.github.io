import{g as Se,f as T,h as $e,i as I,c as r,o as n,b as e,j as _,t as f,v as U,u as V,F as Y,z as X,B as Ce,C as _e,a as te,x as H,y as R,N as ke,A as K,D as le,l as Me,R as ee,e as je,k as Le,d as ie}from"./vendor-Cysc0BVr.js";import{u as Ne,ep as F,_ as Te}from"./index-DWszm6se.js";const we=Se("workflow",()=>{const i=T({}),b=T(null),S=T({}),v=T([{id:"data-analysis",name:"데이터 분석",icon:"📊",color:"from-blue-500 to-cyan-500"},{id:"news-research",name:"뉴스 리서치",icon:"📰",color:"from-green-500 to-emerald-500"},{id:"stock-analysis",name:"주식 분석",icon:"📈",color:"from-purple-500 to-pink-500"},{id:"automation",name:"자동화",icon:"⚡",color:"from-orange-500 to-red-500"},{id:"content-creation",name:"콘텐츠 생성",icon:"✨",color:"from-indigo-500 to-purple-500"},{id:"genomic-analysis",name:"유전체 분석",icon:"🧬",color:"from-teal-500 to-cyan-500"},{id:"ai-research",name:"AI 연구",icon:"🤖",color:"from-rose-500 to-pink-500"}]),g=$e({isExecuting:!1,currentStep:null,executionLog:[],progress:0,totalSteps:0}),N=$e({isGenerating:!1,currentPrompt:"",generatedWorkflow:null,suggestions:[]}),w=Ne(),D={"news-stock-analysis":{id:"news-stock-analysis",name:"뉴스 기반 주식 분석",description:"최신 뉴스를 검색하고 관련 주식을 분석하는 워크플로우",category:"data-analysis",icon:"📊",nodes:[{id:"news-search",type:"mcp-tool",title:"뉴스 검색",tool:"scrape",server:"news",arguments:{category:"테크",limit:10},position:{x:100,y:100}},{id:"extract-companies",type:"ai-analysis",title:"기업명 추출",prompt:"뉴스에서 언급된 주요 기업들을 추출하세요",position:{x:300,y:100}},{id:"stock-analysis",type:"mcp-tool",title:"주식 데이터 조회",tool:"fetch_stock_candles",server:"stockCandleSystem",arguments:{companies:"{{companies}}",period:"1month"},position:{x:500,y:100}}],connections:[{from:"news-search",to:"extract-companies"},{from:"extract-companies",to:"stock-analysis"}]},"market-sentiment":{id:"market-sentiment",name:"시장 심리 분석",description:"다양한 소스에서 시장 심리를 분석하는 워크플로우",category:"news-research",icon:"📰",nodes:[{id:"news-search-tech",type:"mcp-tool",title:"테크 뉴스 검색",tool:"scrape",server:"news",arguments:{category:"기술",limit:15},position:{x:100,y:50}},{id:"news-search-economy",type:"mcp-tool",title:"경제 뉴스 검색",tool:"scrape",server:"news",arguments:{category:"경제",limit:15},position:{x:100,y:200}},{id:"sentiment-analysis",type:"ai-analysis",title:"심리 분석",prompt:"뉴스들을 분석하여 전반적인 시장 심리를 평가하세요",position:{x:400,y:125}}],connections:[{from:"news-search-tech",to:"sentiment-analysis"},{from:"news-search-economy",to:"sentiment-analysis"}]},"genomic-analysis-pipeline":{id:"genomic-analysis-pipeline",name:"유전체 분석 파이프라인",description:"Redis, RAG, LangChain을 활용한 10단계 유전체 검사 워크플로우",category:"genomic-analysis",icon:"🧬",nodes:[{id:"genomic-data-collection",type:"mcp-tool",title:"유전체 데이터 수집",tool:"collect_genomic_data",server:"filesystem",arguments:{input_format:"fastq",quality_threshold:30,sample_id:"{{sample_id}}"},position:{x:100,y:80}},{id:"cache-raw-data",type:"redis-tool",title:"Raw 데이터 캐싱",tool:"cache_data",server:"redis",arguments:{key:"genomic:raw:{{sample_id}}",ttl:86400,compression:!0},position:{x:400,y:80}},{id:"quality-control",type:"ai-analysis",title:"품질 관리 및 검증",prompt:"유전체 시퀀싱 데이터의 품질을 평가하고 필터링 기준을 제시하세요. Q30 이상의 품질 점수와 GC 함량을 분석하세요.",position:{x:700,y:80}},{id:"genome-alignment",type:"mcp-tool",title:"유전체 정렬",tool:"align_genome",server:"bioinformatics",arguments:{reference:"hg38",aligner:"bwa-mem2",threads:8},position:{x:100,y:200}},{id:"variant-calling",type:"langchain-tool",title:"변이 탐지 (LangChain)",tool:"variant_detection",server:"langchain",arguments:{caller:"gatk",model:"gpt-4-genomics",confidence_threshold:.95},position:{x:400,y:200}},{id:"cache-variants",type:"redis-tool",title:"변이 데이터 캐싱",tool:"cache_structured_data",server:"redis",arguments:{key:"genomic:variants:{{sample_id}}",index:!0,searchable:!0},position:{x:700,y:200}},{id:"rag-annotation",type:"rag-tool",title:"RAG 기반 변이 어노테이션",tool:"annotate_variants",server:"rag",arguments:{knowledge_base:["clinvar","gnomad","cosmic"],embedding_model:"text-embedding-ada-002",similarity_threshold:.8},position:{x:100,y:320}},{id:"pathogenicity-prediction",type:"ai-analysis",title:"병원성 예측 분석",prompt:"ACMG 가이드라인에 따라 변이의 병원성을 분류하세요. 각 변이에 대해 Pathogenic, Likely Pathogenic, VUS, Likely Benign, Benign으로 분류하고 근거를 제시하세요.",position:{x:400,y:320}},{id:"pharmacogenomics",type:"langchain-tool",title:"약물유전체학 분석",tool:"pharmacogenomic_analysis",server:"langchain",arguments:{drug_databases:["pharmgkb","cpic"],interaction_model:"drug-gene-interaction-bert",recommendation_level:"clinical"},position:{x:700,y:320}},{id:"generate-report",type:"rag-tool",title:"임상 리포트 생성",tool:"generate_clinical_report",server:"rag",arguments:{template:"clinical_genomics_report",include_recommendations:!0,patient_context:"{{patient_info}}",format:"pdf"},position:{x:400,y:440}}],connections:[{id:"conn1",from:"genomic-data-collection",to:"cache-raw-data"},{id:"conn2",from:"cache-raw-data",to:"quality-control"},{id:"conn3",from:"quality-control",to:"genome-alignment"},{id:"conn4",from:"genome-alignment",to:"variant-calling"},{id:"conn5",from:"variant-calling",to:"cache-variants"},{id:"conn6",from:"cache-variants",to:"rag-annotation"},{id:"conn7",from:"rag-annotation",to:"pathogenicity-prediction"},{id:"conn8",from:"pathogenicity-prediction",to:"pharmacogenomics"},{id:"conn9",from:"pharmacogenomics",to:"generate-report"}]}},E=I(()=>b.value?i.value[b.value]:null),M=I(()=>Object.values(i.value).sort((l,a)=>new Date(a.updatedAt)-new Date(l.updatedAt))),y=I(()=>{const l={};return v.value.forEach(a=>{l[a.id]=Object.values(S.value).filter(d=>d.category===a.id)}),l}),$=I(()=>M.value.slice(0,5));function x(){S.value={...D}}function u(l,a="",d="automation"){const h=F(),A={id:h,name:l,description:a,category:d,nodes:[],connections:[],variables:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastExecuted:null,executionCount:0};return i.value[h]=A,A}function j(l,a=null){const d=S.value[l];if(!d)return null;const h=u(a||`${d.name} (Copy)`,d.description,d.category);return h.nodes=JSON.parse(JSON.stringify(d.nodes)),h.connections=JSON.parse(JSON.stringify(d.connections)),h.templateId=l,O(h.id),h}function p(l){const a=i.value[l];if(!a)return null;const d=u(`${a.name} (Copy)`,a.description,a.category);return d.nodes=JSON.parse(JSON.stringify(a.nodes)),d.connections=JSON.parse(JSON.stringify(a.connections)),d.variables=JSON.parse(JSON.stringify(a.variables)),d}function s(l){b.value===l&&(b.value=null),delete i.value[l]}function O(l){i.value[l]&&(b.value=l,i.value[l].updatedAt=new Date().toISOString())}function J(l,a){i.value[l]&&(Object.assign(i.value[l],a),i.value[l].updatedAt=new Date().toISOString())}function k(l,a){if(!i.value[l])return;const d={id:F(),...a,createdAt:new Date().toISOString()};return i.value[l].nodes.push(d),i.value[l].updatedAt=new Date().toISOString(),d}function c(l,a,d){if(!i.value[l])return;if(a==="bulk-update"&&d.nodes){i.value[l].nodes=d.nodes,i.value[l].updatedAt=new Date().toISOString();return}const h=i.value[l].nodes.find(A=>A.id===a);h&&(Object.assign(h,d),i.value[l].updatedAt=new Date().toISOString())}function L(l,a){if(!i.value[l])return;const d=i.value[l];d.nodes=d.nodes.filter(h=>h.id!==a),d.connections=d.connections.filter(h=>h.from!==a&&h.to!==a),d.updatedAt=new Date().toISOString()}function Q(l,a,d){if(!i.value[l])return;const h={from:a,to:d,id:F()};return i.value[l].connections.push(h),i.value[l].updatedAt=new Date().toISOString(),h}function ae(l,a){if(!i.value[l])return;const d=i.value[l];d.connections=d.connections.filter(h=>h.id!==a),d.updatedAt=new Date().toISOString()}async function de(l){N.isGenerating=!0,N.currentPrompt=l;try{const a=ue(l);return N.generatedWorkflow=a,a}catch(a){throw console.error("AI 워크플로우 생성 실패:",a),a}finally{N.isGenerating=!1}}function ue(l){const a=l.toLowerCase();let d="새 워크플로우",h=l,A="automation";const o=[],t=[];a.includes("뉴스")&&a.includes("주식")?(d="뉴스 기반 주식 분석",A="data-analysis",o.push({id:"news-search",type:"mcp-tool",title:"뉴스 검색",tool:"scrape",server:"news",arguments:{category:"테크",limit:10},position:{x:100,y:100}}),o.push({id:"extract-companies",type:"ai-analysis",title:"기업명 추출",prompt:"뉴스에서 언급된 주요 기업들을 추출하고 분석하세요",position:{x:400,y:100}}),o.push({id:"stock-analysis",type:"mcp-tool",title:"주식 데이터 조회",tool:"fetch_stock_candles",server:"stockCandleSystem",arguments:{companies:["삼성전자","SK하이닉스"],period:"1month"},position:{x:700,y:100}}),t.push({id:"conn1",from:"news-search",to:"extract-companies"},{id:"conn2",from:"extract-companies",to:"stock-analysis"})):a.includes("시장")&&a.includes("심리")?(d="시장 심리 분석",A="news-research",o.push({id:"tech-news",type:"mcp-tool",title:"기술 뉴스 수집",tool:"scrape",server:"news",arguments:{category:"기술",limit:15},position:{x:100,y:80}}),o.push({id:"economy-news",type:"mcp-tool",title:"경제 뉴스 수집",tool:"scrape",server:"news",arguments:{category:"경제",limit:15},position:{x:100,y:220}}),o.push({id:"sentiment-analysis",type:"ai-analysis",title:"시장 심리 분석",prompt:"수집된 뉴스들을 분석하여 전반적인 시장 심리와 트렌드를 평가하세요",position:{x:450,y:150}}),t.push({id:"conn1",from:"tech-news",to:"sentiment-analysis"},{id:"conn2",from:"economy-news",to:"sentiment-analysis"})):a.includes("일일")||a.includes("리포트")?(d="일일 시장 리포트",A="content-creation",o.push({id:"morning-news",type:"mcp-tool",title:"아침 뉴스 수집",tool:"scrape",server:"news",arguments:{category:"전체",limit:20},position:{x:100,y:100}}),o.push({id:"market-data",type:"mcp-tool",title:"시장 데이터 조회",tool:"fetch_stock_candles",server:"stockCandleSystem",arguments:{companies:["코스피","코스닥"],period:"1day"},position:{x:100,y:250}}),o.push({id:"report-generation",type:"ai-analysis",title:"리포트 생성",prompt:"뉴스와 시장 데이터를 종합하여 일일 시장 리포트를 작성하세요",position:{x:450,y:175}}),o.push({id:"save-report",type:"mcp-tool",title:"리포트 저장",tool:"write_file",server:"filesystem",arguments:{path:"reports/daily_report.md",content:"{{report}}"},position:{x:750,y:175}}),t.push({id:"conn1",from:"morning-news",to:"report-generation"},{id:"conn2",from:"market-data",to:"report-generation"},{id:"conn3",from:"report-generation",to:"save-report"})):a.includes("알림")||a.includes("텔레그램")?(d="스마트 알림 시스템",A="automation",o.push({id:"keyword-news",type:"mcp-tool",title:"키워드 뉴스 모니터링",tool:"scrape",server:"news",arguments:{category:"전체",limit:50,keywords:["AI","블록체인","전기차"]},position:{x:100,y:100}}),o.push({id:"importance-check",type:"ai-analysis",title:"중요도 평가",prompt:"뉴스의 중요도를 1-10으로 평가하고, 8 이상인 경우만 알림 대상으로 선별하세요",position:{x:400,y:100}}),o.push({id:"send-alert",type:"mcp-tool",title:"텔레그램 알림",tool:"send_message",server:"telegram",arguments:{message:"🚨 중요 뉴스 알림: {{news_title}}"},position:{x:700,y:100}}),t.push({id:"conn1",from:"keyword-news",to:"importance-check"},{id:"conn2",from:"importance-check",to:"send-alert"})):a.includes("뉴스")?(d="뉴스 분석",A="news-research",o.push({id:"news-search",type:"mcp-tool",title:"뉴스 검색",tool:"scrape",server:"news",arguments:{category:"테크",limit:10},position:{x:100,y:100}}),o.push({id:"news-analysis",type:"ai-analysis",title:"뉴스 분석",prompt:"수집된 뉴스를 분석하여 주요 트렌드와 인사이트를 도출하세요",position:{x:400,y:100}}),t.push({id:"conn1",from:"news-search",to:"news-analysis"})):a.includes("주식")?(d="주식 분석",A="stock-analysis",o.push({id:"stock-data",type:"mcp-tool",title:"주식 데이터 조회",tool:"fetch_stock_candles",server:"stockCandleSystem",arguments:{companies:["삼성전자","SK하이닉스"],period:"1month"},position:{x:100,y:100}}),o.push({id:"stock-analysis",type:"ai-analysis",title:"주식 분석",prompt:"주식 데이터를 분석하여 투자 인사이트와 추천사항을 제시하세요",position:{x:400,y:100}}),t.push({id:"conn1",from:"stock-data",to:"stock-analysis"})):o.push({id:"basic-task",type:"ai-analysis",title:"작업 분석",prompt:l,position:{x:200,y:150}});const C=u(d,h,A);return C.nodes=o,C.connections=t,C}async function re(l){const a=i.value[l];if(a){g.isExecuting=!0,g.currentStep=null,g.executionLog=[],g.progress=0,g.totalSteps=a.nodes.length;try{const d={},h=ce(a);for(let A=0;A<h.length;A++){const o=h[A];g.currentStep=o.id,g.progress=A/h.length*100;const t={nodeId:o.id,nodeTitle:o.title,timestamp:new Date().toISOString(),status:"running"};g.executionLog.push(t);try{const C=await me(o,d);d[o.id]=C,t.status="completed",t.result=C}catch(C){throw t.status="failed",t.error=C.message,C}}return a.lastExecuted=new Date().toISOString(),a.executionCount++,g.progress=100,g.currentStep=null,d}catch(d){throw console.error("워크플로우 실행 실패:",d),d}finally{g.isExecuting=!1}}}function ce(l){const a=[...l.nodes],d=l.connections;return a.sort((h,A)=>{const o=d.some(C=>C.to===h.id),t=d.some(C=>C.to===A.id);return o-t})}async function me(l,a){switch(l.type){case"mcp-tool":return await pe(l,a);case"ai-analysis":return await fe(l,a);case"redis-tool":return await ve(l,a);case"rag-tool":return await ge(l,a);case"langchain-tool":return await xe(l,a);case"condition":return await be(l,a);default:throw new Error(`Unknown node type: ${l.type}`)}}async function pe(l,a){const d=Z(l.arguments,a),h={tool:l.tool,server:l.server,description:l.title,arguments:d};return await w.executeMCPTool(h)}async function fe(l,a){const d=Z({prompt:l.prompt},a).prompt;return await w.sendMessage({template:d},d),{type:"ai-analysis",content:"AI 분석 결과"}}async function ve(l,a){const d={operation:l.operation,key:Z({key:l.key},a).key,value:l.value,ttl:l.ttl},h={tool:"redis_system",server:"redis-server",description:`Redis ${l.operation} operation`,arguments:d};return await w.executeMCPTool(h)}async function ge(l,a){const d=Z({query:l.query},a).query,h={tool:"rag_search",server:"rag-server",description:`RAG search: ${l.title}`,arguments:{mode:l.mode,vectorStore:l.vectorStore,query:d,topK:l.topK||5}};return await w.executeMCPTool(h)}async function xe(l,a){const d=Z({prompt:l.prompt},a).prompt,h={tool:"langchain_execute",server:"langchain-server",description:`LangChain ${l.chainType}: ${l.title}`,arguments:{chainType:l.chainType,model:l.model,prompt:d,temperature:l.temperature||.7,maxTokens:l.maxTokens||1e3}};return await w.executeMCPTool(h)}async function be(l,a){const d=l.condition||"true";try{const h=d.replace(/\{\{(\w+)\}\}/g,(o,t)=>a[t]||"null");return{type:"condition",result:h.includes("true")||h.includes("success")||!h.includes("false"),condition:h}}catch(h){return{type:"condition",result:!1,error:h.message}}}function Z(l,a){const d=JSON.parse(JSON.stringify(l)),h=o=>typeof o=="string"?o.replace(/\{\{(\w+)\}\}/g,(t,C)=>a[C]||t):o,A=o=>{if(Array.isArray(o))return o.map(h);if(typeof o=="object"&&o!==null){const t={};for(const[C,B]of Object.entries(o))t[C]=A(B);return t}return h(o)};return A(d)}function he(){x()}return{workflows:i,activeWorkflowId:b,workflowTemplates:S,workflowCategories:v,executionState:g,aiGenerationState:N,activeWorkflow:E,workflowList:M,templatesByCategory:y,recentWorkflows:$,initialize:he,createWorkflow:u,createFromTemplate:j,duplicateWorkflow:p,deleteWorkflow:s,setActiveWorkflow:O,updateWorkflow:J,addNode:k,updateNode:c,removeNode:L,addConnection:Q,removeConnection:ae,generateWorkflowFromPrompt:de,executeWorkflow:re}}),Ae={class:"h-full flex flex-col"},Be={class:"p-4 border-b border-border/30"},De={class:"flex items-center justify-between"},We={key:0,class:"flex items-center space-x-2"},Oe={class:"text-xs text-muted-foreground"},Ve={key:0,class:"flex-1 overflow-hidden flex flex-col"},Ee={class:"p-4 border-b border-border/30"},Pe={class:"border-b border-border/30"},ze={class:"flex"},He=["onClick"],Ge={class:"flex-1 overflow-y-auto"},Ie={key:0,class:"p-4"},Ue={class:"space-y-3"},qe=["onClick"],Ye={class:"flex items-center space-x-3"},Xe={class:"font-medium text-sm"},Je={class:"text-xs text-muted-foreground"},Re={key:0,class:"mt-2 ml-4 space-y-2"},Ke=["onClick"],Fe={class:"flex items-start space-x-3"},Qe={class:"w-6 h-6 rounded bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center flex-shrink-0 mt-0.5"},Ze={class:"text-xs"},et={class:"min-w-0 flex-1"},tt={class:"font-medium text-sm group-hover:text-primary transition-colors"},ot={class:"text-xs text-muted-foreground mt-1 line-clamp-2"},nt={key:1,class:"p-4"},rt={class:"space-y-2"},st=["onClick"],it={class:"flex items-center justify-between"},lt={class:"min-w-0 flex-1"},at={class:"font-medium text-sm truncate group-hover:text-primary transition-colors"},dt={class:"text-xs text-muted-foreground"},ut={class:"flex items-center space-x-1 ml-2"},ct={key:0,class:"w-2 h-2 rounded-full bg-emerald-400"},mt={key:0,class:"text-center py-8"},pt={key:1,class:"flex-1 flex flex-col items-center py-4 space-y-4"},ft=["title"],vt={class:"text-lg group-hover:scale-110 transition-transform"},gt={__name:"WorkflowSidebar",props:{expanded:{type:Boolean,default:!0}},emits:["toggle","select-template","create-workflow"],setup(i){const b=we(),S=T("categories"),v=T(["data-analysis","news-research","genomic-analysis"]),g=[{id:"categories",label:"카테고리"},{id:"recent",label:"최근 사용"}];function N(M){const y=v.value.indexOf(M);y>-1?v.value.splice(y,1):v.value.push(M)}function w(M){return Object.values(b.workflowTemplates).filter(y=>y.category===M)}function D(M){b.setActiveWorkflow(M.id)}function E(M){const y=new Date(M),x=new Date-y;return x<6e4?"방금 전":x<36e5?`${Math.floor(x/6e4)}분 전`:x<864e5?`${Math.floor(x/36e5)}시간 전`:`${Math.floor(x/864e5)}일 전`}return(M,y)=>(n(),r("div",Ae,[e("div",Be,[e("div",De,[i.expanded?(n(),r("div",We,[y[4]||(y[4]=e("div",{class:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})])],-1)),e("div",null,[y[3]||(y[3]=e("h2",{class:"font-semibold text-sm"},"워크플로우",-1)),e("p",Oe,f(U(b).workflowList.length)+"개 생성됨",1)])])):_("",!0),e("button",{onClick:y[0]||(y[0]=$=>M.$emit("toggle")),class:"p-2 rounded-lg hover:bg-muted/50 transition-colors"},[(n(),r("svg",{class:V(["w-4 h-4 transition-transform",i.expanded?"rotate-0":"rotate-180"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...y[5]||(y[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"},null,-1)])],2))])])]),i.expanded?(n(),r("div",Ve,[e("div",Ee,[e("button",{onClick:y[1]||(y[1]=$=>M.$emit("create-workflow")),class:"w-full p-3 rounded-xl bg-gradient-to-r from-primary/10 to-accent/10 border border-primary/20 hover:from-primary/20 hover:to-accent/20 transition-all duration-200 flex items-center justify-center space-x-2 group"},[...y[6]||(y[6]=[e("svg",{class:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"font-medium"},"새 워크플로우",-1)])])]),e("div",Pe,[e("nav",ze,[(n(),r(Y,null,X(g,$=>e("button",{key:$.id,onClick:x=>S.value=$.id,class:V(["flex-1 px-4 py-3 text-sm font-medium transition-colors border-b-2",S.value===$.id?"text-primary border-primary":"text-muted-foreground border-transparent hover:text-foreground hover:border-border"])},f($.label),11,He)),64))])]),e("div",Ge,[S.value==="categories"?(n(),r("div",Ie,[e("div",Ue,[(n(!0),r(Y,null,X(U(b).workflowCategories,$=>(n(),r("div",{key:$.id,class:"group"},[e("div",{onClick:x=>N($.id),class:"flex items-center justify-between p-3 rounded-xl bg-gradient-to-r from-card/50 to-background/50 hover:from-card/70 hover:to-background/70 cursor-pointer transition-all duration-200"},[e("div",Ye,[e("div",{class:V(["w-8 h-8 rounded-lg bg-gradient-to-br",$.color,"flex items-center justify-center text-white text-sm"])},f($.icon),3),e("div",null,[e("div",Xe,f($.name),1),e("div",Je,f(w($.id).length)+"개 템플릿 ",1)])]),(n(),r("svg",{class:V(["w-4 h-4 transition-transform",v.value.includes($.id)?"rotate-90":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...y[7]||(y[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,qe),v.value.includes($.id)?(n(),r("div",Re,[(n(!0),r(Y,null,X(w($.id),x=>(n(),r("div",{key:x.id,onClick:u=>M.$emit("select-template",x),class:"p-3 rounded-lg bg-gradient-to-r from-muted/30 to-background/30 hover:from-muted/50 hover:to-background/50 cursor-pointer transition-all duration-200 group"},[e("div",Fe,[e("div",Qe,[e("span",Ze,f(x.icon||"⚡"),1)]),e("div",et,[e("div",tt,f(x.name),1),e("div",ot,f(x.description),1)])])],8,Ke))),128))])):_("",!0)]))),128))])])):_("",!0),S.value==="recent"?(n(),r("div",nt,[e("div",rt,[(n(!0),r(Y,null,X(U(b).recentWorkflows,$=>(n(),r("div",{key:$.id,onClick:x=>D($),class:V(["p-3 rounded-xl cursor-pointer transition-all duration-200 group",U(b).activeWorkflowId===$.id?"bg-gradient-to-r from-primary/20 to-accent/20 border border-primary/30":"bg-gradient-to-r from-card/50 to-background/50 hover:from-card/70 hover:to-background/70"])},[e("div",it,[e("div",lt,[e("div",at,f($.name),1),e("div",dt,f(E($.updatedAt)),1)]),e("div",ut,[$.lastExecuted?(n(),r("div",ct)):_("",!0),y[8]||(y[8]=e("svg",{class:"w-4 h-4 text-muted-foreground group-hover:text-foreground transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])],10,st))),128)),U(b).recentWorkflows.length===0?(n(),r("div",mt,[...y[9]||(y[9]=[e("div",{class:"text-muted-foreground text-sm"}," 최근 워크플로우가 없습니다 ",-1)])])):_("",!0)])])):_("",!0)])])):(n(),r("div",pt,[e("button",{onClick:y[2]||(y[2]=$=>M.$emit("create-workflow")),class:"p-3 rounded-xl bg-primary/10 hover:bg-primary/20 transition-colors group",title:"새 워크플로우"},[...y[10]||(y[10]=[e("svg",{class:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),y[11]||(y[11]=e("div",{class:"w-px h-4 bg-border/50"},null,-1)),(n(!0),r(Y,null,X(U(b).workflowCategories.slice(0,4),$=>(n(),r("div",{key:$.id,class:"p-2 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors group",title:$.name},[e("div",vt,f($.icon),1)],8,ft))),128))]))]))}},xt={class:"h-full flex flex-col bg-gradient-to-br from-background/80 via-card/40 to-background/80"},bt={class:"border-b border-border/30 bg-gradient-to-r from-card/90 via-background/70 to-card/90 backdrop-blur-sm"},ht={key:0,class:"p-4 flex items-center justify-between"},yt={class:"flex items-center space-x-2"},kt={key:0,class:"flex items-center space-x-2 text-sm text-muted-foreground"},wt={key:1,class:"p-2 flex items-center justify-center"},$t={key:0,class:"flex-1 overflow-hidden flex flex-col"},Ct={class:"flex-1 overflow-y-auto p-4 space-y-4"},_t={key:0,class:"text-center py-8"},St={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-w-md mx-auto"},Mt=["onClick"],jt={class:"flex items-center space-x-3"},Lt={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center group-hover:scale-110 transition-transform"},Nt={class:"min-w-0 flex-1"},Tt={class:"font-medium text-sm"},At={class:"text-xs text-muted-foreground"},Bt={key:0,class:"mb-3"},Dt={class:"p-3 rounded-xl bg-gradient-to-r from-emerald-500/10 to-green-500/10 border border-emerald-500/20"},Wt={class:"text-sm"},Ot={class:"font-medium"},Vt={class:"text-muted-foreground"},Et={class:"mt-2 flex space-x-2"},Pt=["onClick"],zt=["onClick"],Ht={class:"text-sm"},Gt={class:"text-xs opacity-70 mt-2"},It={key:1,class:"flex justify-start"},Ut={class:"border-t border-border/30 bg-gradient-to-r from-card/80 via-background/60 to-card/80 backdrop-blur-sm"},qt={class:"p-4"},Yt={class:"flex space-x-3"},Xt={class:"flex-1 relative"},Jt=["onKeydown"],Rt=["disabled"],Kt={__name:"AIWorkflowChat",props:{collapsed:{type:Boolean,default:!1}},emits:["workflow-generated"],setup(i,{emit:b}){const S=b,v=we(),g=T(""),N=T(null),w=T([]),D=[{id:"news-stock",icon:"📊",title:"뉴스 기반 주식 분석",description:"최신 뉴스를 찾아서 관련 주식을 분석",prompt:"최신 뉴스를 검색하고 언급된 기업들의 주식 데이터를 조회하는 워크플로우를 만들어줘"},{id:"market-sentiment",icon:"📰",title:"시장 심리 분석",description:"여러 뉴스 소스에서 시장 심리 파악",prompt:"다양한 카테고리의 뉴스를 수집해서 전체적인 시장 심리를 분석하는 워크플로우를 만들어줘"},{id:"daily-report",icon:"📈",title:"일일 리포트 생성",description:"매일 자동으로 시장 리포트 생성",prompt:"매일 아침 주요 뉴스와 주식 시장 데이터를 수집해서 일일 리포트를 생성하는 워크플로우를 만들어줘"},{id:"alert-system",icon:"🔔",title:"알림 시스템",description:"특정 조건에서 텔레그램 알림",prompt:"특정 키워드가 포함된 뉴스가 나오면 텔레그램으로 알림을 보내는 워크플로우를 만들어줘"}];function E(j){g.value=j.prompt,M()}async function M(){if(!g.value.trim()||v.aiGenerationState.isGenerating)return;const j={id:F(),role:"user",content:g.value.trim(),timestamp:new Date().toISOString()};w.value.push(j);const p=g.value.trim();g.value="";try{const s=await v.generateWorkflowFromPrompt(p),O={id:F(),role:"assistant",content:`"${p}" 요청에 맞는 워크플로우를 생성했습니다. 아래에서 확인하고 적용하실 수 있습니다.`,workflow:s,timestamp:new Date().toISOString()};w.value.push(O)}catch(s){const O={id:F(),role:"assistant",content:`죄송합니다. 워크플로우 생성 중 오류가 발생했습니다: ${s.message}`,timestamp:new Date().toISOString()};w.value.push(O)}}function y(j){v.setActiveWorkflow(j.id),S("workflow-generated",j)}function $(j){v.setActiveWorkflow(j.id),S("workflow-generated",j)}function x(){w.value=[]}function u(j){return new Date(j).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})}return Ce(g,()=>{_e(()=>{N.value&&(N.value.style.height="auto",N.value.style.height=Math.min(N.value.scrollHeight,128)+"px")})}),(j,p)=>(n(),r("div",xt,[e("div",bt,[i.collapsed?(n(),r("div",wt,[...p[4]||(p[4]=[e("div",{class:"text-sm text-muted-foreground text-center"}," AI 워크플로우 생성기 ",-1)])])):(n(),r("div",ht,[p[3]||(p[3]=te('<div class="flex items-center space-x-3"><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center"><svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014.846 21H9.154a3.374 3.374 0 00-2.14-1.603l-.548-.547z"></path></svg></div><div><h3 class="font-semibold">AI 워크플로우 어시스턴트</h3><p class="text-sm text-muted-foreground">자연어로 워크플로우를 생성하세요</p></div></div>',1)),e("div",yt,[U(v).aiGenerationState.isGenerating?(n(),r("div",kt,[...p[1]||(p[1]=[e("div",{class:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"},null,-1),e("span",null,"생성 중...",-1)])])):_("",!0),e("button",{onClick:x,class:"p-2 rounded-lg hover:bg-muted/50 transition-colors",title:"대화 초기화"},[...p[2]||(p[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])]))]),i.collapsed?_("",!0):(n(),r("div",$t,[e("div",Ct,[w.value.length===0?(n(),r("div",_t,[p[5]||(p[5]=te('<div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center"><svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><h4 class="font-semibold mb-2">워크플로우를 자동 생성해드립니다</h4><p class="text-sm text-muted-foreground mb-6 max-w-md mx-auto"> &quot;뉴스 검색 후 주식 분석하는 워크플로우 만들어줘&quot;와 같이 자연스럽게 요청해보세요. </p>',3)),e("div",St,[(n(),r(Y,null,X(D,s=>e("button",{key:s.id,onClick:O=>E(s),class:"p-3 rounded-xl bg-gradient-to-r from-card/60 to-background/60 hover:from-card/80 hover:to-background/80 transition-all duration-200 text-left group"},[e("div",jt,[e("div",Lt,f(s.icon),1),e("div",Nt,[e("div",Tt,f(s.title),1),e("div",At,f(s.description),1)])])],8,Mt)),64))])])):_("",!0),(n(!0),r(Y,null,X(w.value,s=>(n(),r("div",{key:s.id,class:V(["flex",s.role==="user"?"justify-end":"justify-start"])},[e("div",{class:V(["max-w-[80%] rounded-2xl p-4 break-words",s.role==="user"?"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground":"bg-gradient-to-r from-card/90 to-background/90 backdrop-blur-sm border border-border/30"])},[s.role==="assistant"&&s.workflow?(n(),r("div",Bt,[e("div",Dt,[p[6]||(p[6]=e("div",{class:"flex items-center space-x-2 mb-2"},[e("svg",{class:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",{class:"font-semibold text-emerald-500"},"워크플로우 생성됨")],-1)),e("div",Wt,[e("div",Ot,f(s.workflow.name),1),e("div",Vt,f(s.workflow.description),1),e("div",Et,[e("button",{onClick:O=>y(s.workflow),class:"px-3 py-1 rounded-lg bg-emerald-500 text-white text-xs hover:bg-emerald-600 transition-colors"}," 적용하기 ",8,Pt),e("button",{onClick:O=>$(s.workflow),class:"px-3 py-1 rounded-lg bg-card text-foreground text-xs hover:bg-muted transition-colors"}," 편집하기 ",8,zt)])])])])):_("",!0),e("div",Ht,f(s.content),1),e("div",Gt,f(u(s.timestamp)),1)],2)],2))),128)),U(v).aiGenerationState.isGenerating?(n(),r("div",It,[...p[7]||(p[7]=[te('<div class="bg-gradient-to-r from-card/90 to-background/90 backdrop-blur-sm border border-border/30 rounded-2xl p-4"><div class="flex items-center space-x-2"><div class="flex space-x-1"><div class="w-2 h-2 bg-primary/60 rounded-full animate-bounce"></div><div class="w-2 h-2 bg-primary/60 rounded-full animate-bounce" style="animation-delay:0.1s;"></div><div class="w-2 h-2 bg-primary/60 rounded-full animate-bounce" style="animation-delay:0.2s;"></div></div><span class="text-xs text-muted-foreground">워크플로우 생성 중...</span></div></div>',1)])])):_("",!0)]),e("div",Ut,[e("div",qt,[e("div",Yt,[e("div",Xt,[H(e("textarea",{"onUpdate:modelValue":p[0]||(p[0]=s=>g.value=s),onKeydown:[ke(K(M,["prevent"]),["enter"]),ke(K(M,["meta"]),["enter"]),ke(K(M,["ctrl"]),["enter"])],placeholder:"워크플로우를 설명해주세요... (Enter로 전송, Shift+Enter로 줄바꿈)",class:"w-full p-3 pr-12 rounded-xl bg-background/80 border border-border/30 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none min-h-[44px] max-h-32",rows:"1",ref_key:"textarea",ref:N},null,40,Jt),[[R,g.value]]),e("button",{onClick:M,disabled:!g.value.trim()||U(v).aiGenerationState.isGenerating,class:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg bg-primary hover:bg-primary/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...p[8]||(p[8]=[e("svg",{class:"w-4 h-4 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,Rt)])])])])]))]))}},Ft={class:"p-4 border-b border-border/30"},Qt={class:"flex items-center justify-between"},Zt={class:"flex items-center space-x-3"},eo={class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},to={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 8.172V5L8 4z"},oo={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014.846 21H9.154a3.374 3.374 0 00-2.14-1.603l-.548-.547z"},no={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},ro={key:3,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},so={key:4,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},io={key:5,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},lo={class:"min-w-0 flex-1"},ao={class:"font-medium text-sm truncate"},uo={class:"text-xs text-muted-foreground"},co={class:"flex items-center space-x-1"},mo={class:"p-4"},po={key:0,class:"space-y-2"},fo={class:"flex items-center space-x-2"},vo={class:"text-xs bg-gradient-to-r from-primary/10 to-accent/10 px-2 py-1 rounded-full"},go={class:"flex items-center space-x-2"},xo={class:"text-xs bg-gradient-to-r from-muted/20 to-background/20 px-2 py-1 rounded-full"},bo={key:0,class:"mt-2"},ho={class:"text-xs bg-muted/20 p-2 rounded-lg font-mono max-h-20 overflow-y-auto"},yo={key:1,class:"space-y-2"},ko={class:"text-xs bg-gradient-to-r from-purple-500/10 to-pink-500/10 p-2 rounded-lg max-h-20 overflow-y-auto"},wo={key:2,class:"space-y-2"},$o={class:"flex items-center space-x-2"},Co={class:"text-xs bg-gradient-to-r from-red-500/10 to-orange-500/10 px-2 py-1 rounded-full"},_o={class:"flex items-center space-x-2"},So={class:"text-xs bg-gradient-to-r from-muted/20 to-background/20 px-2 py-1 rounded-full"},Mo={key:0,class:"flex items-center space-x-2"},jo={class:"text-xs bg-gradient-to-r from-muted/20 to-background/20 px-2 py-1 rounded-full"},Lo={key:3,class:"space-y-2"},No={class:"flex items-center space-x-2"},To={class:"text-xs bg-gradient-to-r from-blue-500/10 to-cyan-500/10 px-2 py-1 rounded-full"},Ao={class:"flex items-center space-x-2"},Bo={class:"text-xs bg-gradient-to-r from-muted/20 to-background/20 px-2 py-1 rounded-full"},Do={key:0,class:"mt-2"},Wo={class:"text-xs bg-gradient-to-r from-blue-500/10 to-cyan-500/10 p-2 rounded-lg max-h-20 overflow-y-auto"},Oo={key:4,class:"space-y-2"},Vo={class:"flex items-center space-x-2"},Eo={class:"text-xs bg-gradient-to-r from-green-500/10 to-emerald-500/10 px-2 py-1 rounded-full"},Po={class:"flex items-center space-x-2"},zo={class:"text-xs bg-gradient-to-r from-muted/20 to-background/20 px-2 py-1 rounded-full"},Ho={key:0,class:"mt-2"},Go={class:"text-xs bg-gradient-to-r from-green-500/10 to-emerald-500/10 p-2 rounded-lg max-h-20 overflow-y-auto"},Io={key:5,class:"space-y-2"},Uo={class:"text-xs bg-gradient-to-r from-orange-500/10 to-red-500/10 p-2 rounded-lg"},qo={key:6,class:"text-xs text-muted-foreground text-center py-2"},Yo={class:"absolute -left-2 top-1/2 -translate-y-1/2"},Xo={class:"absolute -right-2 top-1/2 -translate-y-1/2"},Jo={key:0,class:"absolute -top-2 -right-2"},Ro={key:0,class:"w-3 h-3 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ko={key:1,class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fo={key:2,class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qo={__name:"WorkflowNode",props:{node:{type:Object,required:!0},selected:{type:Boolean,default:!1},connecting:{type:Boolean,default:!1},executionStatus:{type:String,default:null}},emits:["select","update","delete","connect-start","connect-end","drag"],setup(i,{emit:b}){const S=b,v=i,g=T(!1),N=T({x:0,y:0});function w(){switch(v.node.type){case"mcp-tool":return"MCP 도구";case"ai-analysis":return"AI 분석";case"redis-tool":return"Redis 캐시";case"rag-tool":return"RAG 검색";case"langchain-tool":return"LangChain";case"condition":return"조건부 로직";default:return"알 수 없음"}}function D(){switch(v.node.type){case"mcp-tool":return"bg-gradient-to-br from-primary/5 via-card/90 to-accent/5";case"ai-analysis":return"bg-gradient-to-br from-purple-500/5 via-card/90 to-pink-500/5";case"redis-tool":return"bg-gradient-to-br from-red-500/5 via-card/90 to-orange-500/5";case"rag-tool":return"bg-gradient-to-br from-blue-500/5 via-card/90 to-cyan-500/5";case"langchain-tool":return"bg-gradient-to-br from-green-500/5 via-card/90 to-emerald-500/5";case"condition":return"bg-gradient-to-br from-orange-500/5 via-card/90 to-red-500/5";default:return"bg-gradient-to-br from-card/90 via-background/80 to-card/90"}}function E(){const x="w-8 h-8 rounded-lg flex items-center justify-center";switch(v.node.type){case"mcp-tool":return`${x} bg-gradient-to-br from-primary/20 to-accent/20 text-primary`;case"ai-analysis":return`${x} bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-purple-500`;case"redis-tool":return`${x} bg-gradient-to-br from-red-500/20 to-orange-500/20 text-red-500`;case"rag-tool":return`${x} bg-gradient-to-br from-blue-500/20 to-cyan-500/20 text-blue-500`;case"langchain-tool":return`${x} bg-gradient-to-br from-green-500/20 to-emerald-500/20 text-green-500`;case"condition":return`${x} bg-gradient-to-br from-orange-500/20 to-red-500/20 text-orange-500`;default:return`${x} bg-gradient-to-br from-muted/50 to-background/50 text-muted-foreground`}}function M(){const x="w-6 h-6 rounded-full flex items-center justify-center border-2 border-background shadow-lg";switch(v.executionStatus){case"running":return`${x} bg-primary text-primary-foreground`;case"completed":return`${x} bg-emerald-500 text-white`;case"failed":return`${x} bg-destructive text-destructive-foreground`;default:return`${x} bg-muted text-muted-foreground`}}function y(){const x=v.node.title||"제목 없는 노드",u=w(),j=`노드 삭제 확인

이름: ${x}
유형: ${u}

정말로 이 노드를 삭제하시겠습니까?
연결된 모든 연결선도 함께 삭제됩니다.

이 작업은 되돌릴 수 없습니다.`;confirm(j)&&S("delete",v.node.id)}function $(x){var p,s;if(x.target.closest("button"))return;g.value=!0,N.value={x:x.clientX-(((p=v.node.position)==null?void 0:p.x)||0),y:x.clientY-(((s=v.node.position)==null?void 0:s.y)||0)};const u=O=>{if(!g.value)return;const J={x:Math.max(0,O.clientX-N.value.x),y:Math.max(0,O.clientY-N.value.y)};S("drag",v.node.id,J)},j=()=>{g.value=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",j)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",j)}return(x,u)=>{var j,p;return n(),r("div",{style:le({left:`${((j=i.node.position)==null?void 0:j.x)||0}px`,top:`${((p=i.node.position)==null?void 0:p.y)||0}px`}),class:V(["workflow-node absolute w-72 rounded-2xl backdrop-blur-xl border shadow-lg cursor-move transition-all duration-200 z-20",i.selected?"border-primary/50 shadow-primary/20 shadow-xl":"border-border/30 hover:border-border/50",i.connecting?"ring-2 ring-primary/50":"",D()]),onClick:u[3]||(u[3]=K(s=>x.$emit("select",i.node.id),["stop"])),onMousedown:$},[e("div",Ft,[e("div",Qt,[e("div",Zt,[e("div",{class:V(E())},[(n(),r("svg",eo,[i.node.type==="mcp-tool"?(n(),r("path",to)):i.node.type==="ai-analysis"?(n(),r("path",oo)):i.node.type==="redis-tool"?(n(),r("path",no)):i.node.type==="rag-tool"?(n(),r("path",ro)):i.node.type==="langchain-tool"?(n(),r("path",so)):(n(),r("path",io))]))],2),e("div",lo,[e("div",ao,f(i.node.title||"제목 없음"),1),e("div",uo,f(w()),1)])]),e("div",co,[e("button",{onClick:u[0]||(u[0]=K(s=>x.$emit("connect-start",i.node.id,s),["stop"])),class:"w-6 h-6 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 hover:from-primary/40 hover:to-accent/40 transition-colors border border-primary/30 flex items-center justify-center",title:"연결"},[...u[4]||(u[4]=[e("svg",{class:"w-3 h-3 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)])]),e("button",{onClick:K(y,["stop"]),class:"w-6 h-6 rounded-full bg-destructive/10 hover:bg-destructive/20 transition-all duration-200 border border-destructive/30 flex items-center justify-center group hover:scale-110",title:"노드 삭제"},[...u[5]||(u[5]=[e("svg",{class:"w-3 h-3 text-destructive group-hover:text-destructive transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])])]),e("div",mo,[i.node.type==="mcp-tool"?(n(),r("div",po,[e("div",fo,[u[6]||(u[6]=e("span",{class:"text-xs font-medium text-muted-foreground"},"도구:",-1)),e("span",vo,f(i.node.tool||"미설정"),1)]),e("div",go,[u[7]||(u[7]=e("span",{class:"text-xs font-medium text-muted-foreground"},"서버:",-1)),e("span",xo,f(i.node.server||"미설정"),1)]),i.node.arguments&&Object.keys(i.node.arguments).length>0?(n(),r("div",bo,[u[8]||(u[8]=e("div",{class:"text-xs font-medium text-muted-foreground mb-1"},"인자:",-1)),e("div",ho,f(JSON.stringify(i.node.arguments,null,2)),1)])):_("",!0)])):i.node.type==="ai-analysis"?(n(),r("div",yo,[u[9]||(u[9]=e("div",{class:"text-xs font-medium text-muted-foreground mb-1"},"프롬프트:",-1)),e("div",ko,f(i.node.prompt||"프롬프트를 설정하세요"),1)])):i.node.type==="redis-tool"?(n(),r("div",wo,[e("div",$o,[u[10]||(u[10]=e("span",{class:"text-xs font-medium text-muted-foreground"},"작업:",-1)),e("span",Co,f(i.node.operation||"미설정"),1)]),e("div",_o,[u[11]||(u[11]=e("span",{class:"text-xs font-medium text-muted-foreground"},"키:",-1)),e("span",So,f(i.node.key||"미설정"),1)]),i.node.ttl?(n(),r("div",Mo,[u[12]||(u[12]=e("span",{class:"text-xs font-medium text-muted-foreground"},"TTL:",-1)),e("span",jo,f(i.node.ttl)+"초 ",1)])):_("",!0)])):i.node.type==="rag-tool"?(n(),r("div",Lo,[e("div",No,[u[13]||(u[13]=e("span",{class:"text-xs font-medium text-muted-foreground"},"모드:",-1)),e("span",To,f(i.node.mode||"미설정"),1)]),e("div",Ao,[u[14]||(u[14]=e("span",{class:"text-xs font-medium text-muted-foreground"},"DB:",-1)),e("span",Bo,f(i.node.vectorStore||"미설정"),1)]),i.node.query?(n(),r("div",Do,[u[15]||(u[15]=e("div",{class:"text-xs font-medium text-muted-foreground mb-1"},"쿼리:",-1)),e("div",Wo,f(i.node.query),1)])):_("",!0)])):i.node.type==="langchain-tool"?(n(),r("div",Oo,[e("div",Vo,[u[16]||(u[16]=e("span",{class:"text-xs font-medium text-muted-foreground"},"체인:",-1)),e("span",Eo,f(i.node.chainType||"미설정"),1)]),e("div",Po,[u[17]||(u[17]=e("span",{class:"text-xs font-medium text-muted-foreground"},"모델:",-1)),e("span",zo,f(i.node.model||"미설정"),1)]),i.node.prompt?(n(),r("div",Ho,[u[18]||(u[18]=e("div",{class:"text-xs font-medium text-muted-foreground mb-1"},"프롬프트:",-1)),e("div",Go,f(i.node.prompt),1)])):_("",!0)])):i.node.type==="condition"?(n(),r("div",Io,[u[19]||(u[19]=e("div",{class:"text-xs font-medium text-muted-foreground mb-1"},"조건:",-1)),e("div",Uo,f(i.node.condition||"조건을 설정하세요"),1)])):(n(),r("div",qo," 노드를 클릭하여 설정하세요 "))]),e("div",Yo,[e("div",{onClick:u[1]||(u[1]=K(s=>x.$emit("connect-end",i.node.id),["stop"])),class:"w-4 h-4 rounded-full bg-gradient-to-r from-emerald-500 to-green-500 border-2 border-background shadow-lg cursor-pointer hover:scale-110 transition-transform",title:"입력 연결"})]),e("div",Xo,[e("div",{onClick:u[2]||(u[2]=K(s=>x.$emit("connect-start",i.node.id,s),["stop"])),class:"w-4 h-4 rounded-full bg-gradient-to-r from-primary to-accent border-2 border-background shadow-lg cursor-pointer hover:scale-110 transition-transform",title:"출력 연결"})]),i.executionStatus?(n(),r("div",Jo,[e("div",{class:V(M())},[i.executionStatus==="running"?(n(),r("svg",Ro,[...u[20]||(u[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):i.executionStatus==="completed"?(n(),r("svg",Ko,[...u[21]||(u[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):i.executionStatus==="failed"?(n(),r("svg",Fo,[...u[22]||(u[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):_("",!0)],2)])):_("",!0)],38)}}},Zo=Te(Qo,[["__scopeId","data-v-bbcdd6fa"]]),en={class:"h-full flex flex-col"},tn={class:"p-4 border-b border-border/30 bg-gradient-to-r from-card/80 via-background/60 to-card/80 backdrop-blur-sm"},on={class:"flex items-center justify-between"},nn={class:"flex items-center space-x-3"},rn={class:"text-sm text-muted-foreground"},sn={key:0,class:"flex items-center space-x-1 sm:space-x-2 flex-wrap gap-1 sm:gap-0"},ln={class:"flex items-center space-x-2"},an={class:"flex-1 overflow-hidden relative"},dn={key:0,class:"h-full flex items-center justify-center"},un={key:1,class:"h-full relative"},cn={class:"absolute inset-0 w-full h-full pointer-events-none z-10"},mn=["d","onClick","onMouseover","onMouseleave"],pn={key:0,class:"absolute inset-0 w-full h-full pointer-events-none z-20"},fn=["d"],vn={class:"flex items-center justify-between"},gn={class:"flex items-center space-x-1"},xn={class:"p-4 space-y-4 max-h-96 overflow-y-auto"},bn={key:0},hn={key:1},yn={key:2},kn={class:"space-y-3"},wn={key:0},$n={key:3},Cn={class:"space-y-3"},_n={key:4},Sn={class:"space-y-3"},Mn={key:5},jn={class:"pt-2 border-t border-border/30"},Ln={class:"text-xs text-muted-foreground"},Nn={__name:"WorkflowBuilder",props:{workflow:{type:Object,default:null}},emits:["node-updated","connection-created"],setup(i,{emit:b}){const S=b,v=i,g=T(null),N=T(null),w=T(null),D=T(null),E=T(null),M=T("{}"),y=T(!1),$=T(1200),x=T(800),u=T({x:20,y:20}),j=T(!1),p=T({x:0,y:0}),s=I(()=>!w.value||!v.workflow?null:v.workflow.nodes.find(o=>o.id===w.value));Ce(s,o=>{o!=null&&o.arguments?M.value=JSON.stringify(o.arguments,null,2):M.value="{}"},{immediate:!0});function O(o){w.value=o,o||(y.value=!1)}function J(){y.value=!y.value}function k(o,t){S("node-updated",o,t)}function c(){s.value&&k(s.value.id,s.value)}function L(){try{const o=JSON.parse(M.value);s.value&&(s.value.arguments=o,c())}catch{}}function Q(o){var B,z,m;const t=(B=v.workflow)==null?void 0:B.nodes.find(P=>P.id===o),C=(t==null?void 0:t.title)||"노드";if(confirm(`"${C}"을(를) 삭제하시겠습니까?

이 작업은 되돌릴 수 없으며, 연결된 모든 연결선도 함께 삭제됩니다.`)){if((((m=(z=v.workflow)==null?void 0:z.connections)==null?void 0:m.filter(W=>W.from===o||W.to===o))||[]).forEach(W=>{re(W.id)}),v.workflow){const W=v.workflow.nodes.filter(G=>G.id!==o);S("node-updated","bulk-update",{nodes:W})}w.value===o&&(w.value=null),setTimeout(()=>{console.log(`${C} 삭제 완료`)},100)}}function ae(o,t){k(o,{position:t})}function de(o,t){if(D.value=o,g.value){const C=g.value.getBoundingClientRect();E.value={x:((t==null?void 0:t.clientX)||0)-C.left+g.value.scrollLeft,y:((t==null?void 0:t.clientY)||0)-C.top+g.value.scrollTop}}}function ue(o){D.value&&D.value!==o&&S("connection-created",{from:D.value,to:o}),D.value=null,E.value=null}function re(o){var W,G,q,oe,se,ye;const t=(G=(W=v.workflow)==null?void 0:W.connections)==null?void 0:G.find(ne=>ne.id===o);if(!t)return;const C=(oe=(q=v.workflow)==null?void 0:q.nodes)==null?void 0:oe.find(ne=>ne.id===t.from),B=(ye=(se=v.workflow)==null?void 0:se.nodes)==null?void 0:ye.find(ne=>ne.id===t.to),z=(C==null?void 0:C.title)||"알 수 없는 노드",m=(B==null?void 0:B.title)||"알 수 없는 노드",P=`연결선 삭제 확인

연결: ${z} → ${m}

이 연결선을 삭제하시겠습니까?
워크플로우의 실행 흐름이 변경될 수 있습니다.`;confirm(P)&&S("connection-created",{_delete:o})}function ce(o){if(!N.value)return;j.value=!0;const t=N.value.getBoundingClientRect();p.value={x:o.clientX-t.left,y:o.clientY-t.top};const C=z=>{if(!j.value||!g.value)return;const m=g.value.getBoundingClientRect(),P=z.clientX-m.left-p.value.x,W=z.clientY-m.top-p.value.y,G=m.width-320,q=m.height-200;u.value={x:Math.max(0,Math.min(P,G)),y:Math.max(0,Math.min(W,q))}},B=()=>{j.value=!1,document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",B)}function me(){u.value={x:20,y:20}}function pe(o){console.log("Highlighting connection:",o)}function fe(o){console.log("Unhighlighting connection:",o)}function ve(o){var m,P,W,G;const t=(P=(m=v.workflow)==null?void 0:m.nodes)==null?void 0:P.find(q=>q.id===o.from),C=(G=(W=v.workflow)==null?void 0:W.nodes)==null?void 0:G.find(q=>q.id===o.to),B=(t==null?void 0:t.title)||"알 수 없는 노드",z=(C==null?void 0:C.title)||"알 수 없는 노드";return`${B} → ${z} (클릭하여 삭제)`}function ge(o){if(D.value){D.value=null,E.value=null;return}(o.target===g.value||o.target.closest(".workflow-node")===null)&&(w.value=null,y.value=!1)}function xe(o){console.log("Drop event",o)}function be(){const o={type:"mcp-tool",title:"새 MCP 도구",tool:"",server:"",arguments:{},position:{x:200,y:200}},t=F();k(t,{...o,_create:!0}),w.value=t}function Z(){const o={type:"ai-analysis",title:"새 AI 분석",prompt:"",position:{x:400,y:200}},t=F();k(t,{...o,_create:!0}),w.value=t}function he(){const o={type:"condition",title:"새 조건부 로직",condition:"",position:{x:600,y:200}},t=F();k(t,{...o,_create:!0}),w.value=t}function l(o){var C;const t=(C=v.workflow)==null?void 0:C.nodes.find(B=>B.id===o);return(t==null?void 0:t.position)||{x:0,y:0}}function a(o){const t=l(o.from),C=l(o.to),B=288,z=120,m=t.x+B,P=t.y+z/2,W=C.x,G=C.y+z/2,q=m+(W-m)*.5,oe=P,se=m+(W-m)*.5;return`M ${m} ${P} C ${q} ${oe}, ${se} ${G}, ${W} ${G}`}function d(){if(!D.value||!E.value)return"";const o=l(D.value),t=288,C=120,B=o.x+t,z=o.y+C/2,m=E.value.x,P=E.value.y,W=B+(m-B)*.5,G=z,q=B+(m-B)*.5;return`M ${B} ${z} C ${W} ${G}, ${q} ${P}, ${m} ${P}`}function h(o){if(D.value&&g.value){const t=g.value.getBoundingClientRect();E.value={x:o.clientX-t.left+g.value.scrollLeft,y:o.clientY-t.top+g.value.scrollTop}}}function A(){const o=window.innerWidth,t=window.innerHeight;o<768?($.value=Math.max(600,o-32),x.value=Math.max(400,t-200)):o<1024?($.value=Math.max(800,o-64),x.value=Math.max(500,t-150)):o<1280?($.value=Math.max(1e3,o-400),x.value=Math.max(600,t-120)):($.value=Math.max(1200,o-700),x.value=Math.max(800,t-120))}return _e(()=>{g.value&&(g.value.addEventListener("mousemove",h),A(),window.addEventListener("resize",A))}),(o,t)=>{var C,B,z;return n(),r("div",en,[e("div",tn,[e("div",on,[e("div",nn,[t[19]||(t[19]=e("div",{class:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),e("div",null,[t[18]||(t[18]=e("h3",{class:"font-semibold"},"워크플로우 빌더",-1)),e("p",rn,f(i.workflow?`${((C=i.workflow.nodes)==null?void 0:C.length)||0}개 노드`:"워크플로우를 선택하세요"),1)])]),i.workflow?(n(),r("div",sn,[e("button",{onClick:be,class:"px-2 sm:px-3 py-1.5 rounded-lg bg-gradient-to-r from-primary/10 to-accent/10 hover:from-primary/20 hover:to-accent/20 transition-colors text-xs sm:text-sm font-medium whitespace-nowrap"},[...t[20]||(t[20]=[e("span",{class:"hidden sm:inline"},"+ MCP 도구",-1),e("span",{class:"sm:hidden"},"MCP",-1)])]),e("button",{onClick:Z,class:"px-2 sm:px-3 py-1.5 rounded-lg bg-gradient-to-r from-purple-500/10 to-pink-500/10 hover:from-purple-500/20 hover:to-pink-500/20 transition-colors text-xs sm:text-sm font-medium whitespace-nowrap"},[...t[21]||(t[21]=[e("span",{class:"hidden sm:inline"},"+ AI 분석",-1),e("span",{class:"sm:hidden"},"AI",-1)])]),e("button",{onClick:he,class:"px-2 sm:px-3 py-1.5 rounded-lg bg-gradient-to-r from-orange-500/10 to-red-500/10 hover:from-orange-500/20 hover:to-red-500/20 transition-colors text-xs sm:text-sm font-medium whitespace-nowrap"},[...t[22]||(t[22]=[e("span",{class:"hidden sm:inline"},"+ 조건부",-1),e("span",{class:"sm:hidden"},"조건",-1)])])])):_("",!0),e("div",ln,[w.value?(n(),r("button",{key:0,onClick:J,class:V(["px-2 sm:px-3 py-1.5 rounded-lg transition-all duration-200 text-xs sm:text-sm font-medium flex items-center space-x-1 sm:space-x-2 whitespace-nowrap",y.value?"bg-primary text-primary-foreground shadow-md":"bg-gradient-to-r from-muted/50 to-background/50 hover:from-muted/70 hover:to-background/70 text-foreground"])},[...t[23]||(t[23]=[te('<svg class="w-3 h-3 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><span class="hidden sm:inline">노드 설정</span><span class="sm:hidden">설정</span>',3)])],2)):_("",!0)])])]),e("div",an,[i.workflow?(n(),r("div",un,[e("div",{ref_key:"canvas",ref:g,class:"h-full overflow-auto bg-gradient-to-br from-background/50 via-card/20 to-background/50",onClick:ge,onDragover:t[1]||(t[1]=K(()=>{},["prevent"])),onDrop:xe},[t[26]||(t[26]=e("div",{class:"absolute inset-0 opacity-20 pointer-events-none"},[e("div",{class:"w-full h-full",style:{"background-image":"radial-gradient(circle, #666 1px, transparent 1px)","background-size":"20px 20px"}})],-1)),e("div",{class:"relative min-w-full min-h-full p-4 sm:p-6 lg:p-8",style:le({minWidth:$.value+"px",minHeight:x.value+"px"})},[(n(),r("svg",cn,[t[25]||(t[25]=e("defs",null,[e("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto"},[e("polygon",{points:"0 0, 10 3.5, 0 7",class:"fill-primary"})])],-1)),(n(!0),r(Y,null,X(i.workflow.connections,m=>(n(),r("path",{key:m.id,d:a(m),stroke:"hsl(var(--primary))","stroke-width":"2",fill:"none","marker-end":"url(#arrowhead)",class:"text-primary/60 hover:text-primary cursor-pointer transition-all duration-200 hover:stroke-[3]",onClick:P=>re(m.id),onMouseover:P=>pe(m.id),onMouseleave:P=>fe(m.id)},[e("title",null,f(ve(m)),1)],40,mn))),128))])),(n(!0),r(Y,null,X(i.workflow.nodes,m=>(n(),Me(Zo,{key:m.id,node:m,selected:w.value===m.id,connecting:D.value===m.id,onSelect:O,onUpdate:k,onDelete:Q,onConnectStart:t[0]||(t[0]=(P,W)=>de(P,W)),onConnectEnd:ue,onDrag:ae},null,8,["node","selected","connecting"]))),128)),D.value&&E.value?(n(),r("svg",pn,[e("path",{d:d(),stroke:"hsl(var(--primary))","stroke-width":"2","stroke-dasharray":"5,5",fill:"none",class:"opacity-60"},null,8,fn)])):_("",!0)],4)],544),s.value&&y.value?(n(),r("div",{key:0,ref_key:"propertiesPanel",ref:N,style:le({left:`${u.value.x}px`,top:`${u.value.y}px`}),class:"absolute w-72 sm:w-80 lg:w-96 bg-gradient-to-br from-card/95 via-background/90 to-card/95 backdrop-blur-xl border border-border/30 rounded-2xl shadow-2xl z-30"},[e("div",{class:V(["p-4 border-b border-border/30 cursor-move transition-colors",j.value?"bg-primary/5":"hover:bg-muted/20"]),onMousedown:ce},[e("div",vn,[t[29]||(t[29]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})]),e("h4",{class:"font-semibold"},"노드 설정")],-1)),e("div",gn,[e("button",{onClick:me,class:"p-1.5 rounded-lg hover:bg-muted/50 transition-colors",title:"위치 초기화"},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])]),e("button",{onClick:t[2]||(t[2]=m=>w.value=null),class:"p-1.5 rounded-lg hover:bg-muted/50 transition-colors",title:"닫기"},[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])],34),e("div",xn,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium mb-2"},"제목",-1)),H(e("input",{"onUpdate:modelValue":t[3]||(t[3]=m=>s.value.title=m),onInput:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"노드 제목"},null,544),[[R,s.value.title]])]),s.value.type==="mcp-tool"?(n(),r("div",bn,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium mb-2"},"도구",-1)),H(e("select",{"onUpdate:modelValue":t[4]||(t[4]=m=>s.value.tool=m),onChange:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50"},[...t[31]||(t[31]=[te('<option value="">도구 선택</option><option value="scrape">뉴스 검색 (scrape)</option><option value="fetch_stock_candles">주식 데이터 (fetch_stock_candles)</option><option value="write_file">파일 저장 (write_file)</option><option value="send_message">텔레그램 전송 (send_message)</option>',5)])],544),[[ee,s.value.tool]]),t[34]||(t[34]=e("label",{class:"block text-sm font-medium mb-2 mt-4"},"서버",-1)),H(e("select",{"onUpdate:modelValue":t[5]||(t[5]=m=>s.value.server=m),onChange:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50"},[...t[32]||(t[32]=[te('<option value="">서버 선택</option><option value="news">뉴스 시스템</option><option value="stockCandleSystem">주식 시스템</option><option value="filesystem">파일 시스템</option><option value="telegram">텔레그램</option>',5)])],544),[[ee,s.value.server]]),t[35]||(t[35]=e("label",{class:"block text-sm font-medium mb-2 mt-4"},"인자 (JSON)",-1)),H(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=m=>M.value=m),onInput:L,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50 font-mono text-sm",rows:"4",placeholder:'{"category": "테크", "limit": 10}'},null,544),[[R,M.value]])])):_("",!0),s.value.type==="ai-analysis"?(n(),r("div",hn,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium mb-2"},"프롬프트",-1)),H(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=m=>s.value.prompt=m),onInput:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50",rows:"4",placeholder:"AI에게 전달할 프롬프트를 입력하세요"},null,544),[[R,s.value.prompt]])])):_("",!0),s.value.type==="redis-tool"?(n(),r("div",yn,[e("div",kn,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium mb-2"},"작업 타입",-1)),H(e("select",{"onUpdate:modelValue":t[8]||(t[8]=m=>s.value.operation=m),onChange:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50"},[...t[37]||(t[37]=[e("option",{value:"set"},"SET (저장)",-1),e("option",{value:"get"},"GET (조회)",-1),e("option",{value:"delete"},"DELETE (삭제)",-1),e("option",{value:"exists"},"EXISTS (존재 확인)",-1)])],544),[[ee,s.value.operation]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium mb-2"},"키",-1)),H(e("input",{"onUpdate:modelValue":t[9]||(t[9]=m=>s.value.key=m),onInput:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"redis_key_name"},null,544),[[R,s.value.key]])]),s.value.operation==="set"?(n(),r("div",wn,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium mb-2"},"TTL (초)",-1)),H(e("input",{"onUpdate:modelValue":t[10]||(t[10]=m=>s.value.ttl=m),onInput:c,type:"number",class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"3600"},null,544),[[R,s.value.ttl,void 0,{number:!0}]])])):_("",!0)])])):_("",!0),s.value.type==="rag-tool"?(n(),r("div",$n,[e("div",Cn,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium mb-2"},"모드",-1)),H(e("select",{"onUpdate:modelValue":t[11]||(t[11]=m=>s.value.mode=m),onChange:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50"},[...t[41]||(t[41]=[e("option",{value:"search"},"검색",-1),e("option",{value:"index"},"인덱싱",-1),e("option",{value:"retrieve"},"검색 및 조회",-1)])],544),[[ee,s.value.mode]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium mb-2"},"벡터 데이터베이스",-1)),H(e("select",{"onUpdate:modelValue":t[12]||(t[12]=m=>s.value.vectorStore=m),onChange:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50"},[...t[43]||(t[43]=[e("option",{value:"clinvar"},"ClinVar",-1),e("option",{value:"omim"},"OMIM",-1),e("option",{value:"pharmgkb"},"PharmGKB",-1),e("option",{value:"custom"},"사용자 정의",-1)])],544),[[ee,s.value.vectorStore]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium mb-2"},"검색 쿼리",-1)),H(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=m=>s.value.query=m),onInput:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50",rows:"3",placeholder:"검색할 내용을 입력하세요"},null,544),[[R,s.value.query]])])])])):_("",!0),s.value.type==="langchain-tool"?(n(),r("div",_n,[e("div",Sn,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium mb-2"},"체인 타입",-1)),H(e("select",{"onUpdate:modelValue":t[14]||(t[14]=m=>s.value.chainType=m),onChange:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50"},[...t[46]||(t[46]=[e("option",{value:"LLMChain"},"LLM Chain",-1),e("option",{value:"SequentialChain"},"Sequential Chain",-1),e("option",{value:"ConversationChain"},"Conversation Chain",-1),e("option",{value:"VectorDBQAChain"},"Vector DB QA Chain",-1)])],544),[[ee,s.value.chainType]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium mb-2"},"모델",-1)),H(e("select",{"onUpdate:modelValue":t[15]||(t[15]=m=>s.value.model=m),onChange:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50"},[...t[48]||(t[48]=[e("option",{value:"gpt-4"},"GPT-4",-1),e("option",{value:"gpt-3.5-turbo"},"GPT-3.5 Turbo",-1),e("option",{value:"claude-3"},"Claude-3",-1),e("option",{value:"local-llm"},"Local LLM",-1)])],544),[[ee,s.value.model]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium mb-2"},"프롬프트",-1)),H(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=m=>s.value.prompt=m),onInput:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50",rows:"3",placeholder:"LangChain에 전달할 프롬프트"},null,544),[[R,s.value.prompt]])])])])):_("",!0),s.value.type==="condition"?(n(),r("div",Mn,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium mb-2"},"조건",-1)),H(e("input",{"onUpdate:modelValue":t[17]||(t[17]=m=>s.value.condition=m),onInput:c,class:"w-full p-2 rounded-lg bg-background/80 border border-border/30 focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"예: {{result}} > 100"},null,544),[[R,s.value.condition]])])):_("",!0),e("div",jn,[e("div",Ln," 위치: ("+f(Math.round(((B=s.value.position)==null?void 0:B.x)||0))+", "+f(Math.round(((z=s.value.position)==null?void 0:z.y)||0))+") ",1)])])],4)):_("",!0)])):(n(),r("div",dn,[...t[24]||(t[24]=[te('<div class="text-center"><div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-muted/50 to-background/50 flex items-center justify-center"><svg class="w-8 h-8 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><h4 class="font-semibold mb-2">워크플로우를 선택하세요</h4><p class="text-sm text-muted-foreground"> 왼쪽 사이드바에서 워크플로우를 선택하거나 새로 만들어보세요. </p></div>',1)])]))])])}}},Tn={class:"h-full flex flex-col"},An={class:"p-4 border-b border-border/30"},Bn={class:"flex items-center justify-between"},Dn={key:0,class:"flex items-center space-x-2"},Wn={class:"text-xs text-muted-foreground"},On={key:0,class:"flex-1 overflow-hidden flex flex-col"},Vn={key:0,class:"p-4 border-b border-border/30"},En={class:"space-y-3"},Pn={class:"flex items-center justify-between text-sm mb-2"},zn={class:"w-full bg-muted/30 rounded-full h-2"},Hn={key:0},Gn={class:"text-sm font-medium"},In={class:"text-xs text-muted-foreground"},Un={class:"border-b border-border/30"},qn={class:"flex"},Yn=["onClick"],Xn={key:0,class:"ml-1 px-1.5 py-0.5 rounded-full bg-primary/10 text-primary text-xs"},Jn={class:"flex-1 overflow-y-auto"},Rn={key:0,class:"p-4"},Kn={key:0,class:"text-center py-8"},Fn={key:1,class:"space-y-3"},Qn={class:"flex items-start justify-between"},Zn={class:"min-w-0 flex-1"},er={class:"flex items-center space-x-2 mb-1"},tr={class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},or={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},nr={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},rr={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},sr={class:"font-medium text-sm"},ir={class:"text-xs text-muted-foreground"},lr={key:0,class:"mt-2 p-2 rounded-lg bg-destructive/10 text-destructive text-xs"},ar={key:0,class:"ml-2"},dr={key:1,class:"p-4"},ur={key:0,class:"text-center py-8"},cr={key:1,class:"space-y-3"},mr={class:"flex items-center space-x-2 mb-2"},pr={class:"font-medium text-sm"},fr={key:0,class:"mt-2"},vr={class:"p-2 rounded-lg bg-muted/30 text-xs font-mono max-h-32 overflow-y-auto"},gr={key:2,class:"p-4"},xr={class:"space-y-4"},br={class:"grid grid-cols-2 gap-3"},hr={class:"p-3 rounded-xl bg-gradient-to-r from-emerald-500/10 to-green-500/10"},yr={class:"text-2xl font-bold text-emerald-500"},kr={class:"p-3 rounded-xl bg-gradient-to-r from-destructive/10 to-red-500/10"},wr={class:"text-2xl font-bold text-destructive"},$r={key:0,class:"space-y-2"},Cr={class:"p-3 rounded-xl bg-gradient-to-r from-card/50 to-background/50 space-y-2"},_r={class:"flex justify-between text-xs"},Sr={class:"flex justify-between text-xs"},Mr={key:1,class:"flex-1 flex flex-col items-center justify-center py-4"},jr={key:0,class:"space-y-2 text-center"},Lr={class:"text-xs text-muted-foreground"},Nr={key:1,class:"space-y-2 text-center"},Tr={__name:"WorkflowExecutor",props:{expanded:{type:Boolean,default:!0},executionState:{type:Object,required:!0}},emits:["toggle","cancel-execution"],setup(i){const b=i,S=T("logs"),v=T(null),g=I(()=>[{id:"logs",label:"로그",badge:b.executionState.executionLog.length||null},{id:"results",label:"결과",badge:N.value.length||null},{id:"stats",label:"통계"}]),N=I(()=>b.executionState.executionLog.filter(k=>k.status==="completed"&&k.result)),w=I(()=>N.value.length>0),D=I(()=>b.executionState.executionLog.filter(k=>k.status==="completed").length),E=I(()=>b.executionState.executionLog.filter(k=>k.status==="failed").length),M=I(()=>v.value?(b.executionState.isExecuting?Date.now():v.value+6e4)-v.value:0),y=I(()=>{const k=D.value;return k>0?M.value/k:0});function $(){if(!b.executionState.currentStep)return"";const k=b.executionState.executionLog.find(c=>c.nodeId===b.executionState.currentStep);return k?k.nodeTitle:"알 수 없는 단계"}function x(k){switch(k){case"completed":return"border-emerald-500";case"failed":return"border-destructive";case"running":return"border-primary";default:return"border-muted"}}function u(k){const c="w-4 h-4 flex items-center justify-center rounded-full";switch(k){case"completed":return`${c} text-emerald-500`;case"failed":return`${c} text-destructive`;case"running":return`${c} text-primary`;default:return`${c} text-muted-foreground`}}function j(k){const c="px-2 py-0.5 rounded-full text-xs font-medium";switch(k){case"completed":return`${c} bg-emerald-500/10 text-emerald-500`;case"failed":return`${c} bg-destructive/10 text-destructive`;case"running":return`${c} bg-primary/10 text-primary`;default:return`${c} bg-muted text-muted-foreground`}}function p(k){switch(k){case"completed":return"완료";case"failed":return"실패";case"running":return"실행 중";default:return"대기"}}function s(k){return new Date(k).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function O(k){return k<1e3?`${k}ms`:k<6e4?`${(k/1e3).toFixed(1)}초`:`${(k/6e4).toFixed(1)}분`}function J(k){return typeof k=="object"?JSON.stringify(k,null,2):String(k)}return b.executionState.isExecuting&&!v.value&&(v.value=Date.now()),(k,c)=>(n(),r("div",Tn,[e("div",An,[e("div",Bn,[i.expanded?(n(),r("div",Dn,[c[3]||(c[3]=e("div",{class:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500/20 to-green-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",null,[c[2]||(c[2]=e("h2",{class:"font-semibold text-sm"},"실행 모니터",-1)),e("p",Wn,f(i.executionState.isExecuting?"실행 중...":"대기 중"),1)])])):_("",!0),e("button",{onClick:c[0]||(c[0]=L=>k.$emit("toggle")),class:"p-2 rounded-lg hover:bg-muted/50 transition-colors"},[(n(),r("svg",{class:V(["w-4 h-4 transition-transform",i.expanded?"rotate-0":"rotate-180"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...c[4]||(c[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))])])]),i.expanded?(n(),r("div",On,[i.executionState.isExecuting?(n(),r("div",Vn,[e("div",En,[e("div",null,[e("div",Pn,[c[5]||(c[5]=e("span",{class:"font-medium"},"진행률",-1)),e("span",null,f(Math.round(i.executionState.progress))+"%",1)]),e("div",zn,[e("div",{class:"bg-gradient-to-r from-emerald-500 to-green-500 h-2 rounded-full transition-all duration-300",style:le({width:`${i.executionState.progress}%`})},null,4)])]),i.executionState.currentStep?(n(),r("div",Hn,[c[6]||(c[6]=e("div",{class:"text-sm text-muted-foreground mb-1"},"현재 실행 중",-1)),e("div",Gn,f($()),1)])):_("",!0),e("div",In,f(i.executionState.executionLog.filter(L=>L.status==="completed").length)+" / "+f(i.executionState.totalSteps)+" 단계 완료 ",1),e("button",{onClick:c[1]||(c[1]=L=>k.$emit("cancel-execution")),class:"w-full px-3 py-2 rounded-lg bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors text-sm font-medium"}," 실행 취소 ")])])):_("",!0),e("div",Un,[e("nav",qn,[(n(!0),r(Y,null,X(g.value,L=>(n(),r("button",{key:L.id,onClick:Q=>S.value=L.id,class:V(["flex-1 px-3 py-2 text-xs font-medium transition-colors border-b-2",S.value===L.id?"text-primary border-primary":"text-muted-foreground border-transparent hover:text-foreground hover:border-border"])},[je(f(L.label)+" ",1),L.badge?(n(),r("span",Xn,f(L.badge),1)):_("",!0)],10,Yn))),128))])]),e("div",Jn,[S.value==="logs"?(n(),r("div",Rn,[i.executionState.executionLog.length===0?(n(),r("div",Kn,[...c[7]||(c[7]=[e("div",{class:"w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-muted/50 to-background/50 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),e("div",{class:"text-sm text-muted-foreground"}," 실행 로그가 없습니다 ",-1)])])):(n(),r("div",Fn,[(n(!0),r(Y,null,X(i.executionState.executionLog,(L,Q)=>(n(),r("div",{key:Q,class:V(["p-3 rounded-xl bg-gradient-to-r from-card/50 to-background/50 border-l-4",x(L.status)])},[e("div",Qn,[e("div",Zn,[e("div",er,[e("div",{class:V(u(L.status))},[(n(),r("svg",tr,[L.status==="completed"?(n(),r("path",or)):L.status==="failed"?(n(),r("path",nr)):(n(),r("path",rr))]))],2),e("span",sr,f(L.nodeTitle),1),e("span",{class:V(j(L.status))},f(p(L.status)),3)]),e("div",ir,f(s(L.timestamp)),1),L.error?(n(),r("div",lr,f(L.error),1)):_("",!0)]),L.status==="running"?(n(),r("div",ar,[...c[8]||(c[8]=[e("div",{class:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"},null,-1)])])):_("",!0)])],2))),128))]))])):_("",!0),S.value==="results"?(n(),r("div",dr,[w.value?(n(),r("div",cr,[(n(!0),r(Y,null,X(N.value,(L,Q)=>(n(),r("div",{key:Q,class:"p-3 rounded-xl bg-gradient-to-r from-card/50 to-background/50"},[e("div",mr,[c[10]||(c[10]=e("div",{class:"w-4 h-4 text-emerald-500"},[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("span",pr,f(L.nodeTitle),1)]),L.result?(n(),r("div",fr,[c[11]||(c[11]=e("div",{class:"text-xs text-muted-foreground mb-1"},"실행 결과:",-1)),e("div",vr,f(J(L.result)),1)])):_("",!0)]))),128))])):(n(),r("div",ur,[...c[9]||(c[9]=[e("div",{class:"w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-muted/50 to-background/50 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1),e("div",{class:"text-sm text-muted-foreground"}," 실행 결과가 없습니다 ",-1)])]))])):_("",!0),S.value==="stats"?(n(),r("div",gr,[e("div",xr,[e("div",br,[e("div",hr,[e("div",yr,f(D.value),1),c[12]||(c[12]=e("div",{class:"text-xs text-muted-foreground"},"성공한 단계",-1))]),e("div",kr,[e("div",wr,f(E.value),1),c[13]||(c[13]=e("div",{class:"text-xs text-muted-foreground"},"실패한 단계",-1))])]),v.value?(n(),r("div",$r,[c[16]||(c[16]=e("div",{class:"text-sm font-medium"},"성능 정보",-1)),e("div",Cr,[e("div",_r,[c[14]||(c[14]=e("span",{class:"text-muted-foreground"},"실행 시간",-1)),e("span",null,f(O(M.value)),1)]),e("div",Sr,[c[15]||(c[15]=e("span",{class:"text-muted-foreground"},"평균 단계 시간",-1)),e("span",null,f(O(y.value)),1)])])])):_("",!0)])])):_("",!0)])])):(n(),r("div",Mr,[i.executionState.isExecuting?(n(),r("div",jr,[c[17]||(c[17]=e("div",{class:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),e("div",Lr,f(Math.round(i.executionState.progress))+"%",1)])):(n(),r("div",Nr,[...c[18]||(c[18]=[e("div",{class:"w-8 h-8 rounded-lg bg-gradient-to-br from-muted/50 to-background/50 flex items-center justify-center mx-auto"},[e("svg",{class:"w-5 h-5 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1),e("div",{class:"text-xs text-muted-foreground"},"대기",-1)])]))]))]))}},Ar={class:"flex h-screen bg-background text-foreground"},Br={class:"flex-1 flex flex-col min-w-0"},Dr={class:"h-16 border-b border-border/30 bg-gradient-to-r from-card/90 via-background/70 to-card/90 backdrop-blur-xl flex items-center justify-between px-6"},Wr={class:"flex items-center space-x-4"},Or={key:0,class:"text-sm text-muted-foreground"},Vr={class:"flex items-center space-x-3"},Er=["disabled"],Pr={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},zr={class:"flex-1 flex overflow-hidden"},Hr={class:"flex-1 flex flex-col"},Ur={__name:"ToolcallApiView",setup(i){const b=we(),S=T(!0),v=T(!0),g=T("split"),N=T(!1),w=I(()=>b.activeWorkflow);function D(){const p=["chat","split","builder"],s=p.indexOf(g.value);g.value=p[(s+1)%p.length]}function E(p){const s=b.createFromTemplate(p.id);s&&b.setActiveWorkflow(s.id)}function M(){const p=b.createWorkflow("새 워크플로우");b.setActiveWorkflow(p.id)}function y(p){b.setActiveWorkflow(p.id),g.value="split"}function $(p,s){if(w.value)if(s._create){const{_create:O,...J}=s,k=b.addNode(w.value.id,J);k&&Object.assign(k,{id:p})}else s._delete?b.removeNode(w.value.id,p):b.updateNode(w.value.id,p,s)}function x(p){w.value&&(p._delete?b.removeConnection(w.value.id,p._delete):p.from&&p.to&&b.addConnection(w.value.id,p.from,p.to))}async function u(){if(w.value)try{await b.executeWorkflow(w.value.id),v.value=!0}catch(p){console.error("워크플로우 실행 실패:",p)}}function j(){b.executionState.isExecuting=!1}return Le(()=>{b.initialize();const p=()=>{const s=window.innerWidth;s<768?(S.value=!1,v.value=!1,N.value=!1):s<1024?(S.value=!1,v.value=!1):s<1280?(S.value=!0,v.value=!1):(S.value=!0,v.value=!0)};return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}}),(p,s)=>(n(),r("div",Ar,[e("div",{class:V(["transition-all duration-300 ease-in-out border-r border-border/30 bg-gradient-to-b from-card/95 via-background/90 to-card/95 backdrop-blur-xl",S.value?"w-80":"w-16"])},[ie(gt,{expanded:S.value,onToggle:s[0]||(s[0]=O=>S.value=!S.value),onSelectTemplate:E,onCreateWorkflow:M},null,8,["expanded"])],2),e("div",Br,[e("div",Dr,[e("div",Wr,[s[3]||(s[3]=e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-3 h-3 rounded-full bg-gradient-to-r from-emerald-400 to-green-500 animate-pulse"}),e("h1",{class:"text-xl font-bold bg-gradient-to-r from-foreground to-muted-foreground bg-clip-text text-transparent"}," 워크플로우 디자이너 ")],-1)),w.value?(n(),r("div",Or,f(w.value.name),1)):_("",!0)]),e("div",Vr,[w.value?(n(),r("button",{key:0,onClick:u,disabled:U(b).executionState.isExecuting,class:"px-4 py-2 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:from-emerald-600 hover:to-green-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[U(b).executionState.isExecuting?(n(),r("div",Pr)):_("",!0),e("span",null,f(U(b).executionState.isExecuting?"실행 중...":"실행"),1)],8,Er)):_("",!0),e("button",{onClick:D,class:"p-2 rounded-xl bg-gradient-to-r from-muted/80 to-card/60 hover:from-muted hover:to-card/80 transition-all duration-200"},[...s[4]||(s[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])])]),e("div",zr,[e("div",Hr,[e("div",{class:V(["transition-all duration-300 border-b border-border/30",g.value==="split"?"h-1/2":g.value==="chat"?"flex-1":"h-20"])},[ie(Kt,{collapsed:g.value==="builder",onWorkflowGenerated:y},null,8,["collapsed"])],2),g.value!=="chat"?(n(),r("div",{key:0,class:V(["transition-all duration-300 bg-gradient-to-br from-background/50 via-card/30 to-background/50",g.value==="split"?"h-1/2":"flex-1"])},[ie(Nn,{workflow:w.value,onNodeUpdated:$,onConnectionCreated:x},null,8,["workflow"])],2)):_("",!0)])])]),e("div",{class:V(["transition-all duration-300 ease-in-out border-l border-border/30 bg-gradient-to-b from-card/95 via-background/90 to-card/95 backdrop-blur-xl",v.value?"w-96":"w-16"])},[ie(Tr,{expanded:v.value,"execution-state":U(b).executionState,onToggle:s[1]||(s[1]=O=>v.value=!v.value),onCancelExecution:j},null,8,["expanded","execution-state"])],2),N.value?(n(),r("div",{key:0,onClick:s[2]||(s[2]=O=>N.value=!1),class:"fixed inset-0 bg-black/50 z-40 lg:hidden"})):_("",!0)]))}};export{Ur as default};
