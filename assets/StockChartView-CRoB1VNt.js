import{h as Xe,g as I,c as q,k as ve,a as x,o as u,b as e,j as X,n as U,v as n,e as M,f as pe,t as z,x as he,y as Ae,F as oe,d as re,z as Fe,l as fe,A as _e,B as Me,m as Te,C as Be,w as Le,T as Re,D as Ze,E as He,G as Se}from"./vendor-B2NpzAT_.js";import{S as Ke,g as Je}from"./index-spEoLyNZ.js";import{c as de,S as Qe,E as $e,a as et}from"./index-GiS0x85p.js";import{X as ze,R as Ve,T as Ne,P as tt,C as De,a as Pe,D as je,b as st,I as ot}from"./x-Dr3c4YXS.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=de("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=de("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=de("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=de("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=de("Columns2Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=de("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=de("Grid3x3Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=de("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=de("TargetIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),be=Xe("stockChart",()=>{const V=I(null),o=I(!1),j=I(null),g=I(16),d=I(10),_=I([]),W=I({theme:"dark",showVolume:!0,showMA:!0,maTypes:[5,10,20,60],indicators:["RSI","MACD"],timeRange:"1Y"}),T=I(1),E=I(null),b=async(r=null,l=null)=>{try{o.value=!0,j.value=null;const i=await fetch(Ke.ALL_STOCKS);if(!i.ok)throw new Error("주식 데이터를 불러올 수 없습니다");const w=(await i.text()).replace(/: ?NaN/g,": null"),h=JSON.parse(w);if(r&&l){const L=new Date(r),R=new Date(l);Object.keys(h).forEach(k=>{Object.keys(h[k]).forEach($=>{const S=h[k][$];Array.isArray(S)&&(h[k][$]=S.filter(J=>{const H=new Date(J.Date);return H>=L&&H<=R}))})})}V.value=h}catch(i){j.value=i.message,console.error("주식 데이터 로딩 실패:",i)}finally{o.value=!1}},C=(r,l)=>{const i=_.value.find(R=>R.sector===r&&R.company===l);if(i)return i.isActive=!0,i.id;_.value.length>=g.value&&_.value.shift();const v=`chart_${Je()}`,w={id:v,sector:r,company:l,isActive:!0,createdAt:new Date,settings:{showVolume:!0,showMA:!0,maTypes:[5,10,20,60],indicators:["RSI"],zoomLevel:1,panPosition:{x:0,y:0},crosshairData:null,dateRange:null}};_.value.push(w);const h=_.value.filter(R=>R.isActive),L=h.length;if(L>=1){if(A.value||(A.value=!0),!D.value||L===1){const R=h.sort((k,$)=>new Date(k.createdAt)-new Date($.createdAt))[0];R&&(D.value=R.id)}c.value=[],h.forEach(R=>{R.id!==D.value&&c.value.length<d.value&&c.value.push(R.id)})}return v},p=r=>{const l=_.value.findIndex(i=>i.id===r);l!==-1&&(_.value.splice(l,1),B())},F=r=>{const l=_.value.find(i=>i.id===r);l&&(l.isActive=!l.isActive,B())},B=()=>{const r=_.value.filter(i=>i.isActive),l=r.length;if(l===0)A.value=!1,c.value=[],D.value=null;else if(l>=1){if(A.value||(A.value=!0),!r.find(v=>v.id===D.value)){const v=r.sort((w,h)=>new Date(w.createdAt)-new Date(h.createdAt))[0];v&&(D.value=v.id)}c.value=[],r.forEach(v=>{v.id!==D.value&&c.value.length<d.value&&c.value.push(v.id)})}},P=(r,l)=>{const i=_.value.find(v=>v.id===r);i&&(i.settings={...i.settings,...l})},Z=()=>{_.value=[]},ee=r=>{W.value={...W.value,...r}},te=r=>{T.value=Math.max(.1,Math.min(10,r)),_.value.forEach(l=>{l.isActive&&(l.settings.zoomLevel=r)})},le=(r,l)=>{E.value={start:r,end:l},_.value.forEach(i=>{i.isActive&&(i.settings.dateRange={start:r,end:l})})},se=(r,l)=>{const i=_.value.find(v=>v.id===r);i&&(i.settings.crosshairData=l)},A=I(!1),c=I([]),D=I(null),ae=()=>{A.value=!A.value,A.value||(c.value=[])},f=r=>{const l=c.value.indexOf(r);l===-1?c.value.length<d.value&&c.value.push(r):c.value.splice(l,1)},y=()=>{c.value=[],D.value=null},O=r=>{D.value&&!c.value.includes(D.value)&&c.value.length<d.value&&c.value.push(D.value),D.value=r;const l=c.value.indexOf(r);l!==-1&&c.value.splice(l,1)},Y=r=>D.value===r,N=async(r,l)=>{await b(r,l)},K=(r,l)=>{if(console.log("convertCandleTimeframe 호출:",{timeframe:l,일봉개수:r==null?void 0:r.length}),!r||r.length===0)return[];if(l==="1D")return console.log("일봉 반환:",r.length,"개"),r;const i={};r.forEach(w=>{const h=new Date(w.Date);let L;switch(l){case"1W":{const R=h.getFullYear(),k=ue(h);L=`${R}-W${k.toString().padStart(2,"0")}`;break}case"1M":{L=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;break}case"3M":{const R=h.getFullYear(),k=Math.floor(h.getMonth()/3)+1;L=`${R}-Q${k}`;break}default:L=w.Date}i[L]||(i[L]=[]),i[L].push(w)});const v=[];return Object.keys(i).sort().forEach(w=>{const h=i[w].sort(($,S)=>new Date($.Date)-new Date(S.Date));if(h.length===0)return;const L=h[0],R=h[h.length-1],k={Date:R.Date,Open:L.Open,Close:R.Close,High:Math.max(...h.map($=>$.High)),Low:Math.min(...h.map($=>$.Low)),Volume:h.reduce(($,S)=>$+S.Volume,0),Change:(R.Close-L.Open)/L.Open,UpDown:R.Close>=L.Open?1:-1};v.push(k)}),console.log(`${l} 변환 완료:`,v.length,"개 캔들"),v},ue=r=>{const l=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),i=l.getUTCDay()||7;l.setUTCDate(l.getUTCDate()+4-i);const v=new Date(Date.UTC(l.getUTCFullYear(),0,1));return Math.ceil(((l-v)/864e5+1)/7)},me=q(()=>V.value?Object.keys(V.value):[]),ye=q(()=>{if(!V.value)return{};const r={};return Object.keys(V.value).forEach(l=>{r[l]=Object.keys(V.value[l]||{})}),r}),Q=q(()=>_.value.filter(r=>r.isActive)),s=r=>{var v;const l=_.value.find(w=>w.id===r);if(!l||!V.value)return null;const i=((v=V.value[l.sector])==null?void 0:v[l.company])||[];return i.length===0?null:t(i,l.settings)},t=(r,l={})=>{if(!r||r.length===0)return{candlestickData:[],volumeData:[],dates:[],closes:[],ma5:[],ma10:[],ma20:[],ma60:[],rsi:[],macd:{macd:[],signal:[],histogram:[]}};const i=[],v=[],w=[],h=[];r.forEach(k=>{w.push(k.Date),i.push([k.Open,k.Close,k.Low,k.High]),v.push(k.Volume),h.push(k.Close)});const L=k=>{const $=[];for(let S=0;S<h.length;S++)if(S<k-1)$.push(null);else{const J=h.slice(S-k+1,S+1).reduce((H,ce)=>H+ce,0);$.push(J/k)}return $},R=(k=14)=>{const $=[];let S=0,J=0;for(let H=0;H<h.length;H++){if(H===0){$.push(null);continue}const ce=h[H]-h[H-1],we=ce>0?ce:0,ge=ce<0?-ce:0;if(H<k)if(S+=we,J+=ge,H===k-1){const ne=S/k,xe=J/k,ke=ne/xe;$.push(100-100/(1+ke))}else $.push(null);else{const ne=(S*(k-1)+we)/k,xe=(J*(k-1)+ge)/k,ke=ne/xe;$.push(100-100/(1+ke)),S=ne*k,J=xe*k}}return $};return{candlestickData:i,volumeData:v,dates:w,closes:h,ma5:L(5),ma10:L(10),ma20:L(20),ma60:L(60),rsi:R(14)}},m=q(()=>{if(!A.value||c.value.length===0&&!D.value)return null;const r={charts:[],commonDates:[],benchmarkData:null},l=[...c.value];D.value&&!l.includes(D.value)&&l.unshift(D.value);let i=null,v=null;if(l.forEach((w,h)=>{var R;const L=_.value.find(k=>k.id===w);if(L&&V.value){const k=((R=V.value[L.sector])==null?void 0:R[L.company])||[],$=t(k,L.settings);if($.dates.length>0){const S=w===D.value;let J,H;if(S){const ge=$.closes[0];J=$.closes.map(ne=>ne/ge*100),H=J.map(()=>100),i=$.closes,v=$.dates,r.benchmarkData={id:w,sector:L.sector,company:L.company,dates:$.dates,closes:$.closes}}else{const ge=$.closes[0];J=$.closes.map(ne=>ne/ge*100),i&&v?H=$.closes.map((ne,xe)=>{const ke=$.dates[xe],Ee=v.indexOf(ke);if(Ee!==-1){const Ye=i[Ee],We=i[0],Ge=$.closes[0],qe=(Ye/We-1)*100;return(ne/Ge-1)*100-qe+100}return 100}):H=J}const ce=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899"],we={id:w,sector:L.sector,company:L.company,dates:$.dates,closes:$.closes,normalizedPrices:J,relativePrices:H,isBenchmark:S,color:S?"#dc2626":ce[(h-1)%ce.length],lineWidth:S?4:2};r.charts.push(we)}}}),r.charts.length>1){const w=r.charts.map(h=>h.dates);r.commonDates=w.reduce((h,L)=>h.filter(R=>L.includes(R)))}else r.charts.length===1&&(r.commonDates=r.charts[0].dates);return r}),a=r=>{var $;const l=_.value.find(S=>S.id===r);if(!l||!V.value)return null;const i=(($=V.value[l.sector])==null?void 0:$[l.company])||[];if(i.length===0)return null;const v=i[i.length-1],w=i[i.length-2],h=i.map(S=>S.Close),L=Math.max(...h),R=Math.min(...h),k=i.reduce((S,J)=>S+J.Volume,0)/i.length;return{chartId:r,sector:l.sector,company:l.company,currentPrice:v.Close,change:v.Change,changePercent:w?((v.Close-w.Close)/w.Close*100).toFixed(2):0,high52Week:L,low52Week:R,avgVolume:Math.round(k),marketCap:v.Close*v.Volume,dataPoints:i.length}},G=q(()=>_.value.filter(r=>r.isActive).map(r=>a(r.id)).filter(r=>r!==null));return{stockData:V,isLoading:o,error:j,maxCharts:g,activeCharts:_,chartSettings:W,globalZoomLevel:T,globalDateRange:E,comparisonMode:A,comparisonCharts:c,benchmarkChart:D,loadStockData:b,addChart:C,removeChart:p,toggleChart:F,updateChartSettings:P,clearAllCharts:Z,updateGlobalChartSettings:ee,setGlobalZoomLevel:te,setGlobalDateRange:le,setCrosshairData:se,toggleComparisonMode:ae,toggleComparisonChart:f,clearComparison:y,setBenchmarkChart:O,isBenchmarkChart:Y,filterDataByDateRange:N,convertCandleTimeframe:K,exportChartData:(r,l="csv")=>{var $;const i=_.value.find(S=>S.id===r);if(!i||!V.value)return;const v=(($=V.value[i.sector])==null?void 0:$[i.company])||[];if(v.length===0)return;let w="";const h=`${i.company}_${i.sector}_stock_data`;l==="csv"?(w=`Date,Open,High,Low,Close,Volume,Change
`,w+=v.map(S=>`${S.Date},${S.Open},${S.High},${S.Low},${S.Close},${S.Volume},${S.Change}`).join(`
`)):l==="json"&&(w=JSON.stringify({company:i.company,sector:i.sector,data:v},null,2));const L=new Blob([w],{type:l==="csv"?"text/csv":"application/json"}),R=URL.createObjectURL(L),k=document.createElement("a");k.href=R,k.download=`${h}.${l}`,k.click(),URL.revokeObjectURL(R)},exportComparisonData:(r="csv")=>{if(!m.value||c.value.length===0)return;let l="";const i="stock_comparison_data";if(r==="csv"){const L=m.value.charts;l="Date,"+L.map(R=>`${R.company}_Price,${R.company}_Normalized`).join(",")+`
`,m.value.commonDates.forEach(R=>{const k=[R];L.forEach($=>{const S=$.dates.indexOf(R);S!==-1?k.push($.closes[S],$.normalizedPrices[S].toFixed(2)):k.push("","")}),l+=k.join(",")+`
`})}else r==="json"&&(l=JSON.stringify(m.value,null,2));const v=new Blob([l],{type:r==="csv"?"text/csv":"application/json"}),w=URL.createObjectURL(v),h=document.createElement("a");h.href=w,h.download=`${i}.${r}`,h.click(),URL.revokeObjectURL(w)},availableSectors:me,availableCompanies:ye,activeChartsData:Q,comparisonData:m,allChartsStats:G,getChartData:s,getChartStats:a,processStockData:t,updateComparisonAfterToggle:B}}),mt={class:"flex h-full flex-col overflow-y-auto rounded-l-lg sm:rounded-l-2xl border border-border bg-pale-yellow-100 p-2 sm:p-3"},pt={class:"mb-3 sm:mb-4 flex flex-col sm:flex-row sm:flex-wrap sm:items-center sm:justify-between gap-2 sm:gap-4"},ft={class:"flex flex-wrap gap-1 sm:gap-2"},vt={class:"mb-6"},gt={class:"space-y-3"},xt={class:"relative"},ht={class:"flex flex-wrap gap-1.5 sm:gap-2"},bt=["onClick"],yt={key:0,class:"mb-4 sm:mb-6"},kt={class:"mb-3 sm:mb-4 flex items-center justify-between"},_t={class:"flex items-center gap-1.5 sm:gap-2 rounded-full bg-primary/10 px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-medium text-primary"},Ct={class:"space-y-2"},wt=["onClick"],$t={class:"flex cursor-pointer items-center justify-between p-3 sm:p-4 pl-4 sm:pl-5"},Dt={class:"min-w-0 flex-1"},zt={class:"mb-1 flex items-center gap-1.5 sm:gap-2"},St={class:"truncate text-xs sm:text-sm font-semibold text-foreground"},At={key:0,class:"shrink-0 rounded-full border border-red-200 bg-red-100 px-1.5 sm:px-2 py-0.5 text-xs font-bold text-red-700"},Mt={key:1,class:"shrink-0 rounded-full border border-blue-200 bg-blue-100 px-1.5 sm:px-2 py-0.5 text-xs font-medium text-blue-700"},Lt={key:2,class:"shrink-0 rounded-full bg-gray-100 px-1.5 sm:px-2 py-0.5 text-xs font-medium text-gray-500"},Rt={class:"flex items-center gap-2 sm:gap-3 text-xs"},Pt={class:"text-muted-foreground"},jt={class:"flex items-center gap-0.5 sm:gap-1"},It={class:"flex items-center gap-0.5 sm:gap-1 opacity-0 transition-opacity duration-200 group-hover:opacity-100"},Et=["onClick","title"],Ft=["onClick"],Ot={class:"flex-1"},Tt={key:0,class:"rounded-lg bg-card"},Bt={key:1,class:"space-y-4 sm:space-y-6"},Vt={class:"flex items-center gap-1.5 sm:gap-2 border-b border-border pb-1.5 sm:pb-2"},Nt={class:"text-sm sm:font-medium text-foreground"},Ut={class:"text-xs sm:text-sm text-muted-foreground"},Yt={class:"flex flex-wrap gap-1.5 sm:gap-2"},Wt=["onClick"],Gt={class:"shrink-0"},qt={class:"min-w-0 flex-1"},Xt={class:"truncate text-xs sm:text-sm font-medium"},Zt={key:1,class:"mt-3 sm:mt-4"},Ht={class:"rounded-md border border-destructive bg-destructive/10 p-2.5 sm:p-3"},Kt={class:"flex items-center"},Jt={class:"text-xs sm:text-sm text-destructive"},Oe={__name:"CompanySelector",setup(V){const o=be(),j=I(""),g=I(null),d=q(()=>{const b=o.availableCompanies,C={};return Object.keys(b).forEach(p=>{if(g.value&&p!==g.value)return;let F=b[p];if(j.value){const B=j.value.toLowerCase();F=b[p].filter(P=>P.toLowerCase().includes(B)||p.toLowerCase().includes(B))}F.length>0&&(C[p]=F)}),C}),_=(b,C)=>o.activeCharts.some(p=>p.sector===b&&p.company===C&&p.isActive),W=(b,C)=>{if(_(b,C)){const p=o.activeCharts.find(F=>F.sector===b&&F.company===C);p&&o.removeChart(p.id);return}if(o.activeCharts.length>=o.maxCharts){alert(`최대 ${o.maxCharts}개의 차트만 활성화할 수 있습니다.`);return}o.addChart(b,C)},T=b=>{o.comparisonMode?o.toggleComparisonChart(b.id):o.toggleChart(b.id)},E=()=>{o.clearAllCharts(),o.loadStockData()};return ve(()=>{o.stockData||o.loadStockData()}),(b,C)=>(u(),x("div",mt,[e("div",pt,[e("div",ft,[e("button",{onClick:C[0]||(C[0]=p=>n(o).toggleComparisonMode()),class:U(["flex items-center gap-1 sm:gap-1.5 rounded-md px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium transition-all duration-200",n(o).comparisonMode?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"])},[M(n(nt),{class:"size-3 sm:size-3.5"}),pe(" 비교 "+z(n(o).comparisonMode?"ON":"OFF"),1)],2),e("button",{onClick:C[1]||(C[1]=p=>n(o).clearAllCharts()),class:"flex items-center gap-1.5 rounded-md bg-destructive px-3 py-1.5 text-sm font-medium text-destructive-foreground transition-all duration-200 hover:bg-destructive/90"},[M(n(ze),{class:"size-3.5"}),C[3]||(C[3]=pe(" 전체 지우기 ",-1))]),e("button",{onClick:E,class:"flex items-center gap-1.5 rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white transition-all duration-200 hover:bg-blue-700",title:"데이터 다시 로드"},[M(n(Ve),{class:"size-3.5"}),C[4]||(C[4]=pe(" 데이터 리로드 ",-1))])])]),e("div",vt,[e("div",gt,[e("div",xt,[he(e("input",{"onUpdate:modelValue":C[2]||(C[2]=p=>j.value=p),type:"text",placeholder:"회사명 또는 섹터 검색...",class:"w-full rounded-md border border-border bg-input px-2 sm:px-3 py-1.5 sm:py-2 pr-8 sm:pr-9 text-xs sm:text-sm text-foreground focus:border-ring focus:outline-none"},null,512),[[Ae,j.value]]),M(n(Qe),{class:"absolute right-2 sm:right-2.5 top-1/2 size-3.5 sm:size-4 -translate-y-1/2 text-muted-foreground"})]),e("div",ht,[(u(!0),x(oe,null,re(n(o).availableSectors,p=>(u(),x("button",{key:p,onClick:F=>g.value=g.value===p?null:p,class:U(["rounded-full px-2 sm:px-3 py-0.5 sm:py-1 text-xs font-medium transition-all duration-200",g.value===p?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"])},z(p),11,bt))),128))])])]),n(o).activeCharts.length>0?(u(),x("div",yt,[e("div",kt,[C[6]||(C[6]=e("h3",{class:"text-base sm:text-lg font-semibold text-foreground"},"활성 차트",-1)),e("div",_t,[C[5]||(C[5]=e("div",{class:"size-1.5 sm:size-2 rounded-full bg-primary"},null,-1)),pe(" "+z(n(o).activeCharts.length)+"/"+z(n(o).maxCharts),1)])]),e("div",Ct,[(u(!0),x(oe,null,re(n(o).activeCharts,p=>(u(),x("div",{key:p.id,class:U(["group relative overflow-hidden rounded-lg border transition-all duration-200 hover:shadow-md",p.isActive?"border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10":"border-border bg-card hover:border-border/60",n(o).comparisonMode&&n(o).isBenchmarkChart(p.id)?"border-red-300 bg-gradient-to-r from-red-50 to-red-100 ring-2 ring-red-300":"",n(o).comparisonMode&&n(o).comparisonCharts.includes(p.id)?"border-blue-300 bg-gradient-to-r from-blue-50 to-blue-100 ring-2 ring-blue-300":""]),onClick:F=>T(p)},[e("div",{class:U(["absolute left-0 top-0 h-full w-1 transition-all duration-200",n(o).comparisonMode&&n(o).isBenchmarkChart(p.id)?"w-2 bg-red-600":n(o).comparisonMode&&n(o).comparisonCharts.includes(p.id)?"bg-blue-600":p.isActive?"bg-primary":"bg-muted-foreground/30"])},null,2),e("div",$t,[e("div",Dt,[e("div",zt,[e("h4",St,z(p.company),1),n(o).comparisonMode&&n(o).isBenchmarkChart(p.id)?(u(),x("div",At," 기준점 ")):n(o).comparisonMode&&n(o).comparisonCharts.includes(p.id)?(u(),x("div",Mt," 비교중 ")):n(o).comparisonMode?(u(),x("div",Lt," 대기중 ")):X("",!0)]),e("div",Rt,[e("span",Pt,z(p.sector),1),e("div",jt,[e("div",{class:U(["size-1 sm:size-1.5 rounded-full",p.isActive?"bg-primary":"bg-muted-foreground/50"])},null,2),e("span",{class:U(p.isActive?"text-primary":"text-muted-foreground")},z(p.isActive?"활성":"비활성"),3)])])]),e("div",It,[e("button",{onClick:Fe(F=>n(o).toggleChart(p.id),["stop"]),class:U(["rounded-md p-1.5 sm:p-2 transition-all duration-200",p.isActive?"text-primary hover:bg-primary/20":"text-muted-foreground hover:bg-muted"]),title:p.isActive?"차트 비활성화":"차트 활성화"},[M(n(it),{class:"size-3.5 sm:size-4"})],10,Et),e("button",{onClick:Fe(F=>n(o).removeChart(p.id),["stop"]),class:"rounded-md p-1.5 sm:p-2 text-destructive transition-all duration-200 hover:bg-destructive/20",title:"차트 제거"},[M(n(Ne),{class:"size-3.5 sm:size-4"})],8,Ft)])])],10,wt))),128))])])):X("",!0),e("div",Ot,[C[8]||(C[8]=e("h3",{class:"mb-3 sm:mb-4 text-base sm:text-lg font-semibold text-foreground"},"회사 선택",-1)),n(o).isLoading?(u(),x("div",Tt,[...C[7]||(C[7]=[e("div",{class:"flex items-center justify-center py-8 sm:py-12"},[e("div",{class:"size-6 sm:size-8 animate-spin rounded-full border-b-2 border-primary"}),e("span",{class:"ml-2 sm:ml-3 text-sm text-muted-foreground"},"데이터 로딩 중...")],-1)])])):(u(),x("div",Bt,[(u(!0),x(oe,null,re(d.value,(p,F)=>(u(),x("div",{key:F,class:"space-y-2 sm:space-y-3"},[e("div",Vt,[e("h4",Nt,z(F),1),e("span",Ut,"("+z(p.length)+"개)",1)]),e("div",Yt,[(u(!0),x(oe,null,re(p,B=>(u(),x("div",{key:`${F}-${B}`,onClick:P=>W(F,B),class:U(["flex min-h-[28px] sm:min-h-[32px] basis-[calc(50%-0.375rem)] sm:basis-[calc(50%-0.5rem)] cursor-pointer items-center gap-1.5 sm:gap-2 rounded-md px-1.5 sm:px-2 py-1 sm:py-1.5 transition-all duration-200",_(F,B)?"bg-primary text-primary-foreground":"border border-border bg-card text-foreground hover:bg-muted"])},[e("div",Gt,[_(F,B)?(u(),fe(n(Ue),{key:1,class:"size-3 sm:size-3.5 text-primary-foreground"})):(u(),fe(n(tt),{key:0,class:"size-3 sm:size-3.5 text-muted-foreground"}))]),e("div",qt,[e("div",Xt,z(B),1)])],10,Wt))),128))])]))),128))]))]),n(o).error?(u(),x("div",Zt,[e("div",Ht,[e("div",Kt,[M(n(at),{class:"mr-1.5 sm:mr-2 size-3.5 sm:size-4 text-destructive"}),e("span",Jt,z(n(o).error),1)])])])):X("",!0)]))}},Qt={class:"overflow-hidden rounded-lg sm:rounded-xl border border-border bg-pale-yellow-100"},es={class:"border-b border-border bg-muted/50 p-2 sm:p-1"},ts={class:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center sm:justify-between gap-2 sm:gap-4"},ss={class:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-2"},os={class:"flex gap-1 overflow-x-auto"},rs=["onClick"],as={class:"flex gap-1 overflow-x-auto sm:overflow-visible"},ns={class:"border-t border-border bg-muted/30 p-3 sm:p-4"},ls={key:0,class:"mt-2 sm:mt-3 flex flex-wrap gap-2 text-xs sm:text-sm"},is={class:"flex items-center gap-2 sm:gap-3"},cs={class:"flex items-center gap-1 sm:gap-2"},ds={class:"text-sm sm:text-lg font-semibold text-foreground"},us={class:"rounded-full bg-primary/10 px-2 py-1 text-xs text-primary"},ms={class:"flex items-center gap-2"},ps={class:"font-semibold text-foreground"},fs={class:"flex items-center gap-2"},vs={class:"flex items-center gap-2"},gs={class:"text-foreground"},xs={class:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4"},hs={class:"font-semibold text-foreground"},bs={class:"font-semibold text-foreground"},ys={class:"font-semibold text-foreground"},ks={class:"font-semibold text-foreground"},_s={class:"relative"},Cs={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-background/80"},ws={class:"h-[50dvh]"},$s={key:1,class:"h-24 border-t border-border"},Ds={__name:"CandlestickChart",props:{chartId:{type:String,required:!0}},emits:["remove-chart"],setup(V,{emit:o}){const j=V,g=be(),d=I(),_=I(),W=I("1D"),T=I(!0),E=I(!0),b=I(!1),C=I(!1),p=[{label:"일봉",value:"1D"},{label:"주봉",value:"1W"},{label:"월봉",value:"1M"},{label:"3개월봉",value:"3M"}],F=q(()=>{var O;const f=g.activeCharts.find(Y=>Y.id===j.chartId);if(!f||!g.stockData)return null;const y=((O=g.stockData[f.sector])==null?void 0:O[f.company])||[];return y.length===0?null:g.processStockData(y,f.settings)}),B=q(()=>{var N;if(!F.value)return null;const f=g.activeCharts.find(K=>K.id===j.chartId);if(!f)return null;const y=((N=g.stockData[f.sector])==null?void 0:N[f.company])||[],O=g.convertCandleTimeframe(y,W.value),Y=g.processStockData(O,f.settings);return console.log("시간범위:",W.value,"원본:",y.length,"변환됨:",O.length),{chart:f,processedData:Y}}),P=q(()=>{var f;return(f=B.value)!=null&&f.processedData?B.value.processedData:{dates:[],candlestickData:[],volumeData:[],closes:[],ma5:[],ma10:[],ma20:[],ma60:[],rsi:[]}}),Z=q(()=>{if(!P.value.closes||!P.value.closes.length)return null;const f=P.value.closes,y=f[f.length-1],O=f[f.length-2];if(!O)return null;const Y=y-O,N=Y/O*100;return{close:y,change:Y,changePercent:N,volume:P.value.volumeData[P.value.volumeData.length-1]}}),ee=q(()=>{if(!P.value.candlestickData||!P.value.candlestickData.length)return{high:0,low:0,avgVolume:0,volatility:0};const f=P.value.closes,y=P.value.volumeData,O=P.value.candlestickData,Y=Math.max(...O.map(Q=>Q[3])),N=Math.min(...O.map(Q=>Q[2])),K=y.reduce((Q,s)=>Q+s,0)/y.length,ue=f.reduce((Q,s)=>Q+s,0)/f.length,me=f.reduce((Q,s)=>Q+Math.pow(s-ue,2),0)/f.length,ye=Math.sqrt(me)/ue*100;return{high:Y,low:N,avgVolume:K,volatility:ye}}),te=q(()=>{if(!P.value.candlestickData||!P.value.candlestickData.length)return{};const f=P.value.candlestickData,y=P.value.volumeData,O=P.value.dates,Y=[{name:"캔들스틱",type:"candlestick",data:f,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:"#ef4444",color0:"#22c55e",borderColor:"#ef4444",borderColor0:"#22c55e"}}];if(E.value&&P.value.candlestickData.length>5){const N=P.value.ma5,K=P.value.ma20;Y.push({name:"MA5",type:"line",data:N,xAxisIndex:0,yAxisIndex:0,smooth:!0,lineStyle:{width:1,color:"#fbbf24"}}),Y.push({name:"MA20",type:"line",data:K,xAxisIndex:0,yAxisIndex:0,smooth:!0,lineStyle:{width:1,color:"#8b5cf6"}})}return T.value&&Y.push({name:"거래량",type:"bar",xAxisIndex:1,yAxisIndex:1,data:y,itemStyle:{color:function(N){const K=N.dataIndex;if(K===0)return"#6b7280";const ue=P.value.closes[K],me=P.value.closes[K-1];return ue>=me?"#22c55e":"#ef4444"}}}),{backgroundColor:"transparent",animation:!0,tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#374151",textStyle:{color:"#f9fafb"}},legend:{data:["캔들스틱",...E.value&&P.value.candlestickData.length>5?["MA5","MA20"]:[],...T.value?["거래량"]:[]],textStyle:{color:"#000000"}},grid:[{left:"10%",right:"4%",height:T.value?"55%":"75%"},...T.value?[{left:"3%",right:"4%",top:"75%",height:"25%"}]:[]],xAxis:[{type:"category",gridIndex:0,data:O,axisLine:{lineStyle:{color:"#374151"}},axisLabel:{color:"#000000"}},...T.value?[{type:"category",gridIndex:1,data:O,axisLabel:{show:!1}}]:[]],yAxis:[{gridIndex:0,scale:!0,axisLine:{lineStyle:{color:"#374151"}},axisLabel:{color:"#000000"},splitLine:{lineStyle:{color:"#374151"}}},...T.value?[{scale:!0,gridIndex:1,axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}}]:[]],dataZoom:[{type:"inside",xAxisIndex:T.value?[0,1]:[0],start:0,end:100}],series:Y}}),le=q(()=>{if(!P.value.closes||!P.value.closes.length||!b.value)return{};const f=P.value.rsi,y=P.value.dates;return{backgroundColor:"transparent",grid:{left:"3%",right:"4%",top:"10%",bottom:"10%"},xAxis:{type:"category",data:y,axisLabel:{show:!1}},yAxis:{type:"value",min:0,max:100,axisLabel:{color:"#000000",fontSize:10},splitLine:{lineStyle:{color:"#374151"}}},series:[{name:"RSI",type:"line",data:f,lineStyle:{color:"#06b6d4",width:2},areaStyle:{color:"rgba(6, 182, 212, 0.1)"}}],markLine:{data:[{yAxis:70,lineStyle:{color:"#ef4444",type:"dashed"}},{yAxis:30,lineStyle:{color:"#22c55e",type:"dashed"}}]}}}),se=f=>f?Number(f).toLocaleString():"0",A=f=>f>=1e6?(f/1e6).toFixed(1)+"M":f>=1e3?(f/1e3).toFixed(1)+"K":f.toString(),c=f=>f>0?"text-red-500":f<0?"text-blue-500":"text-muted-foreground",D=f=>{f.componentType==="series"&&console.log("Chart clicked:",f)},ae=()=>{var f;if(d.value){const y=d.value.getDataURL({type:"png",backgroundColor:"#ffffff"}),O=document.createElement("a");O.download=`${((f=B.value.chart)==null?void 0:f.company)||"chart"}_차트.png`,O.href=y,O.click()}};return _e(W,async()=>{C.value=!0,await Me(),setTimeout(()=>{C.value=!1,d.value&&d.value.resize(),_.value&&_.value.resize()},100)}),ve(async()=>{await Me(),setTimeout(()=>{d.value&&d.value.resize(),_.value&&_.value.resize()},100)}),(f,y)=>{var O,Y;return u(),x("div",Qt,[e("div",es,[e("div",ts,[e("div",ss,[e("div",os,[(u(),x(oe,null,re(p,N=>e("button",{key:N.value,onClick:K=>W.value=N.value,class:U(["h-6 sm:h-8 rounded-md px-2 sm:px-2.5 text-xs font-medium transition-colors duration-200 whitespace-nowrap",W.value===N.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"])},z(N.label),11,rs)),64))]),e("div",as,[e("button",{onClick:y[0]||(y[0]=N=>T.value=!T.value),class:U(["flex size-6 sm:size-8 items-center justify-center rounded-md transition-colors duration-200",T.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:"거래량 표시/숨김"},[M(n(De),{class:"size-3 sm:size-4"})],2),e("button",{onClick:y[1]||(y[1]=N=>E.value=!E.value),class:U(["flex size-6 sm:size-8 items-center justify-center rounded-md transition-colors duration-200",E.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:"이동평균선 표시/숨김"},[M(n(Pe),{class:"size-3 sm:size-4"})],2),e("button",{onClick:y[2]||(y[2]=N=>b.value=!b.value),class:U(["flex size-6 sm:size-8 items-center justify-center rounded-md transition-colors duration-200",b.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:"RSI 지표 표시/숨김"},[M(n(rt),{class:"size-3 sm:size-4"})],2),e("button",{onClick:ae,class:"flex size-8 items-center justify-center rounded-md bg-muted text-muted-foreground transition-colors duration-200 hover:bg-muted/90",title:"차트 내보내기"},[M(n(je),{class:"size-3 sm:size-4"})]),e("button",{onClick:y[3]||(y[3]=N=>f.$emit("remove-chart")),class:"flex size-8 items-center justify-center rounded-md bg-destructive/10 text-destructive transition-colors duration-200 hover:bg-destructive/20",title:"차트 제거"},[M(n(ze),{class:"size-3 sm:size-4"})])])])])]),e("div",ns,[Z.value?(u(),x("div",ls,[e("div",is,[e("div",cs,[M(n(Pe),{class:"size-4 sm:size-5 text-primary"}),e("h3",ds,z(((O=B.value.chart)==null?void 0:O.company)||"Chart"),1)]),e("span",us,z(((Y=B.value.chart)==null?void 0:Y.sector)||"Sector"),1)]),e("div",ms,[y[4]||(y[4]=e("span",{class:"text-muted-foreground"},"현재가:",-1)),e("span",ps,z(se(Z.value.close))+"원",1)]),e("div",fs,[y[5]||(y[5]=e("span",{class:"text-muted-foreground"},"변동:",-1)),e("span",{class:U(c(Z.value.change))},z(Z.value.change>0?"+":"")+z(se(Z.value.change))+"원 ("+z(Z.value.changePercent>0?"+":"")+z(Z.value.changePercent.toFixed(2))+"%) ",3)]),e("div",vs,[y[6]||(y[6]=e("span",{class:"text-muted-foreground"},"거래량:",-1)),e("span",gs,z(A(Z.value.volume)),1)])])):X("",!0),e("div",xs,[e("div",null,[y[7]||(y[7]=e("span",{class:"block text-muted-foreground"},"최고가",-1)),e("span",hs,z(se(ee.value.high))+"원",1)]),e("div",null,[y[8]||(y[8]=e("span",{class:"block text-muted-foreground"},"최저가",-1)),e("span",bs,z(se(ee.value.low))+"원",1)]),e("div",null,[y[9]||(y[9]=e("span",{class:"block text-muted-foreground"},"평균 거래량",-1)),e("span",ys,z(A(ee.value.avgVolume)),1)]),e("div",null,[y[10]||(y[10]=e("span",{class:"block text-muted-foreground"},"변동성",-1)),e("span",ks,z(ee.value.volatility.toFixed(2))+"%",1)])])]),e("div",_s,[C.value?(u(),x("div",Cs,[...y[11]||(y[11]=[e("div",{class:"flex items-center gap-2"},[e("div",{class:"size-6 animate-spin rounded-full border-b-2 border-primary"}),e("span",{class:"text-muted-foreground"},"차트 로딩 중...")],-1)])])):X("",!0),e("div",ws,[M(n($e),{ref_key:"chartRef",ref:d,option:te.value,theme:"dark",class:"size-full",autoresize:"",onClick:D},null,8,["option"])]),b.value?(u(),x("div",$s,[M(n($e),{ref_key:"rsiChartRef",ref:_,option:le.value,theme:"dark",class:"size-full",autoresize:""},null,8,["option"])])):X("",!0)])])}}},zs={class:"mb-3 sm:mb-4 rounded-lg border border-border bg-card p-3 sm:p-4"},Ss={class:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-3 sm:gap-4"},As={class:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-2"},Ms=["placeholder"],Ls={class:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-2"},Rs=["placeholder"],Ps=["disabled"],js={key:0,class:"mt-2"},Is={__name:"DateRangeFilter",setup(V){const o=be(),j=I(""),g=I(""),d=q(()=>{if(!o.stockData)return{min:"",max:""};let E=null,b=null;return Object.values(o.stockData).forEach(C=>{Object.values(C).forEach(p=>{if(Array.isArray(p)&&p.length>0){const F=p.map(Z=>new Date(Z.Date)),B=new Date(Math.min(...F)),P=new Date(Math.max(...F));(!E||B<E)&&(E=B),(!b||P>b)&&(b=P)}})}),console.log("계산된 날짜 범위:",{min:E?E.toISOString().split("T")[0]:"",max:b?b.toISOString().split("T")[0]:""}),{min:E?E.toISOString().split("T")[0]:"",max:b?b.toISOString().split("T")[0]:""}}),_=q(()=>{if(!j.value||!g.value)return!1;const E=/^\d{4}-\d{2}-\d{2}$/;if(!E.test(j.value)||!E.test(g.value))return!1;const b=new Date(j.value),C=new Date(g.value);return isNaN(b.getTime())||isNaN(C.getTime())?!1:b<=C}),W=async()=>{await o.loadStockData(),await Me(),j.value=d.value.min,g.value=d.value.max,console.log("기본값 복원 완료:",{min:d.value.min,max:d.value.max,startDate:j.value,endDate:g.value})},T=async()=>{_.value&&await o.filterDataByDateRange(j.value,g.value)};return ve(async()=>{o.stockData||await o.loadStockData(),console.log("availableDateRange:",d.value),console.log("stockStore.stockData:",o.stockData),d.value.min&&d.value.max?(j.value=d.value.min,g.value=d.value.max,console.log("초기값 설정됨:",j.value,g.value)):console.log("availableDateRange가 비어있음")}),_e(()=>o.stockData,E=>{E&&d.value.min&&d.value.max&&(j.value||(j.value=d.value.min),g.value||(g.value=d.value.max))}),(E,b)=>(u(),x("div",zs,[e("div",{class:"mb-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0"},[b[2]||(b[2]=e("h3",{class:"text-base sm:text-lg font-semibold text-foreground"},"비교 기간 설정",-1)),e("button",{onClick:W,class:"rounded-md bg-muted px-2.5 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium text-muted-foreground transition-all duration-200 hover:bg-muted/90"}," 기본값 복원 ")]),e("div",Ss,[e("div",As,[b[3]||(b[3]=e("label",{class:"text-xs sm:text-sm font-medium text-foreground"},"비교 시작일:",-1)),he(e("input",{"onUpdate:modelValue":b[0]||(b[0]=C=>j.value=C),type:"text",placeholder:d.value.min||"YYYY-MM-DD",class:"rounded-md border border-border bg-input px-2.5 sm:px-3 py-1.5 text-xs sm:text-sm text-foreground focus:border-ring focus:outline-none"},null,8,Ms),[[Ae,j.value]])]),e("div",Ls,[b[4]||(b[4]=e("label",{class:"text-xs sm:text-sm font-medium text-foreground"},"비교 종료일:",-1)),he(e("input",{"onUpdate:modelValue":b[1]||(b[1]=C=>g.value=C),type:"text",placeholder:d.value.max||"YYYY-MM-DD",class:"rounded-md border border-border bg-input px-2.5 sm:px-3 py-1.5 text-xs sm:text-sm text-foreground focus:border-ring focus:outline-none"},null,8,Rs),[[Ae,g.value]])]),e("button",{onClick:T,disabled:!_.value,class:"rounded-md bg-primary px-4 py-1.5 text-sm font-medium text-primary-foreground transition-all duration-200 hover:bg-primary/90 disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground"}," 적용 ",8,Ps)]),!_.value&&(j.value||g.value)?(u(),x("div",js,[...b[5]||(b[5]=[e("p",{class:"text-sm text-destructive"},"올바른 날짜 형식(YYYY-MM-DD)과 범위를 입력해주세요.",-1)])])):X("",!0)]))}},Es={class:"overflow-hidden rounded-xl border border-border bg-card"},Fs={class:"border-b border-border bg-muted/50 p-4"},Os={class:"flex flex-wrap items-center justify-between gap-4"},Ts={class:"flex items-center gap-3"},Bs={class:"rounded-full bg-primary/10 px-2 py-1 text-xs text-primary"},Vs={class:"flex items-center gap-2"},Ns={class:"flex items-center gap-2"},Us=["value"],Ys=["value"],Ws={class:"flex gap-1"},Gs=["onClick","title"],qs={class:"flex gap-1"},Xs=["onClick","title"],Zs={class:"mt-3 rounded-lg bg-background/50 p-3"},Hs={class:"flex items-center gap-2 text-sm"},Ks={class:"text-muted-foreground"},Js={key:0,class:"mt-2 text-xs text-yellow-600"},Qs={key:0,class:"py-16 text-center text-muted-foreground"},eo={key:1,class:"space-y-0"},to={class:"h-[500px]"},so={key:0,class:"h-64 border-t border-border"},oo={class:"border-t border-border bg-muted/30 p-4"},ro={class:"mb-3 flex items-center justify-between"},ao={class:"flex items-center gap-2 font-medium text-foreground"},no={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},lo={class:"mb-2 flex items-center gap-2"},io={class:"text-sm font-medium text-foreground"},co={key:0,class:"rounded bg-primary/10 px-1 py-0.5 text-xs text-primary"},uo={class:"space-y-1 text-xs"},mo={class:"text-muted-foreground"},po={class:"flex justify-between"},fo={class:"font-medium text-foreground"},vo={class:"flex justify-between"},go={key:0,class:"flex justify-between"},xo={class:"flex justify-between"},ho={class:"text-muted-foreground"},bo={class:"font-medium text-foreground"},yo={class:"mt-2 flex gap-1"},ko=["onClick"],_o=["onClick"],Co={class:"border-t border-border bg-background/50 p-4"},wo={class:"mb-3 flex items-center gap-2 font-medium text-foreground"},$o={class:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4"},Do={class:"rounded-lg border border-border bg-card p-3 text-center"},zo={class:"text-lg font-semibold text-primary"},So={class:"block text-xs text-muted-foreground"},Ao={class:"rounded-lg border border-border bg-card p-3 text-center"},Mo={class:"text-lg font-semibold text-destructive"},Lo={class:"block text-xs text-muted-foreground"},Ro={class:"rounded-lg border border-border bg-card p-3 text-center"},Po={class:"text-lg font-semibold text-accent"},jo={class:"rounded-lg border border-border bg-card p-3 text-center"},Io={class:"text-lg font-semibold text-foreground"},Eo={class:"mt-4 rounded-lg bg-muted/50 p-4"},Fo={class:"mb-2 font-medium text-foreground"},Oo={class:"text-sm text-muted-foreground"},To={__name:"ComparisonChart",setup(V){const o=be(),j=I(),g=I(),d=I("normalized"),_=I("line"),W=q(()=>o.activeCharts.filter(s=>s.isActive)),T=[{label:"정규화",value:"normalized",description:"기준점 100으로 정규화하여 상대적 성과 비교"},{label:"기준 대비",value:"relative",description:"선택된 기준 종목 대비 상대 성과 비교"},{label:"절대값",value:"absolute",description:"실제 주가를 그대로 비교"},{label:"상관관계",value:"correlation",description:"종목 간 상관관계 및 포트폴리오 분석"}],E=s=>{o.setBenchmarkChart(s||null)},b=[{label:"선형 차트",value:"line",icon:st}],C=q(()=>{const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return{};let t=[];switch(d.value){case"normalized":t=F(s);break;case"relative":t=B(s);break;case"absolute":t=P(s);break;case"correlation":t=Z(s);break}return{backgroundColor:"transparent",animation:!0,animationDuration:1e3,title:{text:ae(),textStyle:{color:"#000000",fontSize:18,fontWeight:"bold"},left:"center",top:20},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#1f2937",color:"#ffffff"}},backgroundColor:"rgba(0, 0, 0, 0.9)",borderColor:"#ffffff",borderWidth:1,textStyle:{color:"#ffffff",fontSize:12},formatter:f()},legend:{data:s.charts.map(m=>m.company),textStyle:{color:"#000000",fontSize:14,fontWeight:"normal"},top:50,itemGap:20},grid:{left:"3%",right:"4%",bottom:"10%",top:"20%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:s.commonDates,axisLine:{lineStyle:{color:"#6b7280"}},axisLabel:{color:"#000000",fontSize:12}},yAxis:{type:"value",scale:!0,axisLine:{lineStyle:{color:"#6b7280"}},axisLabel:{color:"#000000",fontSize:12,formatter:y()},splitLine:{lineStyle:{color:"#4b5563",type:"dashed"}}},dataZoom:[{type:"inside",start:0,end:100}],series:t}}),p=q(()=>{if(d.value!=="correlation")return{};const s=o.comparisonData;if(!s||!s.charts||s.charts.length<2)return{};const t=A(s.charts),m=s.charts.map(a=>a.company);return{backgroundColor:"transparent",title:{text:"상관관계 히트맵",textStyle:{color:"#000000",fontSize:16,fontWeight:"bold"},left:"center"},tooltip:{position:"top",formatter:function(a){return`${m[a.data[1]]} vs ${m[a.data[0]]}<br/>상관계수: ${a.data[2].toFixed(3)}`}},grid:{height:"80%",top:"10%"},xAxis:{type:"category",data:m,splitArea:{show:!0},axisLabel:{color:"#000000",fontSize:12}},yAxis:{type:"category",data:m,splitArea:{show:!0},axisLabel:{color:"#000000",fontSize:12}},visualMap:{min:-1,max:1,calculable:!0,orient:"horizontal",left:"center",bottom:"5%",inRange:{color:["#3b82f6","#ffffff","#ef4444"]},textStyle:{color:"#ffffff",fontSize:12}},series:[{name:"상관관계",type:"heatmap",data:t,label:{show:!0,color:"#000000",fontSize:12,fontWeight:"bold",formatter:"{c}"},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}),F=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.normalizedPrices,smooth:_.value==="line",lineStyle:{width:t.isBenchmark?4:2,color:t.color,type:(t.isBenchmark,"solid")},itemStyle:{color:t.color},emphasis:{focus:"series"}})),B=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.relativePrices||t.normalizedPrices,smooth:_.value==="line",lineStyle:{width:t.isBenchmark?4:2,color:t.color,type:(t.isBenchmark,"solid")},itemStyle:{color:t.color},emphasis:{focus:"series"}})),P=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.closes,smooth:_.value==="line",lineStyle:{width:2,color:t.color},itemStyle:{color:t.color},emphasis:{focus:"series"}})),Z=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.normalizedPrices,smooth:!0,lineStyle:{width:t.isBenchmark?4:2,color:t.color},itemStyle:{color:t.color}})),ee=s=>s?Number(s).toLocaleString():"0",te=s=>{if(!s||s.length===0)return"0.00";const t=s[0],a=(s[s.length-1]-t)/t*100;return a>=0?`+${a.toFixed(2)}`:a.toFixed(2)},le=s=>{if(!s.relativePrices||s.relativePrices.length===0)return"0.00";const t=s.relativePrices[0],a=s.relativePrices[s.relativePrices.length-1]-t;return a>=0?`+${a.toFixed(2)}`:a.toFixed(2)},se=s=>{const t=parseFloat(s);return t>0?"text-primary":t<0?"text-destructive":"text-muted-foreground"},A=s=>{const t=[];for(let m=0;m<s.length;m++)for(let a=0;a<s.length;a++){const G=c(s[m].normalizedPrices,s[a].normalizedPrices);t.push([m,a,G])}return t},c=(s,t)=>{const m=Math.min(s.length,t.length),a=s.slice(0,m).reduce((v,w)=>v+w,0),G=t.slice(0,m).reduce((v,w)=>v+w,0),ie=s.slice(0,m).reduce((v,w,h)=>v+w*t[h],0),Ce=s.slice(0,m).reduce((v,w)=>v+w*w,0),r=t.slice(0,m).reduce((v,w)=>v+w*w,0),l=m*ie-a*G,i=Math.sqrt((m*Ce-a*a)*(m*r-G*G));return i===0?0:l/i},D=()=>{var s;return((s=T.find(t=>t.value===d.value))==null?void 0:s.description)||""},ae=()=>{var t;const s=T.find(m=>m.value===d.value);if(d.value==="relative"&&o.benchmarkChart){const m=(t=o.comparisonData)==null?void 0:t.benchmarkData;return`${(m==null?void 0:m.company)||"기준 종목"} 기준 상대 성과 분석`}return`${s==null?void 0:s.label} 기반 주식 비교 분석`},f=()=>function(s){let t='<div style="font-size: 12px;">';return t+=`<div style="margin-bottom: 8px; font-weight: bold;">${s[0].axisValue}</div>`,s.forEach(m=>{let a,G;switch(d.value){case"normalized":a=m.value.toFixed(2),G="";break;case"relative":a=m.value.toFixed(2),G=o.benchmarkChart?" (기준 대비)":"";break;case"absolute":a=ee(m.value),G="원";break;default:a=m.value.toFixed(2),G=""}t+=`
        <div style="display: flex; align-items: center; margin-bottom: 4px;">
          <div style="width: 10px; height: 10px; background-color: ${m.color}; margin-right: 8px;"></div>
          <span>${m.seriesName}: ${a}${G}</span>
        </div>
      `}),t+="</div>",t},y=()=>function(s){switch(d.value){case"normalized":return s.toFixed(0);case"relative":return s.toFixed(0);case"absolute":return ee(s);default:return s.toFixed(2)}},O=()=>{switch(d.value){case"correlation":return"평균 상관계수";default:return"정규화 값"}},Y=(s,t)=>{var m;switch(d.value){case"correlation":{const a=o.comparisonData;if(!a||a.charts.length<2)return"N/A";let G=0,ie=0;return a.charts.forEach((Ce,r)=>{r!==t&&(G+=c(s.normalizedPrices,Ce.normalizedPrices),ie++)}),ie>0?(G/ie).toFixed(3):"N/A"}default:return((m=s.normalizedPrices[s.normalizedPrices.length-1])==null?void 0:m.toFixed(2))||"N/A"}},N=()=>{const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return{company:"-",return:"0.00"};let t={company:"",return:-1/0};return s.charts.forEach(m=>{const a=parseFloat(te(m.normalizedPrices));a>t.return&&(t={company:m.company,return:a.toFixed(2)})}),t},K=()=>{const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return{company:"-",return:"0.00"};let t={company:"",return:1/0};return s.charts.forEach(m=>{const a=parseFloat(te(m.normalizedPrices));a<t.return&&(t={company:m.company,return:a.toFixed(2)})}),t},ue=()=>{const s=o.comparisonData;return!s||!s.charts||s.charts.length===0?"0.00":(s.charts.reduce((m,a)=>m+parseFloat(te(a.normalizedPrices)),0)/s.charts.length).toFixed(2)},me=()=>{const s=o.comparisonData;if(!s||!s.commonDates||s.commonDates.length===0)return"-";const t=s.commonDates[0],m=s.commonDates[s.commonDates.length-1];return`${t.slice(5)} ~ ${m.slice(5)}`},ye=()=>{var t;const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return"분석할 데이터가 없습니다.";switch(d.value){case"normalized":return`정규화 분석: 모든 종목을 동일한 기준점(100)에서 시작하여 상대적 성과를 비교합니다. 가장 높은 수익률은 ${N().return}%, 가장 낮은 수익률은 ${K().return}%입니다.`;case"relative":return`기준 대비 분석: ${((t=s.benchmarkData)==null?void 0:t.company)||"기준 종목"}을 기준으로 다른 종목들의 상대적 성과를 비교합니다. 기준 종목 대비 초과 수익률을 확인할 수 있어 액티브 투자 성과 평가에 유용합니다.`;case"absolute":return"절대값 분석: 실제 주가를 그대로 비교하여 절대적 가격 변화를 분석합니다. 고가주와 저가주 간의 실제 가격 차이를 확인할 수 있습니다.";case"correlation":return"상관관계 분석: 종목 간 상관관계를 분석하여 포트폴리오 다각화 효과를 평가합니다. 상관계수가 낮은 종목들로 구성하면 리스크 분산 효과를 얻을 수 있습니다.";default:return"분석 결과를 표시할 수 없습니다."}},Q=()=>{o.exportComparisonData("csv")};return _e(()=>o.comparisonMode,s=>{s&&o.comparisonCharts.length>=1&&(d.value="correlation")},{immediate:!0}),_e(()=>o.comparisonCharts.length,s=>{o.comparisonMode&&s>=1&&(d.value="correlation")},{immediate:!0}),ve(()=>{o.comparisonMode&&o.comparisonCharts.length>=1&&(d.value="correlation")}),(s,t)=>{var m;return u(),x("div",Es,[M(Is),e("div",Fs,[e("div",Os,[e("div",Ts,[M(n(De),{class:"size-5 text-primary"}),t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-foreground"},"다중 주식 비교 차트",-1)),e("span",Bs,z(n(o).comparisonCharts.length)+"개 종목 비교 ",1)]),e("div",Vs,[e("div",Ns,[t[6]||(t[6]=e("span",{class:"text-sm text-muted-foreground"},"기준:",-1)),e("select",{value:n(o).benchmarkChart,onChange:t[0]||(t[0]=a=>E(a.target.value)),class:"rounded-md border-border bg-muted px-2 py-1 text-xs text-muted-foreground transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary"},[t[5]||(t[5]=e("option",{value:""},"선택안함",-1)),(u(!0),x(oe,null,re(W.value,a=>(u(),x("option",{key:a.id,value:a.id},z(a.company),9,Ys))),128))],40,Us)]),e("div",Ws,[(u(),x(oe,null,re(T,a=>e("button",{key:a.value,onClick:G=>d.value=a.value,class:U(["rounded-md px-3 py-1 text-xs transition-all duration-200",d.value===a.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:a.description},z(a.label),11,Gs)),64))]),e("div",qs,[(u(),x(oe,null,re(b,a=>e("button",{key:a.value,onClick:G=>_.value=a.value,class:U(["rounded-md p-2 transition-all duration-200",_.value===a.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:a.label},[(u(),fe(Te(a.icon),{class:"size-4"}))],10,Xs)),64))]),e("button",{onClick:Q,class:"rounded-md bg-muted p-2 text-muted-foreground transition-all duration-200 hover:bg-muted/90",title:"비교 데이터 내보내기"},[M(n(je),{class:"size-4"})]),e("button",{onClick:t[1]||(t[1]=a=>n(o).toggleComparisonMode()),class:"rounded-md bg-destructive/10 p-2 text-destructive transition-all duration-200 hover:bg-destructive/20",title:"비교 모드 종료"},[M(n(ze),{class:"size-4"})])])]),e("div",Zs,[e("div",Hs,[M(n(ot),{class:"size-4 text-primary"}),e("span",Ks,z(D()),1)]),d.value==="relative"&&!n(o).benchmarkChart?(u(),x("div",Js," ⚠️ 기준 대비 분석을 위해서는 먼저 기준 종목을 선택해주세요. ")):X("",!0)])]),e("div",null,[!n(o).comparisonData||n(o).comparisonCharts.length===0?(u(),x("div",Qs,[M(n(De),{class:"mx-auto mb-4 size-16 text-muted-foreground/50"}),t[7]||(t[7]=e("h3",{class:"mb-2 text-lg font-medium"},"비교할 종목을 선택하세요",-1)),t[8]||(t[8]=e("p",{class:"mb-2 text-sm"},"차트에서 비교하고 싶은 종목들을 클릭하여 선택할 수 있습니다.",-1)),t[9]||(t[9]=e("p",{class:"text-xs text-muted-foreground/70"},"최대 4개 종목까지 비교 가능합니다.",-1))])):(u(),x("div",eo,[e("div",to,[M(n($e),{ref_key:"comparisonChartRef",ref:j,option:C.value,theme:"dark",class:"size-full",autoresize:""},null,8,["option"])]),d.value==="correlation"?(u(),x("div",so,[M(n($e),{ref_key:"correlationChartRef",ref:g,option:p.value,theme:"dark",class:"size-full",autoresize:""},null,8,["option"])])):X("",!0),e("div",oo,[e("div",ro,[e("h4",ao,[M(n(ut),{class:"size-4"}),t[10]||(t[10]=pe(" 비교 종목 정보 ",-1))]),e("button",{onClick:t[2]||(t[2]=a=>n(o).clearComparison()),class:"p-1 text-muted-foreground transition-colors duration-200 hover:text-destructive"},[M(n(Ne),{class:"size-4"})])]),e("div",no,[(u(!0),x(oe,null,re(((m=n(o).comparisonData)==null?void 0:m.charts)||[],(a,G)=>(u(),x("div",{key:a.id,class:U(["rounded-lg border border-border bg-background p-3",a.isBenchmark?"border-primary ring-1 ring-primary/20":""])},[e("div",lo,[e("div",{class:"size-3 rounded-full",style:Be({backgroundColor:a.color})},null,4),e("span",io,z(a.company),1),a.isBenchmark?(u(),x("span",co,"기준")):X("",!0)]),e("div",uo,[e("div",mo,z(a.sector),1),e("div",po,[t[11]||(t[11]=e("span",{class:"text-muted-foreground"},"현재가:",-1)),e("span",fo,z(ee(a.closes[a.closes.length-1]))+"원",1)]),e("div",vo,[t[12]||(t[12]=e("span",{class:"text-muted-foreground"},"수익률:",-1)),e("span",{class:U(se(te(a.normalizedPrices)))},z(te(a.normalizedPrices))+"% ",3)]),!a.isBenchmark&&n(o).benchmarkChart?(u(),x("div",go,[t[13]||(t[13]=e("span",{class:"text-muted-foreground"},"상대수익률:",-1)),e("span",{class:U(se(le(a)))},z(le(a))+"% ",3)])):X("",!0),e("div",xo,[e("span",ho,z(O())+":",1),e("span",bo,z(Y(a,G)),1)])]),e("div",yo,[a.isBenchmark?X("",!0):(u(),x("button",{key:0,onClick:ie=>n(o).setBenchmarkChart(a.id),class:"flex-1 rounded bg-primary/10 p-1 text-xs text-primary transition-colors duration-200 hover:bg-primary/20"}," 기준 설정 ",8,ko)),a.isBenchmark?(u(),x("button",{key:1,onClick:t[3]||(t[3]=ie=>n(o).setBenchmarkChart(null)),class:"flex-1 rounded bg-yellow-500/10 p-1 text-xs text-yellow-600 transition-colors duration-200 hover:bg-yellow-500/20"}," 기준 해제 ")):X("",!0),e("button",{onClick:ie=>n(o).toggleComparisonChart(a.id),class:"flex-1 rounded bg-destructive/10 p-1 text-xs text-destructive transition-colors duration-200 hover:bg-destructive/20"}," 제거 ",8,_o)])],2))),128))])]),e("div",Co,[e("h4",wo,[M(n(Pe),{class:"size-4"}),t[14]||(t[14]=pe(" 분석 결과 ",-1))]),e("div",$o,[e("div",Do,[t[15]||(t[15]=e("span",{class:"mb-1 block text-muted-foreground"},"최고 수익률",-1)),e("span",zo,z(N().return)+"%",1),e("span",So,z(N().company),1)]),e("div",Ao,[t[16]||(t[16]=e("span",{class:"mb-1 block text-muted-foreground"},"최저 수익률",-1)),e("span",Mo,z(K().return)+"%",1),e("span",Lo,z(K().company),1)]),e("div",Ro,[t[17]||(t[17]=e("span",{class:"mb-1 block text-muted-foreground"},"평균 수익률",-1)),e("span",Po,z(ue())+"%",1),t[18]||(t[18]=e("span",{class:"block text-xs text-muted-foreground"},"전체 평균",-1))]),e("div",jo,[t[19]||(t[19]=e("span",{class:"mb-1 block text-muted-foreground"},"비교 기간",-1)),e("span",Io,z(me()),1),t[20]||(t[20]=e("span",{class:"block text-xs text-muted-foreground"},"데이터 기간",-1))])]),e("div",Eo,[e("h5",Fo,z(d.value.toUpperCase())+" 분석 결과",1),e("div",Oo,z(ye()),1)])])]))])])}}},Bo={class:"flex items-center gap-3 rounded-lg bg-primary/5 p-3 transition-colors hover:bg-primary/10"},Vo={class:"text-muted-foreground"},No={__name:"FeatureCard",props:{text:{type:String,required:!0}},setup(V){return(o,j)=>(u(),x("div",Bo,[M(n(Ue),{class:"size-5 shrink-0 text-primary"}),e("span",Vo,z(V.text),1)]))}},Uo={class:"flex h-full items-center justify-center p-8"},Yo={class:"max-w-lg text-center"},Wo={class:"mx-auto mb-8 flex size-24 items-center justify-center rounded-full bg-primary/10"},Go={class:"grid grid-cols-1 gap-4 text-sm"},qo={__name:"EmptyChartState",setup(V){const o=[{text:"최대 6개 차트 동시 분석 및 비교"},{text:"다중 종목 상대 성과 비교"},{text:"차트 데이터 내보내기 및 분석 도구"}];return(j,g)=>(u(),x("div",Uo,[e("div",Yo,[e("div",Wo,[M(n(De),{class:"size-12 text-primary/60"})]),g[0]||(g[0]=e("h3",{class:"mb-4 text-2xl font-bold text-foreground"},"차트 분석을 시작하세요",-1)),g[1]||(g[1]=e("p",{class:"mb-8 leading-relaxed text-muted-foreground"}," 왼쪽 패널에서 관심있는 기업을 선택하면 실시간 캔들스틱 차트와 상세한 분석 도구가 여기에 표시됩니다. ",-1)),e("div",Go,[(u(),x(oe,null,re(o,d=>M(No,{key:d.text,text:d.text},null,8,["text"])),64))])])]))}},Xo={key:0,class:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm"},Zo={__name:"LoadingOverlay",setup(V){const o=I(!1);return ve(()=>{o.value=!0}),(j,g)=>(u(),fe(Ze,{to:"body"},[M(Re,{name:"fade",appear:""},{default:Le(()=>[o.value?(u(),x("div",Xo,[...g[0]||(g[0]=[e("div",{class:"absolute inset-0 bg-background/80"},null,-1),e("div",{class:"relative z-10 text-center"},[e("div",{class:"mx-auto mb-6 flex size-16 items-center justify-center rounded-full bg-primary/10"},[e("div",{class:"size-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})]),e("h3",{class:"mb-2 text-lg font-semibold text-foreground"},"데이터 로딩 중"),e("p",{class:"text-sm text-muted-foreground"},"잠시만 기다려주세요...")],-1)])])):X("",!0)]),_:1})]))}},Ho=Ie(Zo,[["__scopeId","data-v-c8aae2d7"]]),Ko={class:"flex h-full rounded-lg sm:rounded-2xl bg-pale-yellow-100 text-foreground"},Jo={class:"flex-1 overflow-y-auto"},Qo={class:"flex flex-1 flex-col rounded-r-lg sm:rounded-r-2xl bg-pale-yellow-100"},er={class:"flex flex-1 flex-col overflow-hidden p-2 sm:p-4"},tr={class:"flex-1 overflow-y-auto overscroll-contain"},sr={key:0,class:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl border border-border/50 bg-pale-yellow-100/80 backdrop-blur-sm"},or={key:2,class:"space-y-3 sm:space-y-6"},rr={key:0,class:"border-t border-border/50 bg-pale-yellow-100/80 p-3 sm:p-6 backdrop-blur-sm"},ar={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-6"},nr={class:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-6"},lr={class:"flex items-center gap-2 text-sm font-semibold text-foreground"},ir={class:"rounded-full bg-primary/10 p-1.5 sm:p-2"},cr={class:"flex flex-wrap gap-3 sm:gap-4"},dr={class:"flex cursor-pointer items-center gap-2 text-xs sm:text-sm font-medium text-foreground transition-colors hover:text-primary"},ur={class:"flex cursor-pointer items-center gap-2 text-xs sm:text-sm font-medium text-foreground transition-colors hover:text-primary"},mr={class:"flex cursor-pointer items-center gap-2 text-xs sm:text-sm font-medium text-foreground transition-colors hover:text-primary"},pr={class:"flex items-center gap-2 sm:gap-4"},fr={class:"flex gap-1 rounded-lg bg-muted/50 p-1"},vr=["onClick","title"],gr={class:"flex items-center gap-2 sm:gap-3"},xr={key:0,class:"absolute inset-y-0 left-0 w-80 max-w-[90vw] bg-pale-yellow-100/95 backdrop-blur-md"},hr={class:"flex h-full flex-col"},br={class:"flex items-center justify-between border-b border-border/50 p-4 sm:p-6"},yr={class:"flex-1 overflow-y-auto overscroll-contain"},kr=250,_r={__name:"StockChartDashboard",setup(V){const o=be(),j=I("grid"),g=I(!1),d=I({showVolume:!0,showMA:!0,syncZoom:!1}),_=I(),W=I(320),T=I(!1),E=I(600),b=[{label:"그리드 레이아웃",value:"grid",icon:ct},{label:"단일 화면",value:"single",icon:dt},{label:"분할 화면",value:"split",icon:lt}],C=q(()=>o.activeCharts.filter(A=>A.isActive)),p=q(()=>{const A=C.value.length;return`grid gap-3 sm:gap-6 ${{single:"grid-cols-1",split:"grid-cols-1 lg:grid-cols-2",grid:A===1?"grid-cols-1":A===2?"grid-cols-1 lg:grid-cols-2":A===3?"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":A===4?"grid-cols-1 lg:grid-cols-2":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3"}[j.value]}`}),F=A=>{o.removeChart(A)},B=()=>{o.updateGlobalChartSettings(d.value)},P=()=>{o.activeCharts.forEach(A=>{A.isActive&&o.exportChartData(A.id,"csv")})},Z=()=>{o.clearAllCharts()},ee=A=>{T.value=!0;const c=A.clientX,D=W.value,ae=y=>{if(!T.value)return;const O=y.clientX-c,Y=D+O;W.value=Math.max(kr,Math.min(Y,E.value))},f=()=>{T.value=!1,document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",f),document.body.style.cursor="",document.body.style.userSelect=""};document.addEventListener("mousemove",ae),document.addEventListener("mouseup",f),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},te=()=>{E.value=Math.floor(window.innerWidth/2),W.value>E.value&&(W.value=E.value)};_e(d,A=>{o.updateGlobalChartSettings(A)},{deep:!0});const le=A=>{if(A.ctrlKey||A.metaKey)switch(A.key){case"e":A.preventDefault(),P();break;case"r":A.preventDefault(),Z();break;case"m":A.preventDefault(),g.value=!g.value;break}A.key==="Escape"&&g.value&&(g.value=!1)},se=()=>{window.innerWidth>=1024&&(g.value=!1),te()};return ve(()=>{o.stockData||o.loadStockData(),te(),document.addEventListener("keydown",le),window.addEventListener("resize",se)}),He(()=>{document.removeEventListener("keydown",le),window.removeEventListener("resize",se)}),(A,c)=>(u(),x("div",Ko,[e("div",{ref_key:"sidebarRef",ref:_,style:Be({width:W.value+"px"}),class:U(["relative hidden rounded-l-lg sm:rounded-l-2xl transition-none lg:flex lg:flex-col","border-r border-border/50 bg-pale-yellow-100/90 backdrop-blur-sm",{"select-none":T.value}])},[e("div",Jo,[M(Oe)]),e("div",{onMousedown:ee,class:U(["group absolute right-0 top-0 h-full w-2 cursor-col-resize bg-transparent transition-colors duration-200 hover:bg-primary/10",{"bg-primary/20":T.value}]),title:"사이드바 너비 조절"},[...c[5]||(c[5]=[e("div",{class:"absolute right-0.5 top-1/2 h-8 w-0.5 -translate-y-1/2 rounded bg-border transition-colors duration-200 group-hover:bg-primary"},null,-1)])],34)],6),e("div",Qo,[e("div",er,[e("div",tr,[n(o).comparisonMode?(u(),x("div",sr,[M(To)])):X("",!0),n(o).activeCharts.length===0?(u(),fe(qo,{key:1})):(u(),x("div",or,[e("div",{class:U(p.value)},[(u(!0),x(oe,null,re(C.value,D=>(u(),x("div",{key:D.id,class:U([{"opacity-60":!D.isActive}])},[M(Ds,{"chart-id":D.id,onRemoveChart:ae=>F(D.id),class:"rounded-lg sm:rounded-xl border border-border/50 bg-pale-yellow-100/80 shadow-sm backdrop-blur-sm"},null,8,["chart-id","onRemoveChart"])],2))),128))],2)]))])]),n(o).activeCharts.length>0?(u(),x("div",rr,[e("div",ar,[e("div",nr,[e("div",lr,[e("div",ir,[M(n(et),{class:"size-3 sm:size-4 text-primary"})]),c[6]||(c[6]=e("span",{class:"hidden sm:inline"},"전역 설정",-1))]),e("div",cr,[e("label",dr,[he(e("input",{"onUpdate:modelValue":c[0]||(c[0]=D=>d.value.showVolume=D),type:"checkbox",onChange:B,class:"size-3 sm:size-4 rounded border-border bg-input text-primary transition-colors focus:ring-2 focus:ring-primary/50 focus:ring-offset-0"},null,544),[[Se,d.value.showVolume]]),c[7]||(c[7]=pe(" 거래량 ",-1))]),e("label",ur,[he(e("input",{"onUpdate:modelValue":c[1]||(c[1]=D=>d.value.showMA=D),type:"checkbox",onChange:B,class:"size-3 sm:size-4 rounded border-border bg-input text-primary transition-colors focus:ring-2 focus:ring-primary/50 focus:ring-offset-0"},null,544),[[Se,d.value.showMA]]),c[8]||(c[8]=e("span",{class:"hidden sm:inline"},"이동평균선",-1)),c[9]||(c[9]=e("span",{class:"sm:hidden"},"MA",-1))]),e("label",mr,[he(e("input",{"onUpdate:modelValue":c[2]||(c[2]=D=>d.value.syncZoom=D),type:"checkbox",onChange:B,class:"size-3 sm:size-4 rounded border-border bg-input text-primary transition-colors focus:ring-2 focus:ring-primary/50 focus:ring-offset-0"},null,544),[[Se,d.value.syncZoom]]),c[10]||(c[10]=e("span",{class:"hidden sm:inline"},"줌 동기화",-1)),c[11]||(c[11]=e("span",{class:"sm:hidden"},"동기화",-1))])])]),e("div",pr,[c[12]||(c[12]=e("div",{class:"text-xs sm:text-sm font-semibold text-foreground hidden sm:block"},"레이아웃",-1)),e("div",fr,[(u(),x(oe,null,re(b,D=>e("button",{key:D.value,onClick:ae=>j.value=D.value,class:U(["rounded-md p-1.5 sm:p-2.5 transition-all duration-200",j.value===D.value?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-background hover:text-foreground"]),title:D.label},[(u(),fe(Te(D.icon),{class:"size-3 sm:size-4"}))],10,vr)),64))])]),e("div",gr,[e("button",{onClick:P,class:"flex items-center gap-1 sm:gap-2 rounded-lg bg-primary px-2 sm:px-4 py-1.5 sm:py-2.5 text-xs sm:text-sm font-semibold text-primary-foreground shadow-sm transition-all duration-200 hover:bg-primary/90 hover:shadow-md"},[M(n(je),{class:"size-3 sm:size-4"}),c[13]||(c[13]=e("span",{class:"hidden sm:inline"},"내보내기",-1))]),e("button",{onClick:Z,class:"flex items-center gap-1 sm:gap-2 rounded-lg border border-border bg-pale-yellow-100 px-2 sm:px-4 py-1.5 sm:py-2.5 text-xs sm:text-sm font-semibold text-foreground shadow-sm transition-all duration-200 hover:bg-muted hover:shadow-md"},[M(n(Ve),{class:"size-3 sm:size-4"}),c[14]||(c[14]=e("span",{class:"hidden sm:inline"},"초기화",-1))])])])])):X("",!0)]),M(Re,{name:"fade"},{default:Le(()=>[g.value?(u(),x("div",{key:0,class:"fixed inset-0 z-50 lg:hidden",onClick:c[4]||(c[4]=D=>g.value=!1)},[c[16]||(c[16]=e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm"},null,-1)),M(Re,{name:"slide-right"},{default:Le(()=>[g.value?(u(),x("div",xr,[e("div",hr,[e("div",br,[c[15]||(c[15]=e("h3",{class:"text-base sm:text-lg font-bold text-foreground"},"종목 선택",-1)),e("button",{onClick:c[3]||(c[3]=D=>g.value=!1),class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},[M(n(ze),{class:"size-4 sm:size-5"})])]),e("div",yr,[M(Oe)])])])):X("",!0)]),_:1})])):X("",!0)]),_:1}),n(o).isLoading?(u(),fe(Ho,{key:0})):X("",!0)]))}},Cr=Ie(_r,[["__scopeId","data-v-96253a5b"]]),wr={class:"stock-chart-view"},$r={__name:"StockChartView",setup(V){const o=be();return ve(()=>{o.stockData||o.loadStockData()}),(j,g)=>(u(),x("div",wr,[M(Cr)]))}},Rr=Ie($r,[["__scopeId","data-v-82facd6b"]]);export{Rr as default};
