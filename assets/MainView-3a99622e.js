import{r as d,e as H,j as W,o as w,c as z,h as N,F as T,p as de,k as he,a as m,i as U,g as A,t as R,u as $,w as fe,v as ge}from"./index-74207440.js";import{_ as I,t as X,w as be,b as ye,r as xe}from"./tickers_rating_order-b6285468.js";const K=1,we={__name:"StaticsModule_basic",props:{message:Object},setup(e){const t=e,i=d({types:t.message.types,ticker:t.message.ticker,candlecnt:t.message.candlecnt,timeInterval:t.message.timeInterval}),l=d([{data:[]}]),o=d({chart:{type:"candlestick",height:350,animations:{enabled:!1}},xaxis:{type:"datetime"},legend:{show:!0,position:"left"},annotations:{yaxis:Array.from({length:6},()=>({y:0,type:"numeric",borderColor:"#FF4560",label:{borderColor:"#FF4560",style:{show:!0,color:"#999",offsetX:0,offsetY:0,lineWidth:2},text:""}}))},plotOptions:{candlestick:{colors:{upward:"#FF4560",downward:"#0070FF"}}}}),r=d({candle_date_time_kst:0,opening_price:0,high_price:0,low_price:0,trade_price:0}),h=d([]),c=d([]),k=async n=>{const a=await new Response(n.data).json(),p=Math.floor(a.timestamp/(24*60*60*1e3))*(24*60*60*1e3)+9*60*60*1e3;a.code==i.value.ticker&&(F(a,p),C(),console.log("WebSocket data received:",r.value))},F=(n,a)=>{r.value={candle_date_time_kst:a,opening_price:n.opening_price,high_price:n.high_price,low_price:n.low_price,trade_price:n.trade_price},s(r.value.high_price,h),s(r.value.low_price,c),u(r.value.candle_date_time_kst,[r.value.opening_price,r.value.high_price,r.value.low_price,r.value.trade_price])},C=()=>{const n=o.value.annotations.yaxis,a=r.value;let p=1.012,g=1.01;a.low_price*.01;const b=[{label:"[trate] ",y:a.trade_price*p,color:"#FFA500"},{label:"[tolerrance] ",y:a.low_price,color:"#008080"},{label:"[brate] ",y:a.trade_price*g,color:"#800080"}];n[0].lineWidth=12,n[1].lineWidth=23,n[2].lineWidth=34,n[3].lineWidth=21,n[4].lineWidth=12,n[5].lineWidth=23;for(let v=0;v<b.length;v++)n[v].y=b[v].y,n[v].label.text=b[v].label+b[v].y,n[v].borderColor=b[v].color,n[v].label.style.background=b[v].color;f(4,c),f(5,h)},S=()=>{try{const n=new WebSocket("wss://api.upbit.com/websocket/v1");n.onopen=a=>{n.send(JSON.stringify([{ticket:"test"},{type:"ticker",codes:[i.value.ticker]}]))},n.onclose=a=>{console.error("WebSocket closed:",a)},n.onmessage=k}catch(n){console.error("Error fetching candle data:",n)}};H(()=>{S()});const s=(n,a)=>{n!==a.value[a.value.length-1]&&a.value.push(n),a.value.length>K&&a.value.shift()},u=(n,a)=>{l.value[0].data.length>=K&&l.value[0].data.shift(),l.value[0].data.push({x:n,y:a})},f=(n,a)=>{const p=o.value.annotations.yaxis,g=a.value[a.value.length-2];p[n].y=g,p[n].label.text=`[${n===4?"pl":"ph"}] ${g}`};return(n,a)=>{const p=W("apexchart");return w(),z("div",null,[N(p,{type:"candlestick",options:o.value,series:l.value},null,8,["options","series"])])}}},ke=I(we,[["__scopeId","data-v-bb036ba8"]]),V={baseUrl:"http://172.30.1.10:5002/",pingEndpoint:"ping",booksEndpoint:"books",coinsEndpoint:"coins",websocket:"websocket",UpbitInfo:"upbitinfo",UpdateMarkdown:"updatemarkdown",chartcoin:"chartcoin/1",chartstock:"chartstock/1",Bokeh:"bokeh/1",Report:"report/1",getPingRouteURL(){return console.log(this.baseUrl+this.pingEndpoint),this.baseUrl+this.pingEndpoint},getCoinsRouteURL(){return console.log(this.baseUrl+this.coinsEndpoint),this.baseUrl+this.coinsEndpoint},getWebsocketRouteURL(){return console.log(this.baseUrl+this.websocket),this.baseUrl+this.websocket},getUpbitInfoRouteURL(){return console.log(this.baseUrl+this.UpbitInfo),this.baseUrl+this.UpbitInfo},getUpdateMarkdownRouteURL(){return console.log(this.baseUrl+this.UpdateMarkdown),this.baseUrl+this.UpdateMarkdown},getUpdateChartCoinRouteURL(){return console.log(this.baseUrl+this.chartcoin),this.baseUrl+this.chartcoin},getUpdateChartStockRouteURL(){return console.log(this.baseUrl+this.chartstock),this.baseUrl+this.chartstock},getUpdateBokehRouteURL(){return console.log(this.baseUrl+this.Bokeh),this.baseUrl+this.Bokeh},getUpdateReportRouteURL(){return console.log(this.baseUrl+this.Report),this.baseUrl+this.Report},getTickersUDF(){return[...new Set([...X,...X])]},getWatchesTickerUDF(){return be},getBalancesTickersUDF(){return ye},getRankTickersUDF(){return xe}};function P(e){var t=e.width,i=e.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:i}}function Y(e,t){return e.width===t.width&&e.height===t.height}var Ce=function(){function e(t){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return e.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(e.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),e.prototype.subscribe=function(t){var i=this,l={next:t};return this._observers.push(l),{unsubscribe:function(){i._observers=i._observers.filter(function(o){return o!==l})}}},e.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},e.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},e.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},e.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(i){return i.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},e}();function Se(e){return new Ce(e)}(function(){function e(t,i,l){var o;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=P({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=i??function(r){return r},this._allowResizeObserver=(o=l==null?void 0:l.allowResizeObserver)!==null&&o!==void 0?o:!0,this._chooseAndInitObserver()}return e.prototype.dispose=function(){var t,i;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(i=this._devicePixelRatioObservable)===null||i===void 0||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(e.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bitmapSize",{get:function(){return P({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),e.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=P(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},e.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},e.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(i){return i!==t})},Object.defineProperty(e.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),e.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},e.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(i){return i!==t})},e.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},e.prototype._resizeBitmap=function(t){var i=this.bitmapSize;Y(i,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(i,t))},e.prototype._emitBitmapSizeChanged=function(t,i){var l=this;this._bitmapSizeChangedListeners.forEach(function(o){return o.call(l,t,i)})},e.prototype._suggestNewBitmapSize=function(t){var i=this._suggestedBitmapSize,l=P(this._transformBitmapSize(t,this._canvasElementClientSize)),o=Y(this.bitmapSize,l)?null:l;i===null&&o===null||i!==null&&o!==null&&Y(i,o)||(this._suggestedBitmapSize=o,this._emitSuggestedBitmapSizeChanged(i,o))},e.prototype._emitSuggestedBitmapSizeChanged=function(t,i){var l=this;this._suggestedBitmapSizeChangedListeners.forEach(function(o){return o.call(l,t,i)})},e.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}De().then(function(i){return i?t._initResizeObserver():t._initDevicePixelRatioObservable()})},e.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var i=G(this._canvasElement);if(i===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Se(i),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},e.prototype._invalidateBitmapSize=function(){var t,i;if(this._canvasElement!==null){var l=G(this._canvasElement);if(l!==null){var o=(i=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&i!==void 0?i:l.devicePixelRatio,r=this._canvasElement.getClientRects(),h=r[0]!==void 0?ze(r[0],o):P({width:this._canvasElementClientSize.width*o,height:this._canvasElementClientSize.height*o});this._suggestNewBitmapSize(h)}}},e.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(i){var l=i.find(function(h){return h.target===t._canvasElement});if(!(!l||!l.devicePixelContentBoxSize||!l.devicePixelContentBoxSize[0])){var o=l.devicePixelContentBoxSize[0],r=P({width:o.inlineSize,height:o.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},e})();function G(e){return e.ownerDocument.defaultView}function De(){return new Promise(function(e){var t=new ResizeObserver(function(i){e(i.every(function(l){return"devicePixelContentBoxSize"in l})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function ze(e,t){return P({width:Math.round(e.left*t+e.width*t)-Math.round(e.left*t),height:Math.round(e.top*t+e.height*t)-Math.round(e.top*t)})}(function(){function e(t,i,l){if(i.width===0||i.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,l.width===0||l.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=l,this._context=t}return e.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},e.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(e.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),e})();/*!
 * @license
 * TradingView Lightweight Charts™ v4.1.0
 * Copyright (c) 2023 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Fe={color:"#2196f3"},Le={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var q,J;(function(e){e[e.Simple=0]="Simple",e[e.WithSteps=1]="WithSteps",e[e.Curved=2]="Curved"})(q||(q={})),function(e){e[e.Solid=0]="Solid",e[e.Dotted=1]="Dotted",e[e.Dashed=2]="Dashed",e[e.LargeDashed=3]="LargeDashed",e[e.SparseDotted=4]="SparseDotted"}(J||(J={}));function pe(e){return typeof e=="number"&&isFinite(e)}function ve(e){return typeof e=="number"&&e%1==0}var Z;(function(e){e[e.Normal=0]="Normal",e[e.Magnet=1]="Magnet",e[e.Hidden=2]="Hidden"})(Z||(Z={}));const ee=".";function te(e,t){if(!pe(e))return"n/a";if(!ve(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?e.toString():("0000000000000000"+e.toString()).slice(-t)}class _e{constructor(t,i){if(i||(i=1),pe(t)&&ve(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=i,this.hs()}format(t){const i=t<0?"−":"";return t=Math.abs(t),i+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){const i=this.Li/this.rs;let l=Math.floor(t),o="";const r=this.os!==void 0?this.os:NaN;if(i>1){let h=+(Math.round(t*i)-l*i).toFixed(this.os);h>=i&&(h-=i,l+=1),o=ee+te(+h.toFixed(this.os)*this.rs,r)}else l=Math.round(l*i)/i,r>0&&(o=ee+te(0,r));return l.toFixed(0)+o}}class Oe extends _e{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}function me(e,t,i,l,o=0,r=t.length){let h=r-o;for(;0<h;){const c=h>>1,k=o+c;l(t[k],i)===e?(o=k+1,h-=c+1):h=c}return o}me.bind(null,!0);me.bind(null,!1);var ie;(function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.None=0]="None",e[e.NearestRight=1]="NearestRight"})(ie||(ie={}));var ne;(function(e){e[e.Normal=0]="Normal",e[e.Logarithmic=1]="Logarithmic",e[e.Percentage=2]="Percentage",e[e.IndexedTo100=3]="IndexedTo100"})(ne||(ne={}));new Oe;new _e(100,1);var se,ae,oe,le,re;(function(e){e[e.OnTouchEnd=0]="OnTouchEnd",e[e.OnNextTap=1]="OnNextTap"})(se||(se={}));(function(e){e[e.Disabled=0]="Disabled",e[e.Continuous=1]="Continuous",e[e.OnDataUpdate=2]="OnDataUpdate"})(ae||(ae={})),function(e){e[e.LastBar=0]="LastBar",e[e.LastVisible=1]="LastVisible"}(oe||(oe={})),function(e){e.Solid="solid",e.VerticalGradient="gradient"}(le||(le={})),function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.DayOfMonth=2]="DayOfMonth",e[e.Time=3]="Time",e[e.TimeWithSeconds=4]="TimeWithSeconds"}(re||(re={}));const ce=typeof window<"u";ce&&navigator.userAgentData&&navigator.userAgentData.brands.some(e=>e.brand.includes("Chromium"))&&ce&&(!((Q=navigator==null?void 0:navigator.userAgentData)===null||Q===void 0)&&Q.platform?navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);var Q;Object.assign(Object.assign({},Le),Fe);const ue=e=>e.split("-")[1];async function j(e,t,i,l){try{let o=null;if(l==="months"||l==="weeks"||l==="days")o=`https://api.upbit.com/v1/candles/${l}/?market=KRW-${ue(t)}&count=${i}`;else{const k=l.match(/([a-zA-Z]+)(\d+)/),F=k?k[1]:null,C=k?k[2]:null;o=`https://api.upbit.com/v1/candles/${F}/${C}?market=KRW-${ue(t)}&count=${i}`}const r=await fetch(o);if(!r.ok)throw new Error(`Request failed with status: ${r.status}`);const h=await r.json(),c=d(null);return c.value=h,c}catch(o){console.error(o)}}const Ee=e=>(de("data-v-4444fcaf"),e=e(),he(),e),Be=Ee(()=>m("div",{class:"d-flex flex-wrap"},null,-1)),Re={__name:"StaticsModule_onecandle",props:{message:Object},setup(e){const t=e,i=d({types:t.message.types,ticker:t.message.ticker,candlecnt:t.message.candlecnt,timeInterval:t.message.timeInterval});d([]);const l=d([]);d([]),d([]);const o=d([]),r=d([]);d();const h=d([{name:"캔들 차트",type:"candlestick",data:[]},{name:"상승트렌드",type:"line",width:1,data:[]},{name:"하락트렌드",type:"line",width:1,data:[]}]),c=d({chart:{type:"candle",height:5250,width:100},stroke:{curve:"smooth",width:[1,9,9],colors:["#00FF00","#9E0ADD","#FFB291"]},toolbar:{show:!1},title:{text:i.value.ticker},fill:{colors:["blue","Green"],fill:{type:"solid",opacity:.7}},xaxis:{type:"datetime",labels:{show:!0},axisBorder:{show:!1}},animations:{speed:500112},markers:{hover:{sizeOffset:5}},annotations:{yaxis:[{y:4e7,borderColor:"#00E396",label:{borderColor:"#00E396",style:{color:"#fff",background:"#00E396"},text:"Support"}},{y:4e7,y2:26e6,borderColor:"#000",fillColor:"#FEB019",opacity:.2,label:{borderColor:"#333",style:{fontSize:"10px",color:"#333",background:"#FEB019"},text:"Y-axis range"}}],xaxis:[{x:15198272e5,strokeDashArray:0,borderColor:"#775DD0",label:{borderColor:"#775DD0",style:{color:"#fff",background:"#775DD0"},text:"Anno Test11111111"}},{x:new Date("01 Dec 20").getTime(),x2:new Date("01 Feb 2023").getTime(),fillColor:"#B3F7CA",opacity:.4,label:{borderColor:"#B3F7CA",style:{fontSize:"10px",color:"#fff",background:"#00E396"},offsetY:-10,text:"X-axis range"}}],points:[{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:8,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#FF4560"},text:"Point Annotation"}},{x:16487712e5,y:26e6,marker:{size:2},image:{path:"../../assets/images/ico-instagram.png"}}]},plotOptions:{candlestick:{colors:{upward:"#DF7D46",downward:"#3C90EB"},wick:{useFillColor:!0}}},yaxis:{tooltip:{enabled:!1}}});function k(s){let u=s.value[0].low_price,f=s.value[0].low_price,n=new Date(s.value[0].candle_date_time_kst).getTime(),a=new Date(s.value[0].candle_date_time_kst).getTime(),p=s.value[0].high_price,g=s.value[0].high_price,b=new Date(s.value[0].candle_date_time_kst).getTime(),v=new Date(s.value[0].candle_date_time_kst).getTime();for(const y of s.value){const _=new Date(y.candle_date_time_kst).getTime(),D=y.low_price,x=y.high_price;D<u&&(u=D,n=_),D>f&&(f=D,a=_),x<p&&(p=x,b=_),x>g&&(g=x,v=_)}return{minLowPrice:u,maxLowPrice:f,minLowDate:n,maxLowDate:a,minHighPrice:p,maxHighPrice:g,minHighDate:b,maxHighDate:v}}function F(s){const{minLowPrice:u,maxLowPrice:f,minLowDate:n,maxLowDate:a,minHighPrice:p,maxHighPrice:g,minHighDate:b,maxHighDate:v}=k(s);r.value=[{x:n,y:u},{x:a,y:f}],o.value=[{x:b,y:p},{x:v,y:g}];const y=C(o.value[0],o.value[1]);return S(o.value[0],o.value[1]),C(r.value[0],r.value[1]),S(r.value[0],r.value[1]),c.value.annotations.xaxis[0].x=y.x,c.value.annotations.xaxis[0].label.text="d",c.value.annotations.points[0].x=y.x,c.value.annotations.points[0].y=y.y,c.value.annotations.points[0].label.text=r.value[0].y,s.value.map(_=>({x:new Date(_.candle_date_time_kst).getTime(),y:[_.opening_price,_.high_price,_.low_price,_.trade_price]}))}function C(s,u){return s.y>u.y?s:s.y<u.y?u:s}function S(s,u){return s.y<u.y?s:s.y>u.y?u:s}const B=async()=>{try{let s="";i.value.timeInterval.includes("minutes1")||i.value.timeInterval.includes("minutes3")||i.value.timeInterval.includes("minutes5")||i.value.timeInterval.includes("minutes10")||i.value.timeInterval.includes("minutes15")||i.value.timeInterval.includes("minutes30")||i.value.timeInterval.includes("minutes60")||i.value.timeInterval.includes("minutes240")?s="days":(i.value.timeInterval.includes("days")||i.value.timeInterval.includes("weeks"))&&(s="months");const u=await j(i.value.types,i.value.ticker,3,s);l.value=u,h.value[0].data=F(l.value),h.value[1].data=o.value,h.value[2].data=r.value}catch(s){console.error(s)}};return H(()=>{B()}),(s,u)=>{const f=W("apexchart");return w(),z(T,null,[N(f,{type:"candlestick",options:c.value,series:h.value},null,8,["options","series"]),Be],64)}}},Pe=I(Re,[["__scopeId","data-v-4444fcaf"]]);const Te={__name:"StaticsModule_basic_Quant",props:{message:Object},setup(e){const t=e,i=d({types:t.message.types,ticker:t.message.ticker,candlecnt:t.message.candlecnt,timeInterval:t.message.timeInterval}),l=d([]),o=d([]),r=d([]),h=d([{name:"캔들 차트",type:"candlestick",data:[]},{name:"상승트렌드",type:"line",width:1,data:[]},{name:"하락트렌드",type:"line",width:1,data:[]}]),c=d({chart:{type:"candle",height:5250,width:11100},stroke:{curve:"smooth",width:[1,9,9],colors:["#00FF00","#9E0ADD","#FFB291"]},toolbar:{show:!1},title:{text:i.value.ticker+" "+i.value.timeInterval+" "+i.value.candlecnt+" "+i.value.types+" "},fill:{colors:["blue","Green"],fill:{type:"solid",opacity:.7}},xaxis:{type:"datetime",labels:{show:!0},axisBorder:{show:!1}},animations:{speed:500112},markers:{hover:{sizeOffset:5}},annotations:{yaxis:[{y:4e7,borderColor:"#00E396",label:{borderColor:"#00E396",style:{color:"#fff",background:"#00E396"},text:"Support"}},{y:2e7,y2:26e6,borderColor:"#000",fillColor:"#FEB019",opacity:.9,label:{borderColor:"#333",style:{fontSize:"10px",color:"#333",background:"#FEB019"},text:"Y-axis range"}}],xaxis:[{x:15198272e5,strokeDashArray:0,borderColor:"#FF0000",label:{borderColor:"#775DD0",style:{color:"#fff",background:"#775DD0"},text:"Anno Test11111111"}},{x:new Date("01 Dec 20").getTime(),x2:new Date("01 Feb 2023").getTime(),fillColor:"#0000FF",opacity:.3,label:{borderColor:"#B3F7CA",style:{fontSize:"12px",color:"#FFFFFF",background:"#FF0000"},offsetY:-10,text:"X-axis range"}},{x:new Date("01 Dec 20").getTime(),x2:new Date("01 Feb 2023").getTime(),fillColor:"#B3F7CA",opacity:.5,label:{borderColor:"#B3F7CA",style:{fontSize:"12px",color:"#FFFFFF",background:"#0000FF"},offsetY:-10,text:"X-axis range"}}],points:[{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:12,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:10,style:{color:"#fff",background:"#FF4560"},text:"Point Annotation"}},{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#FF4560"},text:"Point Annotation"}},{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#0000FF"},text:"Point Annotation"}},{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#0000FF"},text:"Point Annotation"}}]},plotOptions:{candlestick:{colors:{upward:"#DF7D46",downward:"#3C90EB"},wick:{useFillColor:!0}}},yaxis:{tooltip:{enabled:!1}}});function k(n){let a=n.value[0].low_price,p=n.value[0].low_price,g=new Date(n.value[0].candle_date_time_kst).getTime(),b=new Date(n.value[0].candle_date_time_kst).getTime(),v=n.value[0].high_price,y=n.value[0].high_price,_=new Date(n.value[0].candle_date_time_kst).getTime(),D=new Date(n.value[0].candle_date_time_kst).getTime();for(const x of n.value){const O=new Date(x.candle_date_time_kst).getTime(),E=x.low_price,L=x.high_price;E<a&&(a=E,g=O),E>p&&(p=E,b=O),L<v&&(v=L,_=O),L>y&&(y=L,D=O)}return{minLowPrice:a,maxLowPrice:p,minLowDate:g,maxLowDate:b,minHighPrice:v,maxHighPrice:y,minHighDate:_,maxHighDate:D}}function F(n){const{minLowPrice:a,maxLowPrice:p,minLowDate:g,maxLowDate:b,minHighPrice:v,maxHighPrice:y,minHighDate:_,maxHighDate:D}=k(n);r.value=[{x:g,y:a},{x:b,y:p}],o.value=[{x:_,y:v},{x:D,y}];const x=C(o.value[0],o.value[1]),O=S(o.value[0],o.value[1]),E=C(r.value[0],r.value[1]),L=S(r.value[0],r.value[1]);return c.value.annotations.xaxis[0].x=L.x,c.value.annotations.xaxis[0].label.text="L",c.value.annotations.yaxis[0].y=x.y,c.value.annotations.yaxis[0].label.text="H",c.value.annotations.xaxis[1].x=O.x,c.value.annotations.xaxis[1].x2=L.x,c.value.annotations.xaxis[1].label.text="저점구간",c.value.annotations.xaxis[2].x=x.x,c.value.annotations.xaxis[2].x2=E.x,c.value.annotations.xaxis[2].label.text="고점구간",c.value.annotations.points[0].x=O.x,c.value.annotations.points[0].y=O.y,c.value.annotations.points[0].label.text=O.y,c.value.annotations.points[1].x=x.x,c.value.annotations.points[1].y=x.y,c.value.annotations.points[1].label.text=x.y,c.value.annotations.points[2].x=L.x,c.value.annotations.points[2].y=L.y,c.value.annotations.points[2].label.text=L.y,c.value.annotations.points[3].x=E.x,c.value.annotations.points[3].y=E.y,c.value.annotations.points[3].label.text=E.y,n.value.map(M=>({x:new Date(M.candle_date_time_kst).getTime(),y:[M.opening_price,M.high_price,M.low_price,M.trade_price]}))}function C(n,a){return n.y>a.y?n:n.y<a.y?a:n}function S(n,a){return n.y<a.y?n:n.y>a.y?a:n}const B=async()=>{try{const n=await j(i.value.types,i.value.ticker,i.value.candlecnt,i.value.timeInterval);l.value=n,console.log("fetchDataAndRefreshChart",l),h.value[0].data=F(l.value),h.value[1].data=o.value,h.value[2].data=r.value}catch(n){console.error(n)}},s=d([{time:0,open:0,high:0,low:0,close:0,_internal_originalTime:0}]),u=async n=>{const a=await new Response(n.data).json();a.timestamp,a.code==i.value.ticker&&(s.value={candle_date_time_kst:Math.floor(a.timestamp/24/60/60/1e3)*24*60*60,opening_price:a.trade_price,high_price:a.trade_price,low_price:a.trade_price,trade_price:a.trade_price,turnover:(a.opening_price+a.low_price+a.high_price+a.trade_price)/4*a.trade_volume},f(s))},f=async n=>{console.log("candleData",n)};return H(()=>{B();try{const n=new WebSocket("wss://api.upbit.com/websocket/v1");n.onopen=a=>{n.send(JSON.stringify([{ticket:"test"},{type:"ticker",codes:[i.value.ticker]}]))},n.onclose=a=>{console.error("WebSocket closed:",a)},n.onmessage=u}catch(n){console.error("Error fetching candle data:",n)}}),(n,a)=>{const p=W("apexchart");return w(),z("div",null,[N(p,{type:"candlestick",options:c.value,series:h.value},null,8,["options","series"])])}}},Me=I(Te,[["__scopeId","data-v-8d5b511c"]]);const Ue=e=>(de("data-v-9f4bedcf"),e=e(),he(),e),Ie=Ue(()=>m("div",{class:"d-flex flex-wrap"},null,-1)),Ae={__name:"StaticsModule_small",props:{message:Object},setup(e){const t=e,i=d({types:t.message.types,ticker:t.message.ticker,candlecnt:t.message.candlecnt,timeInterval:t.message.timeInterval});d([]);const l=d([]);d([]),d([]);const o=d([]),r=d([]),h=d([{name:"캔들 차트",type:"candlestick",data:[]},{name:"상승트렌드",type:"line",width:1,data:[]},{name:"하락트렌드",type:"line",width:1,data:[]}]);d([{data:[]}]);const c=d({chart:{type:"candle",height:5250,width:100},stroke:{curve:"smooth",width:[1,9,9],colors:["#00FF00","#9E0ADD","#FFB291"]},toolbar:{show:!1},title:{text:i.value.ticker},fill:{colors:["blue","Green"],fill:{type:"solid",opacity:.7}},xaxis:{type:"datetime",labels:{show:!0},axisBorder:{show:!1}},animations:{speed:500112},markers:{hover:{sizeOffset:5}},annotations:{yaxis:[{y:4e7,borderColor:"#00E396",label:{borderColor:"#00E396",style:{color:"#fff",background:"#00E396"},text:"Support"}},{y:4e7,y2:26e6,borderColor:"#000",fillColor:"#FEB019",opacity:.2,label:{borderColor:"#333",style:{fontSize:"10px",color:"#333",background:"#FEB019"},text:"Y-axis range"}}],xaxis:[{x:15198272e5,strokeDashArray:0,borderColor:"#775DD0",label:{borderColor:"#775DD0",style:{color:"#fff",background:"#775DD0"},text:"Anno Test11111111"}},{x:new Date("01 Dec 20").getTime(),x2:new Date("01 Feb 2023").getTime(),fillColor:"#B3F7CA",opacity:.4,label:{borderColor:"#B3F7CA",style:{fontSize:"10px",color:"#eff",background:"#00E396"},offsetY:-10,text:"X-axis range"}},{x:new Date("01 Dec 20").getTime(),x2:new Date("01 Feb 2023").getTime(),fillColor:"#B3F7CA",opacity:.4,label:{borderColor:"#B3F7CA",style:{fontSize:"10px",color:"#eff",background:"#00E396"},offsetY:-10,text:"X-axis range"}}],points:[{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:8,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#FF4560"},text:"Point Annotation"}},{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:8,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#FF4560"},text:"Point Annotation"}}]},plotOptions:{candlestick:{colors:{upward:"#DF7D46",downward:"#3C90EB"},wick:{useFillColor:!0}}},yaxis:{tooltip:{enabled:!1}}});function k(s){let u=s.value[0].low_price,f=s.value[0].low_price,n=new Date(s.value[0].candle_date_time_kst).getTime(),a=new Date(s.value[0].candle_date_time_kst).getTime(),p=s.value[0].high_price,g=s.value[0].high_price,b=new Date(s.value[0].candle_date_time_kst).getTime(),v=new Date(s.value[0].candle_date_time_kst).getTime();for(const y of s.value){const _=new Date(y.candle_date_time_kst).getTime(),D=y.low_price,x=y.high_price;D<u&&(u=D,n=_),D>f&&(f=D,a=_),x<p&&(p=x,b=_),x>g&&(g=x,v=_)}return{minLowPrice:u,maxLowPrice:f,minLowDate:n,maxLowDate:a,minHighPrice:p,maxHighPrice:g,minHighDate:b,maxHighDate:v}}function F(s){const{minLowPrice:u,maxLowPrice:f,minLowDate:n,maxLowDate:a,minHighPrice:p,maxHighPrice:g,minHighDate:b,maxHighDate:v}=k(s);r.value=[{x:n,y:u},{x:a,y:f}],o.value=[{x:b,y:p},{x:v,y:g}];const y=C(o.value[0],o.value[1]);return S(o.value[0],o.value[1]),C(r.value[0],r.value[1]),S(r.value[0],r.value[1]),c.value.annotations.xaxis[0].x=y.x,c.value.annotations.xaxis[0].label.text="d",c.value.annotations.points[0].x=y.x,c.value.annotations.points[0].y=y.y,c.value.annotations.points[0].label.text=r.value[0].y,s.value.map(_=>({x:new Date(_.candle_date_time_kst).getTime(),y:[_.opening_price,_.high_price,_.low_price,_.trade_price]}))}function C(s,u){return s.y>u.y?s:s.y<u.y?u:s}function S(s,u){return s.y<u.y?s:s.y>u.y?u:s}const B=async()=>{try{let s="";i.value.timeInterval.includes("minutes1")?s="minutes240":i.value.timeInterval.includes("minutes3")?s="minutes3":i.value.timeInterval.includes("minutes5")?s="minutes10":i.value.timeInterval.includes("minutes10")?s="minutes15":i.value.timeInterval.includes("minutes15")?s="minutes30":i.value.timeInterval.includes("minutes30")?s="minutes60":i.value.timeInterval.includes("minutes60")?s="minutes240":i.value.timeInterval.includes("minutes240")?s="days":i.value.timeInterval.includes("days")?s="weeks":i.value.timeInterval.includes("weeks")&&(s="months");const u=await j(i.value.types,i.value.ticker,Math.floor(i.value.candlecnt/7)+Math.floor(i.value.candlecnt%7),s);l.value=u,h.value[0].data=F(l.value),h.value[1].data=o.value,h.value[2].data=r.value}catch(s){console.error(s)}};return H(()=>{B()}),(s,u)=>{const f=W("apexchart");return w(),z(T,null,[N(f,{type:"candlestick",options:c.value,series:h.value},null,8,["options","series"]),Ie],64)}}},He=I(Ae,[["__scopeId","data-v-9f4bedcf"]]);const We={class:"row"},Ne={class:"col-md-6"},$e={class:"chart-container"},Ve={class:"col-md-6"},Ye={class:"chart-container"},Qe={class:"coin-card-container-wrapper div-block-space-style"},je={class:"coin-card-container"},Xe=["onClick"],Ke={class:"coin-card-container-wrapper div-block-space-style"},Ge={class:"coin-card-container"},qe=["onClick"],Je={class:"coin-card-container-wrapper div-block-space-style"},Ze={class:"coin-card-container"},et=["onClick"],tt={class:"coin-card-container-wrapper div-block-space-style"},it={class:"coin-card-container"},nt=["onClick"],st={class:"container-xxl m-1 text-center"},at={class:"col-md-12"},ot={class:"chart-container"},lt={class:""},rt={__name:"StaticsChart",setup(e){const t=V.getWatchesTickerUDF(),i=V.getBalancesTickersUDF(),l=V.getRankTickersUDF(),o=d("weeks"),r=d(20),h=d("KRW-ETH"),c=d({types:"candle",ticker:h,candlecnt:r,timeInterval:o}),k=d({minutes1:{Open:null,High:null,Low:null,Close:null},minutes3:{Open:null,High:null,Low:null,Close:null},minutes5:{Open:null,High:null,Low:null,Close:null},minutes10:{Open:null,High:null,Low:null,Close:null},minutes15:{Open:null,High:null,Low:null,Close:null},minutes30:{Open:null,High:null,Low:null,Close:null},minutes60:{Open:null,High:null,Low:null,Close:null},minutes240:{Open:null,High:null,Low:null,Close:null},days:{Open:null,High:null,Low:null,Close:null},weeks:{Open:null,High:null,Low:null,Close:null},months:{Open:null,High:null,Low:null,Close:null}}),F=u=>{o.value=u,S()},C=u=>{h.value=u,S()},S=()=>{c.value={types:"candle",ticker:h.value,candlecnt:r.value,timeInterval:o.value}};function B(u){return u.replace("minutes","")}function s(u){return u.replace("KRW-","")}return(u,f)=>(w(),z(T,null,[m("div",We,[m("div",Ne,[m("div",$e,[(w(),U(He,{message:c.value,key:c.value},null,8,["message"])),(w(),U(Pe,{message:c.value,key:c.value},null,8,["message"]))])]),m("div",Ve,[m("div",Ye,[(w(),U(ke,{message:c.value,key:c.value},null,8,["message"])),m("div",Qe,[m("div",je,[(w(!0),z(T,null,A(Object.keys(k.value),(n,a)=>(w(),z("div",{key:a},[m("button",{onClick:p=>F(n),class:"btn-sm rounded-button btn-outline-primary"},R(B(n)),9,Xe)]))),128))])]),m("div",Ke,[m("div",Ge,[(w(!0),z(T,null,A(Object.values($(t)),(n,a)=>(w(),z("div",{key:a},[m("button",{onClick:p=>C(n),class:"col-md-11 btn-sm rounded-button btn-outline-primary:active"},R(s(n)),9,qe)]))),128))])]),m("div",Je,[m("div",Ze,[(w(!0),z(T,null,A(Object.values($(l)),(n,a)=>(w(),z("div",{key:a},[m("button",{onClick:p=>C(n),class:"col-md-11 btn-sm rounded-button btn-outline-primary:active"},R(s(n)),9,et)]))),128))])]),m("div",tt,[m("div",it,[(w(!0),z(T,null,A(Object.values($(i)),(n,a)=>(w(),z("div",{key:a},[m("button",{onClick:p=>C(n),class:"col-md-11 btn-sm rounded-button btn-outline-primary:active"},R(s(n)),9,nt)]))),128))])]),m("button",{onClick:S,class:"btn-sm rounded-button btn-outline-primary:active"},"Update Coin Ticker"),m("div",st,[fe(m("input",{type:"range","onUpdate:modelValue":f[0]||(f[0]=n=>r.value=n),min:"0",max:"5000",onInput:f[1]||(f[1]=(...n)=>u.updateCnt&&u.updateCnt(...n)),class:"w-100"},null,544),[[ge,r.value]]),m("p",null," [캔들갯수 "+R(r.value)+"] 상단차트는 설정값 차트, 하단은 7일기준 몫+나머지",1)])])]),m("div",at,[m("div",ot,[(w(),U(Me,{message:c.value,key:c.value},null,8,["message"]))])])]),m("div",lt,R(h.value)+"-"+R(r.value)+"-"+R(o.value),1)],64))}},ct=I(rt,[["__scopeId","data-v-9ff59271"]]),ht={__name:"MainView",setup(e){return(t,i)=>(w(),U(ct))}};export{ht as default};
