import{_ as j,r as h,e as re,j as le,o as v,c as w,h as ce,a as d,i as I,F as P,g as M,t as F,u as W,w as _e,v as ve}from"./index-dd4a69cf.js";import{t as $,w as ge,b as me,r as fe}from"./tickers_rating_order-2fbfe2f9.js";const V=1,be={__name:"StaticsModule_basic",props:{message:Object},setup(e){const t=e,i=h({types:t.message.types,ticker:t.message.ticker,candlecnt:t.message.candlecnt,timeInterval:t.message.timeInterval}),a=h([{data:[]}]),o=h({chart:{type:"candlestick",height:350,animations:{enabled:!1}},xaxis:{type:"datetime"},legend:{show:!0,position:"left"},annotations:{yaxis:Array.from({length:6},()=>({y:0,type:"numeric",borderColor:"#FF4560",label:{borderColor:"#FF4560",style:{show:!0,color:"#999",offsetX:0,offsetY:0,lineWidth:2},text:""}}))},plotOptions:{candlestick:{colors:{upward:"#FF4560",downward:"#0070FF"}}}}),r=h({candle_date_time_kst:0,opening_price:0,high_price:0,low_price:0,trade_price:0}),u=h([]),l=h([]),g=async n=>{const c=await new Response(n.data).json(),m=Math.floor(c.timestamp/(24*60*60*1e3))*(24*60*60*1e3)+9*60*60*1e3;c.code==i.value.ticker&&(O(c,m),y(),console.log("WebSocket data received:",r.value))},O=(n,c)=>{r.value={candle_date_time_kst:c,opening_price:n.opening_price,high_price:n.high_price,low_price:n.low_price,trade_price:n.trade_price},_(r.value.high_price,u),_(r.value.low_price,l),L(r.value.candle_date_time_kst,[r.value.opening_price,r.value.high_price,r.value.low_price,r.value.trade_price])},y=()=>{const n=o.value.annotations.yaxis,c=r.value;let m=1.012,k=1.01;c.low_price*.01;const b=[{label:"[O]   ",y:c.opening_price,color:"#FF4560"},{label:"[H]   ",y:c.high_price,color:"#00FF00"},{label:"[L]   ",y:c.low_price,color:"#0000FF"},{label:"[C] ",y:c.trade_price,color:"#FF00FF"},{label:"[trate] ",y:c.trade_price*m,color:"#FFA500"},{label:"[tolerrance] ",y:c.low_price,color:"#008080"},{label:"[brate] ",y:c.trade_price*k,color:"#800080"}];n[0].lineWidth=12,n[1].lineWidth=23,n[2].lineWidth=34,n[3].lineWidth=21,n[4].lineWidth=12,n[5].lineWidth=23;for(let p=0;p<b.length;p++)n[p].y=b[p].y,n[p].label.text=b[p].label+b[p].y,n[p].borderColor=b[p].color,n[p].label.style.background=b[p].color;s(4,l),s(5,u)};let f=null;const E=()=>{try{f=new WebSocket("wss://api.upbit.com/websocket/v1"),f.onopen=n=>{f.send(JSON.stringify([{ticket:"test"},{type:"ticker",codes:[i.value.ticker]}]))},f.onclose=n=>{console.error("WebSocket closed:",n)},f.onmessage=g}catch(n){console.error("Error fetching candle data:",n)}};re(()=>{E()});const _=(n,c)=>{n!==c.value[c.value.length-1]&&c.value.push(n),c.value.length>V&&c.value.shift()},L=(n,c)=>{a.value[0].data.length>=V&&a.value[0].data.shift(),a.value[0].data.push({x:n,y:c})},s=(n,c)=>{const m=o.value.annotations.yaxis,k=c.value[c.value.length-2];m[n].y=k,m[n].label.text=`[${n===4?"pl":"ph"}] ${k}`};return(n,c)=>{const m=le("apexchart");return v(),w("div",null,[ce(m,{type:"candlestick",options:o.value,series:a.value},null,8,["options","series"])])}}},we=j(be,[["__scopeId","data-v-71f0c1dc"]]),A={baseUrl:"http://172.30.1.10:5002/",pingEndpoint:"ping",booksEndpoint:"books",coinsEndpoint:"coins",websocket:"websocket",UpbitInfo:"upbitinfo",UpdateMarkdown:"updatemarkdown",chartcoin:"chartcoin/1",chartstock:"chartstock/1",Bokeh:"bokeh/1",Report:"report/1",getPingRouteURL(){return console.log(this.baseUrl+this.pingEndpoint),this.baseUrl+this.pingEndpoint},getCoinsRouteURL(){return console.log(this.baseUrl+this.coinsEndpoint),this.baseUrl+this.coinsEndpoint},getWebsocketRouteURL(){return console.log(this.baseUrl+this.websocket),this.baseUrl+this.websocket},getUpbitInfoRouteURL(){return console.log(this.baseUrl+this.UpbitInfo),this.baseUrl+this.UpbitInfo},getUpdateMarkdownRouteURL(){return console.log(this.baseUrl+this.UpdateMarkdown),this.baseUrl+this.UpdateMarkdown},getUpdateChartCoinRouteURL(){return console.log(this.baseUrl+this.chartcoin),this.baseUrl+this.chartcoin},getUpdateChartStockRouteURL(){return console.log(this.baseUrl+this.chartstock),this.baseUrl+this.chartstock},getUpdateBokehRouteURL(){return console.log(this.baseUrl+this.Bokeh),this.baseUrl+this.Bokeh},getUpdateReportRouteURL(){return console.log(this.baseUrl+this.Report),this.baseUrl+this.Report},getTickersUDF(){return[...new Set([...$,...$])]},getWatchesTickerUDF(){return ge},getBalancesTickersUDF(){return me},getRankTickersUDF(){return fe}};function D(e){var t=e.width,i=e.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:i}}function N(e,t){return e.width===t.width&&e.height===t.height}var ye=function(){function e(t){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return e.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(e.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),e.prototype.subscribe=function(t){var i=this,a={next:t};return this._observers.push(a),{unsubscribe:function(){i._observers=i._observers.filter(function(o){return o!==a})}}},e.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},e.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},e.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},e.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(i){return i.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},e}();function xe(e){return new ye(e)}(function(){function e(t,i,a){var o;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=D({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=i??function(r){return r},this._allowResizeObserver=(o=a==null?void 0:a.allowResizeObserver)!==null&&o!==void 0?o:!0,this._chooseAndInitObserver()}return e.prototype.dispose=function(){var t,i;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(i=this._devicePixelRatioObservable)===null||i===void 0||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(e.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bitmapSize",{get:function(){return D({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),e.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=D(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},e.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},e.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(i){return i!==t})},Object.defineProperty(e.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),e.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},e.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(i){return i!==t})},e.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},e.prototype._resizeBitmap=function(t){var i=this.bitmapSize;N(i,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(i,t))},e.prototype._emitBitmapSizeChanged=function(t,i){var a=this;this._bitmapSizeChangedListeners.forEach(function(o){return o.call(a,t,i)})},e.prototype._suggestNewBitmapSize=function(t){var i=this._suggestedBitmapSize,a=D(this._transformBitmapSize(t,this._canvasElementClientSize)),o=N(this.bitmapSize,a)?null:a;i===null&&o===null||i!==null&&o!==null&&N(i,o)||(this._suggestedBitmapSize=o,this._emitSuggestedBitmapSizeChanged(i,o))},e.prototype._emitSuggestedBitmapSizeChanged=function(t,i){var a=this;this._suggestedBitmapSizeChangedListeners.forEach(function(o){return o.call(a,t,i)})},e.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}ke().then(function(i){return i?t._initResizeObserver():t._initDevicePixelRatioObservable()})},e.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var i=Y(this._canvasElement);if(i===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=xe(i),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},e.prototype._invalidateBitmapSize=function(){var t,i;if(this._canvasElement!==null){var a=Y(this._canvasElement);if(a!==null){var o=(i=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&i!==void 0?i:a.devicePixelRatio,r=this._canvasElement.getClientRects(),u=r[0]!==void 0?Se(r[0],o):D({width:this._canvasElementClientSize.width*o,height:this._canvasElementClientSize.height*o});this._suggestNewBitmapSize(u)}}},e.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(i){var a=i.find(function(u){return u.target===t._canvasElement});if(!(!a||!a.devicePixelContentBoxSize||!a.devicePixelContentBoxSize[0])){var o=a.devicePixelContentBoxSize[0],r=D({width:o.inlineSize,height:o.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},e})();function Y(e){return e.ownerDocument.defaultView}function ke(){return new Promise(function(e){var t=new ResizeObserver(function(i){e(i.every(function(a){return"devicePixelContentBoxSize"in a})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Se(e,t){return D({width:Math.round(e.left*t+e.width*t)-Math.round(e.left*t),height:Math.round(e.top*t+e.height*t)-Math.round(e.top*t)})}(function(){function e(t,i,a){if(i.width===0||i.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,a.width===0||a.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=a,this._context=t}return e.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},e.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(e.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),e})();/*!
 * @license
 * TradingView Lightweight Charts™ v4.1.0
 * Copyright (c) 2023 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Ce={color:"#2196f3"},ze={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Q,K;(function(e){e[e.Simple=0]="Simple",e[e.WithSteps=1]="WithSteps",e[e.Curved=2]="Curved"})(Q||(Q={})),function(e){e[e.Solid=0]="Solid",e[e.Dotted=1]="Dotted",e[e.Dashed=2]="Dashed",e[e.LargeDashed=3]="LargeDashed",e[e.SparseDotted=4]="SparseDotted"}(K||(K={}));function ue(e){return typeof e=="number"&&isFinite(e)}function de(e){return typeof e=="number"&&e%1==0}var X;(function(e){e[e.Normal=0]="Normal",e[e.Magnet=1]="Magnet",e[e.Hidden=2]="Hidden"})(X||(X={}));const q=".";function G(e,t){if(!ue(e))return"n/a";if(!de(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?e.toString():("0000000000000000"+e.toString()).slice(-t)}class he{constructor(t,i){if(i||(i=1),ue(t)&&de(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=i,this.hs()}format(t){const i=t<0?"−":"";return t=Math.abs(t),i+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){const i=this.Li/this.rs;let a=Math.floor(t),o="";const r=this.os!==void 0?this.os:NaN;if(i>1){let u=+(Math.round(t*i)-a*i).toFixed(this.os);u>=i&&(u-=i,a+=1),o=q+G(+u.toFixed(this.os)*this.rs,r)}else a=Math.round(a*i)/i,r>0&&(o=q+G(0,r));return a.toFixed(0)+o}}class Le extends he{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}function pe(e,t,i,a,o=0,r=t.length){let u=r-o;for(;0<u;){const l=u>>1,g=o+l;a(t[g],i)===e?(o=g+1,u-=l+1):u=l}return o}pe.bind(null,!0);pe.bind(null,!1);var J;(function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.None=0]="None",e[e.NearestRight=1]="NearestRight"})(J||(J={}));var Z;(function(e){e[e.Normal=0]="Normal",e[e.Logarithmic=1]="Logarithmic",e[e.Percentage=2]="Percentage",e[e.IndexedTo100=3]="IndexedTo100"})(Z||(Z={}));new Le;new he(100,1);var ee,te,ie,ne,se;(function(e){e[e.OnTouchEnd=0]="OnTouchEnd",e[e.OnNextTap=1]="OnNextTap"})(ee||(ee={}));(function(e){e[e.Disabled=0]="Disabled",e[e.Continuous=1]="Continuous",e[e.OnDataUpdate=2]="OnDataUpdate"})(te||(te={})),function(e){e[e.LastBar=0]="LastBar",e[e.LastVisible=1]="LastVisible"}(ie||(ie={})),function(e){e.Solid="solid",e.VerticalGradient="gradient"}(ne||(ne={})),function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.DayOfMonth=2]="DayOfMonth",e[e.Time=3]="Time",e[e.TimeWithSeconds=4]="TimeWithSeconds"}(se||(se={}));const oe=typeof window<"u";oe&&navigator.userAgentData&&navigator.userAgentData.brands.some(e=>e.brand.includes("Chromium"))&&oe&&(!((H=navigator==null?void 0:navigator.userAgentData)===null||H===void 0)&&H.platform?navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);var H;Object.assign(Object.assign({},ze),Ce);const ae=e=>e.split("-")[1];async function Fe(e,t,i,a){try{let o=null;if(a==="months"||a==="weeks"||a==="days")o=`https://api.upbit.com/v1/candles/${a}/?market=KRW-${ae(t)}&count=${i}`;else{const g=a.match(/([a-zA-Z]+)(\d+)/),O=g?g[1]:null,y=g?g[2]:null;o=`https://api.upbit.com/v1/candles/${O}/${y}?market=KRW-${ae(t)}&count=${i}`}const r=await fetch(o);if(!r.ok)throw new Error(`Request failed with status: ${r.status}`);const u=await r.json(),l=h(null);return l.value=u,l}catch(o){console.error(o)}}const Oe={__name:"StaticsModule_basic_Quant",props:{message:Object},setup(e){const t=e,i=h({types:t.message.types,ticker:t.message.ticker,candlecnt:t.message.candlecnt,timeInterval:t.message.timeInterval}),a=h([]),o=h([]),r=h([]),u=h([{name:"캔들 차트",type:"candlestick",data:[]},{name:"상승트렌드",type:"line",width:1,data:[]},{name:"하락트렌드",type:"line",width:1,data:[]}]),l=h({chart:{type:"candle",height:5250,width:11100},stroke:{curve:"smooth",width:[1,9,9],colors:["#00FF00","#9E0ADD","#FFB291"]},toolbar:{show:!1},title:{text:i.value.ticker+" "+i.value.timeInterval+" "+i.value.candlecnt+" "+i.value.types+" "},fill:{colors:["blue","Green"],fill:{type:"solid",opacity:.7}},xaxis:{type:"datetime",labels:{show:!0},axisBorder:{show:!1}},animations:{speed:500112},markers:{hover:{sizeOffset:5}},annotations:{yaxis:[{y:4e7,borderColor:"#00E396",label:{borderColor:"#00E396",style:{color:"#fff",background:"#00E396"},text:"Support"}},{y:2e7,y2:26e6,borderColor:"#000",fillColor:"#FEB019",opacity:.9,label:{borderColor:"#333",style:{fontSize:"10px",color:"#333",background:"#FEB019"},text:"Y-axis range"}}],xaxis:[{x:15198272e5,strokeDashArray:0,borderColor:"#FF0000",label:{borderColor:"#775DD0",style:{color:"#fff",background:"#775DD0"},text:"Anno Test11111111"}},{x:new Date("01 Dec 20").getTime(),x2:new Date("01 Feb 2023").getTime(),fillColor:"#0000FF",opacity:.3,label:{borderColor:"#B3F7CA",style:{fontSize:"12px",color:"#FFFFFF",background:"#FF0000"},offsetY:-10,text:"X-axis range"}},{x:new Date("01 Dec 20").getTime(),x2:new Date("01 Feb 2023").getTime(),fillColor:"#B3F7CA",opacity:.5,label:{borderColor:"#B3F7CA",style:{fontSize:"12px",color:"#FFFFFF",background:"#0000FF"},offsetY:-10,text:"X-axis range"}}],points:[{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:12,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:10,style:{color:"#fff",background:"#FF4560"},text:"Point Annotation"}},{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#FF4560"},text:"Point Annotation"}},{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#0000FF"},text:"Point Annotation"}},{x:new Date("01 Dec 2022").getTime(),y:26e6,marker:{size:5,fillColor:"#fff",strokeColor:"red",radius:2,cssClass:"apexcharts-custom-class"},label:{borderColor:"#FF4560",offsetY:0,style:{color:"#fff",background:"#0000FF"},text:"Point Annotation"}}]},plotOptions:{candlestick:{colors:{upward:"#DF7D46",downward:"#3C90EB"},wick:{useFillColor:!0}}},yaxis:{tooltip:{enabled:!1}}});function g(s){let n=s.value[0].low_price,c=s.value[0].low_price,m=new Date(s.value[0].candle_date_time_kst).getTime(),k=new Date(s.value[0].candle_date_time_kst).getTime(),b=s.value[0].high_price,p=s.value[0].high_price,T=new Date(s.value[0].candle_date_time_kst).getTime(),U=new Date(s.value[0].candle_date_time_kst).getTime();for(const S of s.value){const C=new Date(S.candle_date_time_kst).getTime(),z=S.low_price,x=S.high_price;z<n&&(n=z,m=C),z>c&&(c=z,k=C),x<b&&(b=x,T=C),x>p&&(p=x,U=C)}return{minLowPrice:n,maxLowPrice:c,minLowDate:m,maxLowDate:k,minHighPrice:b,maxHighPrice:p,minHighDate:T,maxHighDate:U}}function O(s){const{minLowPrice:n,maxLowPrice:c,minLowDate:m,maxLowDate:k,minHighPrice:b,maxHighPrice:p,minHighDate:T,maxHighDate:U}=g(s);r.value=[{x:m,y:n},{x:k,y:c}],o.value=[{x:T,y:b},{x:U,y:p}];const S=y(o.value[0],o.value[1]),C=f(o.value[0],o.value[1]),z=y(r.value[0],r.value[1]),x=f(r.value[0],r.value[1]);return l.value.annotations.xaxis[0].x=x.x,l.value.annotations.xaxis[0].label.text="L",l.value.annotations.yaxis[0].y=S.y,l.value.annotations.yaxis[0].label.text="H",l.value.annotations.xaxis[1].x=C.x,l.value.annotations.xaxis[1].x2=x.x,l.value.annotations.xaxis[1].label.text="저점구간",l.value.annotations.xaxis[2].x=S.x,l.value.annotations.xaxis[2].x2=z.x,l.value.annotations.xaxis[2].label.text="고점구간",l.value.annotations.points[0].x=C.x,l.value.annotations.points[0].y=C.y,l.value.annotations.points[0].label.text=C.y,l.value.annotations.points[1].x=S.x,l.value.annotations.points[1].y=S.y,l.value.annotations.points[1].label.text=S.y,l.value.annotations.points[2].x=x.x,l.value.annotations.points[2].y=x.y,l.value.annotations.points[2].label.text=x.y,l.value.annotations.points[3].x=z.x,l.value.annotations.points[3].y=z.y,l.value.annotations.points[3].label.text=z.y,s.value.map(B=>({x:new Date(B.candle_date_time_kst).getTime(),y:[B.opening_price,B.high_price,B.low_price,B.trade_price]}))}function y(s,n){return s.y>n.y?s:s.y<n.y?n:s}function f(s,n){return s.y<n.y?s:s.y>n.y?n:s}const E=async()=>{try{const s=await Fe(i.value.types,i.value.ticker,i.value.candlecnt,i.value.timeInterval);a.value=s,console.log("fetchDataAndRefreshChart",a),u.value[0].data=O(a.value),u.value[1].data=o.value,u.value[2].data=r.value}catch(s){console.error(s)}},R=h([{time:0,open:0,high:0,low:0,close:0,_internal_originalTime:0}]),_=async s=>{const n=await new Response(s.data).json();n.timestamp,n.code==i.value.ticker&&(R.value={candle_date_time_kst:Math.floor(n.timestamp/24/60/60/1e3)*24*60*60,opening_price:n.trade_price,high_price:n.trade_price,low_price:n.trade_price,trade_price:n.trade_price,turnover:(n.opening_price+n.low_price+n.high_price+n.trade_price)/4*n.trade_volume},L(R))},L=async s=>{console.log("candleData",s)};return re(()=>{E();try{const s=new WebSocket("wss://api.upbit.com/websocket/v1");s.onopen=n=>{s.send(JSON.stringify([{ticket:"test"},{type:"ticker",codes:[i.value.ticker]}]))},s.onclose=n=>{console.error("WebSocket closed:",n)},s.onmessage=_}catch(s){console.error("Error fetching candle data:",s)}}),(s,n)=>{const c=le("apexchart");return v(),w("div",null,[ce(c,{type:"candlestick",options:l.value,series:u.value},null,8,["options","series"])])}}},Re=j(Oe,[["__scopeId","data-v-8d5b511c"]]);const De={class:"row"},Ee={class:"col-md-6"},Be={class:"chart-container"},Pe={class:"col-md-6"},Te={class:"chart-container"},Ue={class:"coin-card-container-wrapper div-block-space-style"},Me={class:"coin-card-container"},We=["onClick"],Ae={class:"coin-card-container-wrapper div-block-space-style"},Ne={class:"coin-card-container"},He=["onClick"],Ie={class:"coin-card-container-wrapper div-block-space-style"},je={class:"coin-card-container"},$e=["onClick"],Ve={class:"coin-card-container-wrapper div-block-space-style"},Ye={class:"coin-card-container"},Qe=["onClick"],Ke={class:"container-xxl m-1 text-center"},Xe={class:"col-md-12"},qe={class:"chart-container"},Ge={class:""},Je={__name:"StaticsChart",setup(e){const t=A.getWatchesTickerUDF(),i=A.getBalancesTickersUDF(),a=A.getRankTickersUDF(),o=h("weeks"),r=h(20),u=h("KRW-ETH"),l=h({types:"candle",ticker:u,candlecnt:r,timeInterval:o}),g=h({minutes1:{Open:null,High:null,Low:null,Close:null},minutes3:{Open:null,High:null,Low:null,Close:null},minutes5:{Open:null,High:null,Low:null,Close:null},minutes10:{Open:null,High:null,Low:null,Close:null},minutes15:{Open:null,High:null,Low:null,Close:null},minutes30:{Open:null,High:null,Low:null,Close:null},minutes60:{Open:null,High:null,Low:null,Close:null},minutes240:{Open:null,High:null,Low:null,Close:null},days:{Open:null,High:null,Low:null,Close:null},weeks:{Open:null,High:null,Low:null,Close:null},months:{Open:null,High:null,Low:null,Close:null}}),O=_=>{o.value=_,f()},y=_=>{u.value=_,f()},f=()=>{l.value={types:"candle",ticker:u.value,candlecnt:r.value,timeInterval:o.value}};function E(_){return _.replace("minutes","")}function R(_){return _.replace("KRW-","")}return(_,L)=>(v(),w(P,null,[d("div",De,[d("div",Ee,[d("div",Be,[(v(),I(Re,{message:l.value,key:l.value},null,8,["message"]))])]),d("div",Pe,[d("div",Te,[d("div",Ue,[d("div",Me,[(v(!0),w(P,null,M(Object.keys(g.value),(s,n)=>(v(),w("div",{key:n},[d("button",{onClick:c=>O(s),class:"btn-sm rounded-button btn-outline-primary"},F(E(s)),9,We)]))),128))])]),d("div",Ae,[d("div",Ne,[(v(!0),w(P,null,M(Object.values(W(t)),(s,n)=>(v(),w("div",{key:n},[d("button",{onClick:c=>y(s),class:"col-md-11 btn-sm rounded-button btn-outline-primary:active"},F(R(s)),9,He)]))),128))])]),d("div",Ie,[d("div",je,[(v(!0),w(P,null,M(Object.values(W(a)),(s,n)=>(v(),w("div",{key:n},[d("button",{onClick:c=>y(s),class:"col-md-11 btn-sm rounded-button btn-outline-primary:active"},F(R(s)),9,$e)]))),128))])]),d("div",Ve,[d("div",Ye,[(v(!0),w(P,null,M(Object.values(W(i)),(s,n)=>(v(),w("div",{key:n},[d("button",{onClick:c=>y(s),class:"col-md-11 btn-sm rounded-button btn-outline-primary:active"},F(R(s)),9,Qe)]))),128))])]),d("button",{onClick:f,class:"btn-sm rounded-button btn-outline-primary:active"},"Update Coin Ticker"),d("div",Ke,[_e(d("input",{type:"range","onUpdate:modelValue":L[0]||(L[0]=s=>r.value=s),min:"0",max:"5000",onInput:L[1]||(L[1]=(...s)=>_.updateCnt&&_.updateCnt(...s)),class:"w-100"},null,544),[[ve,r.value]]),d("p",null," [캔들갯수 "+F(r.value)+"] 상단차트는 설정값 차트, 하단은 7일기준 몫+나머지",1)])])]),d("div",Xe,[d("div",qe,[(v(),I(we,{message:l.value,key:l.value},null,8,["message"]))])])]),d("div",Ge,F(u.value)+"-"+F(r.value)+"-"+F(o.value),1)],64))}},Ze=j(Je,[["__scopeId","data-v-87402e41"]]),it={__name:"MainView",setup(e){return(t,i)=>(v(),I(Ze))}};export{it as default};
