import{g as Xe,f as I,i as q,k as ge,c as h,o as u,b as e,j as X,u as U,v as n,d as M,e as oe,t as S,x as xe,y as Ae,F as re,z as ae,A as Fe,l as fe,B as _e,C as Me,m as Te,D as Be,w as Le,T as Re,E as He,G as Ze,H as ze}from"./vendor-Cysc0BVr.js";import{S as Ke,g as Je,_ as je}from"./index-DZsSoXU1.js";import{c as ue,S as Qe,E as De,a as et}from"./index-C_7SqWYL.js";import{X as Se,R as Ve,T as Ne,P as tt,C as we,a as Pe,D as Ie,b as st,I as ot}from"./x-DqCIsxK9.js";/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=ue("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ue("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=ue("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=ue("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ue("Columns2Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=ue("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=ue("Grid3x3Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=ue("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ue("TargetIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),be=Xe("stockChart",()=>{const V=I(null),o=I(!1),j=I(null),p=I(16),c=I(10),_=I([]),W=I({theme:"dark",showVolume:!0,showMA:!0,maTypes:[5,10,20,60],indicators:["RSI","MACD"],timeRange:"1Y"}),T=I(1),E=I(null),b=async(r=null,l=null)=>{try{o.value=!0,j.value=null;const i=await fetch(Ke.ALL_STOCKS);if(!i.ok)throw new Error("주식 데이터를 불러올 수 없습니다");const $=(await i.text()).replace(/: ?NaN/g,": null"),x=JSON.parse($);if(r&&l){const L=new Date(r),R=new Date(l);Object.keys(x).forEach(k=>{Object.keys(x[k]).forEach(D=>{const z=x[k][D];Array.isArray(z)&&(x[k][D]=z.filter(J=>{const Z=new Date(J.Date);return Z>=L&&Z<=R}))})})}V.value=x}catch(i){j.value=i.message,console.error("주식 데이터 로딩 실패:",i)}finally{o.value=!1}},C=(r,l)=>{const i=_.value.find(R=>R.sector===r&&R.company===l);if(i)return i.isActive=!0,i.id;_.value.length>=p.value&&_.value.shift();const g=`chart_${Je()}`,$={id:g,sector:r,company:l,isActive:!0,createdAt:new Date,settings:{showVolume:!0,showMA:!0,maTypes:[5,10,20,60],indicators:["RSI"],zoomLevel:1,panPosition:{x:0,y:0},crosshairData:null,dateRange:null}};_.value.push($);const x=_.value.filter(R=>R.isActive),L=x.length;if(L>=1){if(A.value||(A.value=!0),!w.value||L===1){const R=x.sort((k,D)=>new Date(k.createdAt)-new Date(D.createdAt))[0];R&&(w.value=R.id)}d.value=[],x.forEach(R=>{R.id!==w.value&&d.value.length<c.value&&d.value.push(R.id)})}return g},v=r=>{const l=_.value.findIndex(i=>i.id===r);l!==-1&&(_.value.splice(l,1),B())},F=r=>{const l=_.value.find(i=>i.id===r);l&&(l.isActive=!l.isActive,B())},B=()=>{const r=_.value.filter(i=>i.isActive),l=r.length;if(l===0)A.value=!1,d.value=[],w.value=null;else if(l>=1){if(A.value||(A.value=!0),!r.find(g=>g.id===w.value)){const g=r.sort(($,x)=>new Date($.createdAt)-new Date(x.createdAt))[0];g&&(w.value=g.id)}d.value=[],r.forEach(g=>{g.id!==w.value&&d.value.length<c.value&&d.value.push(g.id)})}},P=(r,l)=>{const i=_.value.find(g=>g.id===r);i&&(i.settings={...i.settings,...l})},H=()=>{_.value=[]},ee=r=>{W.value={...W.value,...r}},te=r=>{T.value=Math.max(.1,Math.min(10,r)),_.value.forEach(l=>{l.isActive&&(l.settings.zoomLevel=r)})},ie=(r,l)=>{E.value={start:r,end:l},_.value.forEach(i=>{i.isActive&&(i.settings.dateRange={start:r,end:l})})},se=(r,l)=>{const i=_.value.find(g=>g.id===r);i&&(i.settings.crosshairData=l)},A=I(!1),d=I([]),w=I(null),ne=()=>{A.value=!A.value,A.value||(d.value=[])},f=r=>{const l=d.value.indexOf(r);l===-1?d.value.length<c.value&&d.value.push(r):d.value.splice(l,1)},y=()=>{d.value=[],w.value=null},O=r=>{w.value&&!d.value.includes(w.value)&&d.value.length<c.value&&d.value.push(w.value),w.value=r;const l=d.value.indexOf(r);l!==-1&&d.value.splice(l,1)},Y=r=>w.value===r,N=async(r,l)=>{await b(r,l)},K=(r,l)=>{if(console.log("convertCandleTimeframe 호출:",{timeframe:l,일봉개수:r==null?void 0:r.length}),!r||r.length===0)return[];if(l==="1D")return console.log("일봉 반환:",r.length,"개"),r;const i={};r.forEach($=>{const x=new Date($.Date);let L;switch(l){case"1W":{const R=x.getFullYear(),k=me(x);L=`${R}-W${k.toString().padStart(2,"0")}`;break}case"1M":{L=`${x.getFullYear()}-${(x.getMonth()+1).toString().padStart(2,"0")}`;break}case"3M":{const R=x.getFullYear(),k=Math.floor(x.getMonth()/3)+1;L=`${R}-Q${k}`;break}default:L=$.Date}i[L]||(i[L]=[]),i[L].push($)});const g=[];return Object.keys(i).sort().forEach($=>{const x=i[$].sort((D,z)=>new Date(D.Date)-new Date(z.Date));if(x.length===0)return;const L=x[0],R=x[x.length-1],k={Date:R.Date,Open:L.Open,Close:R.Close,High:Math.max(...x.map(D=>D.High)),Low:Math.min(...x.map(D=>D.Low)),Volume:x.reduce((D,z)=>D+z.Volume,0),Change:(R.Close-L.Open)/L.Open,UpDown:R.Close>=L.Open?1:-1};g.push(k)}),console.log(`${l} 변환 완료:`,g.length,"개 캔들"),g},me=r=>{const l=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),i=l.getUTCDay()||7;l.setUTCDate(l.getUTCDate()+4-i);const g=new Date(Date.UTC(l.getUTCFullYear(),0,1));return Math.ceil(((l-g)/864e5+1)/7)},ve=q(()=>V.value?Object.keys(V.value):[]),ye=q(()=>{if(!V.value)return{};const r={};return Object.keys(V.value).forEach(l=>{r[l]=Object.keys(V.value[l]||{})}),r}),Q=q(()=>_.value.filter(r=>r.isActive)),s=r=>{var g;const l=_.value.find($=>$.id===r);if(!l||!V.value)return null;const i=((g=V.value[l.sector])==null?void 0:g[l.company])||[];return i.length===0?null:t(i,l.settings)},t=(r,l={})=>{if(!r||r.length===0)return{candlestickData:[],volumeData:[],dates:[],closes:[],ma5:[],ma10:[],ma20:[],ma60:[],rsi:[],macd:{macd:[],signal:[],histogram:[]}};const i=[],g=[],$=[],x=[];r.forEach(k=>{$.push(k.Date),i.push([k.Open,k.Close,k.Low,k.High]),g.push(k.Volume),x.push(k.Close)});const L=k=>{const D=[];for(let z=0;z<x.length;z++)if(z<k-1)D.push(null);else{const J=x.slice(z-k+1,z+1).reduce((Z,de)=>Z+de,0);D.push(J/k)}return D},R=(k=14)=>{const D=[];let z=0,J=0;for(let Z=0;Z<x.length;Z++){if(Z===0){D.push(null);continue}const de=x[Z]-x[Z-1],$e=de>0?de:0,pe=de<0?-de:0;if(Z<k)if(z+=$e,J+=pe,Z===k-1){const le=z/k,he=J/k,ke=le/he;D.push(100-100/(1+ke))}else D.push(null);else{const le=(z*(k-1)+$e)/k,he=(J*(k-1)+pe)/k,ke=le/he;D.push(100-100/(1+ke)),z=le*k,J=he*k}}return D};return{candlestickData:i,volumeData:g,dates:$,closes:x,ma5:L(5),ma10:L(10),ma20:L(20),ma60:L(60),rsi:R(14)}},m=q(()=>{if(!A.value||d.value.length===0&&!w.value)return null;const r={charts:[],commonDates:[],benchmarkData:null},l=[...d.value];w.value&&!l.includes(w.value)&&l.unshift(w.value);let i=null,g=null;if(l.forEach(($,x)=>{var R;const L=_.value.find(k=>k.id===$);if(L&&V.value){const k=((R=V.value[L.sector])==null?void 0:R[L.company])||[],D=t(k,L.settings);if(D.dates.length>0){const z=$===w.value;let J,Z;if(z){const pe=D.closes[0];J=D.closes.map(le=>le/pe*100),Z=J.map(()=>100),i=D.closes,g=D.dates,r.benchmarkData={id:$,sector:L.sector,company:L.company,dates:D.dates,closes:D.closes}}else{const pe=D.closes[0];J=D.closes.map(le=>le/pe*100),i&&g?Z=D.closes.map((le,he)=>{const ke=D.dates[he],Ee=g.indexOf(ke);if(Ee!==-1){const Ye=i[Ee],We=i[0],Ge=D.closes[0],qe=(Ye/We-1)*100;return(le/Ge-1)*100-qe+100}return 100}):Z=J}const de=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899"],$e={id:$,sector:L.sector,company:L.company,dates:D.dates,closes:D.closes,normalizedPrices:J,relativePrices:Z,isBenchmark:z,color:z?"#dc2626":de[(x-1)%de.length],lineWidth:z?4:2};r.charts.push($e)}}}),r.charts.length>1){const $=r.charts.map(x=>x.dates);r.commonDates=$.reduce((x,L)=>x.filter(R=>L.includes(R)))}else r.charts.length===1&&(r.commonDates=r.charts[0].dates);return r}),a=r=>{var D;const l=_.value.find(z=>z.id===r);if(!l||!V.value)return null;const i=((D=V.value[l.sector])==null?void 0:D[l.company])||[];if(i.length===0)return null;const g=i[i.length-1],$=i[i.length-2],x=i.map(z=>z.Close),L=Math.max(...x),R=Math.min(...x),k=i.reduce((z,J)=>z+J.Volume,0)/i.length;return{chartId:r,sector:l.sector,company:l.company,currentPrice:g.Close,change:g.Change,changePercent:$?((g.Close-$.Close)/$.Close*100).toFixed(2):0,high52Week:L,low52Week:R,avgVolume:Math.round(k),marketCap:g.Close*g.Volume,dataPoints:i.length}},G=q(()=>_.value.filter(r=>r.isActive).map(r=>a(r.id)).filter(r=>r!==null));return{stockData:V,isLoading:o,error:j,maxCharts:p,activeCharts:_,chartSettings:W,globalZoomLevel:T,globalDateRange:E,comparisonMode:A,comparisonCharts:d,benchmarkChart:w,loadStockData:b,addChart:C,removeChart:v,toggleChart:F,updateChartSettings:P,clearAllCharts:H,updateGlobalChartSettings:ee,setGlobalZoomLevel:te,setGlobalDateRange:ie,setCrosshairData:se,toggleComparisonMode:ne,toggleComparisonChart:f,clearComparison:y,setBenchmarkChart:O,isBenchmarkChart:Y,filterDataByDateRange:N,convertCandleTimeframe:K,exportChartData:(r,l="csv")=>{var D;const i=_.value.find(z=>z.id===r);if(!i||!V.value)return;const g=((D=V.value[i.sector])==null?void 0:D[i.company])||[];if(g.length===0)return;let $="";const x=`${i.company}_${i.sector}_stock_data`;l==="csv"?($=`Date,Open,High,Low,Close,Volume,Change
`,$+=g.map(z=>`${z.Date},${z.Open},${z.High},${z.Low},${z.Close},${z.Volume},${z.Change}`).join(`
`)):l==="json"&&($=JSON.stringify({company:i.company,sector:i.sector,data:g},null,2));const L=new Blob([$],{type:l==="csv"?"text/csv":"application/json"}),R=URL.createObjectURL(L),k=document.createElement("a");k.href=R,k.download=`${x}.${l}`,k.click(),URL.revokeObjectURL(R)},exportComparisonData:(r="csv")=>{if(!m.value||d.value.length===0)return;let l="";const i="stock_comparison_data";if(r==="csv"){const L=m.value.charts;l="Date,"+L.map(R=>`${R.company}_Price,${R.company}_Normalized`).join(",")+`
`,m.value.commonDates.forEach(R=>{const k=[R];L.forEach(D=>{const z=D.dates.indexOf(R);z!==-1?k.push(D.closes[z],D.normalizedPrices[z].toFixed(2)):k.push("","")}),l+=k.join(",")+`
`})}else r==="json"&&(l=JSON.stringify(m.value,null,2));const g=new Blob([l],{type:r==="csv"?"text/csv":"application/json"}),$=URL.createObjectURL(g),x=document.createElement("a");x.href=$,x.download=`${i}.${r}`,x.click(),URL.revokeObjectURL($)},availableSectors:ve,availableCompanies:ye,activeChartsData:Q,comparisonData:m,allChartsStats:G,getChartData:s,getChartStats:a,processStockData:t,updateComparisonAfterToggle:B}}),mt={class:"flex h-full flex-col overflow-y-auto rounded-l-2xl border border-border bg-card p-2"},vt={class:"mb-4 flex flex-wrap items-center justify-between gap-4"},ft={class:"flex flex-wrap gap-2"},gt={class:"mb-6"},pt={class:"space-y-3"},ht={class:"relative"},xt={class:"flex flex-wrap gap-2"},bt=["onClick"],yt={key:0,class:"mb-6"},kt={class:"mb-4 flex items-center justify-between"},_t={class:"flex items-center gap-2 rounded-full bg-primary/10 px-3 py-1 text-sm font-medium text-primary"},Ct={class:"space-y-2"},$t=["onClick"],Dt={class:"flex cursor-pointer items-center justify-between p-4 pl-5"},wt={class:"min-w-0 flex-1"},St={class:"mb-1 flex items-center gap-2"},zt={class:"truncate text-sm font-semibold text-foreground"},At={key:0,class:"shrink-0 rounded-full border border-red-200 bg-red-100 px-2 py-0.5 text-xs font-bold text-red-700"},Mt={key:1,class:"shrink-0 rounded-full border border-blue-200 bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700"},Lt={key:2,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-500"},Rt={class:"flex items-center gap-3 text-xs"},Pt={class:"text-muted-foreground"},jt={class:"flex items-center gap-1"},It={class:"flex items-center gap-1 opacity-0 transition-opacity duration-200 group-hover:opacity-100"},Et=["onClick","title"],Ft=["onClick"],Ot={class:"flex-1"},Tt={key:0,class:"rounded-lg bg-card"},Bt={key:1,class:"space-y-6"},Vt={class:"flex items-center gap-2 border-b border-border pb-2"},Nt={class:"font-medium text-foreground"},Ut={class:"text-sm text-muted-foreground"},Yt={class:"flex flex-wrap gap-2"},Wt=["onClick"],Gt={class:"shrink-0"},qt={class:"min-w-0 flex-1"},Xt={class:"truncate text-sm font-medium"},Ht={key:1,class:"mt-4"},Zt={class:"rounded-md border border-destructive bg-destructive/10 p-3"},Kt={class:"flex items-center"},Jt={class:"text-sm text-destructive"},Oe={__name:"CompanySelector",setup(V){const o=be(),j=I(""),p=I(null),c=q(()=>{const b=o.availableCompanies,C={};return Object.keys(b).forEach(v=>{if(p.value&&v!==p.value)return;let F=b[v];if(j.value){const B=j.value.toLowerCase();F=b[v].filter(P=>P.toLowerCase().includes(B)||v.toLowerCase().includes(B))}F.length>0&&(C[v]=F)}),C}),_=(b,C)=>o.activeCharts.some(v=>v.sector===b&&v.company===C&&v.isActive),W=(b,C)=>{if(_(b,C)){const v=o.activeCharts.find(F=>F.sector===b&&F.company===C);v&&o.removeChart(v.id);return}if(o.activeCharts.length>=o.maxCharts){alert(`최대 ${o.maxCharts}개의 차트만 활성화할 수 있습니다.`);return}o.addChart(b,C)},T=b=>{o.comparisonMode?o.toggleComparisonChart(b.id):o.toggleChart(b.id)},E=()=>{o.clearAllCharts(),o.loadStockData()};return ge(()=>{o.stockData||o.loadStockData()}),(b,C)=>(u(),h("div",mt,[e("div",vt,[e("div",ft,[e("button",{onClick:C[0]||(C[0]=v=>n(o).toggleComparisonMode()),class:U(["flex items-center gap-1.5 rounded-md px-3 py-1.5 text-sm font-medium transition-all duration-200",n(o).comparisonMode?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"])},[M(n(nt),{class:"size-3.5"}),oe(" 비교 "+S(n(o).comparisonMode?"ON":"OFF"),1)],2),e("button",{onClick:C[1]||(C[1]=v=>n(o).clearAllCharts()),class:"flex items-center gap-1.5 rounded-md bg-destructive px-3 py-1.5 text-sm font-medium text-destructive-foreground transition-all duration-200 hover:bg-destructive/90"},[M(n(Se),{class:"size-3.5"}),C[3]||(C[3]=oe(" 전체 지우기 ",-1))]),e("button",{onClick:E,class:"flex items-center gap-1.5 rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white transition-all duration-200 hover:bg-blue-700",title:"데이터 다시 로드"},[M(n(Ve),{class:"size-3.5"}),C[4]||(C[4]=oe(" 데이터 리로드 ",-1))])])]),e("div",gt,[e("div",pt,[e("div",ht,[xe(e("input",{"onUpdate:modelValue":C[2]||(C[2]=v=>j.value=v),type:"text",placeholder:"회사명 또는 섹터 검색...",class:"w-full rounded-md border border-border bg-input px-3 py-2 pr-9 text-sm text-foreground focus:border-ring focus:outline-none"},null,512),[[Ae,j.value]]),M(n(Qe),{class:"absolute right-2.5 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"})]),e("div",xt,[(u(!0),h(re,null,ae(n(o).availableSectors,v=>(u(),h("button",{key:v,onClick:F=>p.value=p.value===v?null:v,class:U(["rounded-full px-3 py-1 text-xs font-medium transition-all duration-200",p.value===v?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"])},S(v),11,bt))),128))])])]),n(o).activeCharts.length>0?(u(),h("div",yt,[e("div",kt,[C[6]||(C[6]=e("h3",{class:"text-lg font-semibold text-foreground"},"활성 차트",-1)),e("div",_t,[C[5]||(C[5]=e("div",{class:"size-2 rounded-full bg-primary"},null,-1)),oe(" "+S(n(o).activeCharts.length)+"/"+S(n(o).maxCharts),1)])]),e("div",Ct,[(u(!0),h(re,null,ae(n(o).activeCharts,v=>(u(),h("div",{key:v.id,class:U(["group relative overflow-hidden rounded-lg border transition-all duration-200 hover:shadow-md",v.isActive?"border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10":"border-border bg-card hover:border-border/60",n(o).comparisonMode&&n(o).isBenchmarkChart(v.id)?"border-red-300 bg-gradient-to-r from-red-50 to-red-100 ring-2 ring-red-300":"",n(o).comparisonMode&&n(o).comparisonCharts.includes(v.id)?"border-blue-300 bg-gradient-to-r from-blue-50 to-blue-100 ring-2 ring-blue-300":""]),onClick:F=>T(v)},[e("div",{class:U(["absolute left-0 top-0 h-full w-1 transition-all duration-200",n(o).comparisonMode&&n(o).isBenchmarkChart(v.id)?"w-2 bg-red-600":n(o).comparisonMode&&n(o).comparisonCharts.includes(v.id)?"bg-blue-600":v.isActive?"bg-primary":"bg-muted-foreground/30"])},null,2),e("div",Dt,[e("div",wt,[e("div",St,[e("h4",zt,S(v.company),1),n(o).comparisonMode&&n(o).isBenchmarkChart(v.id)?(u(),h("div",At," 기준점 ")):n(o).comparisonMode&&n(o).comparisonCharts.includes(v.id)?(u(),h("div",Mt," 비교중 ")):n(o).comparisonMode?(u(),h("div",Lt," 대기중 ")):X("",!0)]),e("div",Rt,[e("span",Pt,S(v.sector),1),e("div",jt,[e("div",{class:U(["size-1.5 rounded-full",v.isActive?"bg-primary":"bg-muted-foreground/50"])},null,2),e("span",{class:U(v.isActive?"text-primary":"text-muted-foreground")},S(v.isActive?"활성":"비활성"),3)])])]),e("div",It,[e("button",{onClick:Fe(F=>n(o).toggleChart(v.id),["stop"]),class:U(["rounded-md p-2 transition-all duration-200",v.isActive?"text-primary hover:bg-primary/20":"text-muted-foreground hover:bg-muted"]),title:v.isActive?"차트 비활성화":"차트 활성화"},[M(n(it),{class:"size-4"})],10,Et),e("button",{onClick:Fe(F=>n(o).removeChart(v.id),["stop"]),class:"rounded-md p-2 text-destructive transition-all duration-200 hover:bg-destructive/20",title:"차트 제거"},[M(n(Ne),{class:"size-4"})],8,Ft)])])],10,$t))),128))])])):X("",!0),e("div",Ot,[C[8]||(C[8]=e("h3",{class:"mb-4 text-lg font-semibold text-foreground"},"회사 선택",-1)),n(o).isLoading?(u(),h("div",Tt,[...C[7]||(C[7]=[e("div",{class:"flex items-center justify-center py-12"},[e("div",{class:"size-8 animate-spin rounded-full border-b-2 border-primary"}),e("span",{class:"ml-3 text-muted-foreground"},"데이터 로딩 중...")],-1)])])):(u(),h("div",Bt,[(u(!0),h(re,null,ae(c.value,(v,F)=>(u(),h("div",{key:F,class:"space-y-3"},[e("div",Vt,[e("h4",Nt,S(F),1),e("span",Ut,"("+S(v.length)+"개)",1)]),e("div",Yt,[(u(!0),h(re,null,ae(v,B=>(u(),h("div",{key:`${F}-${B}`,onClick:P=>W(F,B),class:U(["flex min-h-[32px] basis-[calc(50%-0.5rem)] cursor-pointer items-center gap-2 rounded-md px-2 py-1.5 transition-all duration-200",_(F,B)?"bg-primary text-primary-foreground":"border border-border bg-card text-foreground hover:bg-muted"])},[e("div",Gt,[_(F,B)?(u(),fe(n(Ue),{key:1,class:"size-3.5 text-primary-foreground"})):(u(),fe(n(tt),{key:0,class:"size-3.5 text-muted-foreground"}))]),e("div",qt,[e("div",Xt,S(B),1)])],10,Wt))),128))])]))),128))]))]),n(o).error?(u(),h("div",Ht,[e("div",Zt,[e("div",Kt,[M(n(at),{class:"mr-2 size-4 text-destructive"}),e("span",Jt,S(n(o).error),1)])])])):X("",!0)]))}},Qt={class:"overflow-hidden rounded-xl border border-border bg-card"},es={class:"border-b border-border bg-muted/50 p-1"},ts={class:"flex flex-wrap items-center justify-between gap-4"},ss={class:"flex items-center gap-2"},os={class:"flex gap-1"},rs=["onClick"],as={class:"flex gap-1"},ns={class:"border-t border-border bg-muted/30 p-4"},ls={key:0,class:"mt-3 flex flex-wrap gap-2 text-sm"},is={class:"flex items-center gap-3"},cs={class:"flex items-center gap-2"},ds={class:"text-lg font-semibold text-foreground"},us={class:"rounded-full bg-primary/10 px-2 py-1 text-xs text-primary"},ms={class:"flex items-center gap-2"},vs={class:"font-semibold text-foreground"},fs={class:"flex items-center gap-2"},gs={class:"flex items-center gap-2"},ps={class:"text-foreground"},hs={class:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4"},xs={class:"font-semibold text-foreground"},bs={class:"font-semibold text-foreground"},ys={class:"font-semibold text-foreground"},ks={class:"font-semibold text-foreground"},_s={class:"relative"},Cs={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-background/80"},$s={class:"h-[50dvh]"},Ds={key:1,class:"h-24 border-t border-border"},ws={__name:"CandlestickChart",props:{chartId:{type:String,required:!0}},emits:["remove-chart"],setup(V,{emit:o}){const j=V,p=be(),c=I(),_=I(),W=I("1D"),T=I(!0),E=I(!0),b=I(!1),C=I(!1),v=[{label:"일봉",value:"1D"},{label:"주봉",value:"1W"},{label:"월봉",value:"1M"},{label:"3개월봉",value:"3M"}],F=q(()=>{var O;const f=p.activeCharts.find(Y=>Y.id===j.chartId);if(!f||!p.stockData)return null;const y=((O=p.stockData[f.sector])==null?void 0:O[f.company])||[];return y.length===0?null:p.processStockData(y,f.settings)}),B=q(()=>{var N;if(!F.value)return null;const f=p.activeCharts.find(K=>K.id===j.chartId);if(!f)return null;const y=((N=p.stockData[f.sector])==null?void 0:N[f.company])||[],O=p.convertCandleTimeframe(y,W.value),Y=p.processStockData(O,f.settings);return console.log("시간범위:",W.value,"원본:",y.length,"변환됨:",O.length),{chart:f,processedData:Y}}),P=q(()=>{var f;return(f=B.value)!=null&&f.processedData?B.value.processedData:{dates:[],candlestickData:[],volumeData:[],closes:[],ma5:[],ma10:[],ma20:[],ma60:[],rsi:[]}}),H=q(()=>{if(!P.value.closes||!P.value.closes.length)return null;const f=P.value.closes,y=f[f.length-1],O=f[f.length-2];if(!O)return null;const Y=y-O,N=Y/O*100;return{close:y,change:Y,changePercent:N,volume:P.value.volumeData[P.value.volumeData.length-1]}}),ee=q(()=>{if(!P.value.candlestickData||!P.value.candlestickData.length)return{high:0,low:0,avgVolume:0,volatility:0};const f=P.value.closes,y=P.value.volumeData,O=P.value.candlestickData,Y=Math.max(...O.map(Q=>Q[3])),N=Math.min(...O.map(Q=>Q[2])),K=y.reduce((Q,s)=>Q+s,0)/y.length,me=f.reduce((Q,s)=>Q+s,0)/f.length,ve=f.reduce((Q,s)=>Q+Math.pow(s-me,2),0)/f.length,ye=Math.sqrt(ve)/me*100;return{high:Y,low:N,avgVolume:K,volatility:ye}}),te=q(()=>{if(!P.value.candlestickData||!P.value.candlestickData.length)return{};const f=P.value.candlestickData,y=P.value.volumeData,O=P.value.dates,Y=[{name:"캔들스틱",type:"candlestick",data:f,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:"#ef4444",color0:"#22c55e",borderColor:"#ef4444",borderColor0:"#22c55e"}}];if(E.value&&P.value.candlestickData.length>5){const N=P.value.ma5,K=P.value.ma20;Y.push({name:"MA5",type:"line",data:N,xAxisIndex:0,yAxisIndex:0,smooth:!0,lineStyle:{width:1,color:"#fbbf24"}}),Y.push({name:"MA20",type:"line",data:K,xAxisIndex:0,yAxisIndex:0,smooth:!0,lineStyle:{width:1,color:"#8b5cf6"}})}return T.value&&Y.push({name:"거래량",type:"bar",xAxisIndex:1,yAxisIndex:1,data:y,itemStyle:{color:function(N){const K=N.dataIndex;if(K===0)return"#6b7280";const me=P.value.closes[K],ve=P.value.closes[K-1];return me>=ve?"#22c55e":"#ef4444"}}}),{backgroundColor:"transparent",animation:!0,tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#374151",textStyle:{color:"#f9fafb"}},legend:{data:["캔들스틱",...E.value&&P.value.candlestickData.length>5?["MA5","MA20"]:[],...T.value?["거래량"]:[]],textStyle:{color:"#000000"}},grid:[{left:"10%",right:"4%",height:T.value?"55%":"75%"},...T.value?[{left:"3%",right:"4%",top:"75%",height:"25%"}]:[]],xAxis:[{type:"category",gridIndex:0,data:O,axisLine:{lineStyle:{color:"#374151"}},axisLabel:{color:"#000000"}},...T.value?[{type:"category",gridIndex:1,data:O,axisLabel:{show:!1}}]:[]],yAxis:[{gridIndex:0,scale:!0,axisLine:{lineStyle:{color:"#374151"}},axisLabel:{color:"#000000"},splitLine:{lineStyle:{color:"#374151"}}},...T.value?[{scale:!0,gridIndex:1,axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}}]:[]],dataZoom:[{type:"inside",xAxisIndex:T.value?[0,1]:[0],start:0,end:100}],series:Y}}),ie=q(()=>{if(!P.value.closes||!P.value.closes.length||!b.value)return{};const f=P.value.rsi,y=P.value.dates;return{backgroundColor:"transparent",grid:{left:"3%",right:"4%",top:"10%",bottom:"10%"},xAxis:{type:"category",data:y,axisLabel:{show:!1}},yAxis:{type:"value",min:0,max:100,axisLabel:{color:"#000000",fontSize:10},splitLine:{lineStyle:{color:"#374151"}}},series:[{name:"RSI",type:"line",data:f,lineStyle:{color:"#06b6d4",width:2},areaStyle:{color:"rgba(6, 182, 212, 0.1)"}}],markLine:{data:[{yAxis:70,lineStyle:{color:"#ef4444",type:"dashed"}},{yAxis:30,lineStyle:{color:"#22c55e",type:"dashed"}}]}}}),se=f=>f?Number(f).toLocaleString():"0",A=f=>f>=1e6?(f/1e6).toFixed(1)+"M":f>=1e3?(f/1e3).toFixed(1)+"K":f.toString(),d=f=>f>0?"text-red-500":f<0?"text-blue-500":"text-muted-foreground",w=f=>{f.componentType==="series"&&console.log("Chart clicked:",f)},ne=()=>{var f;if(c.value){const y=c.value.getDataURL({type:"png",backgroundColor:"#ffffff"}),O=document.createElement("a");O.download=`${((f=B.value.chart)==null?void 0:f.company)||"chart"}_차트.png`,O.href=y,O.click()}};return _e(W,async()=>{C.value=!0,await Me(),setTimeout(()=>{C.value=!1,c.value&&c.value.resize(),_.value&&_.value.resize()},100)}),ge(async()=>{await Me(),setTimeout(()=>{c.value&&c.value.resize(),_.value&&_.value.resize()},100)}),(f,y)=>{var O,Y;return u(),h("div",Qt,[e("div",es,[e("div",ts,[e("div",ss,[e("div",os,[(u(),h(re,null,ae(v,N=>e("button",{key:N.value,onClick:K=>W.value=N.value,class:U(["h-8 rounded-md px-2.5 text-xs font-medium transition-colors duration-200",W.value===N.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"])},S(N.label),11,rs)),64))]),e("div",as,[e("button",{onClick:y[0]||(y[0]=N=>T.value=!T.value),class:U(["flex size-8 items-center justify-center rounded-md transition-colors duration-200",T.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:"거래량 표시/숨김"},[M(n(we),{class:"size-4"})],2),e("button",{onClick:y[1]||(y[1]=N=>E.value=!E.value),class:U(["flex size-8 items-center justify-center rounded-md transition-colors duration-200",E.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:"이동평균선 표시/숨김"},[M(n(Pe),{class:"size-4"})],2),e("button",{onClick:y[2]||(y[2]=N=>b.value=!b.value),class:U(["flex size-8 items-center justify-center rounded-md transition-colors duration-200",b.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:"RSI 지표 표시/숨김"},[M(n(rt),{class:"size-4"})],2),e("button",{onClick:ne,class:"flex size-8 items-center justify-center rounded-md bg-muted text-muted-foreground transition-colors duration-200 hover:bg-muted/90",title:"차트 내보내기"},[M(n(Ie),{class:"size-4"})]),e("button",{onClick:y[3]||(y[3]=N=>f.$emit("remove-chart")),class:"flex size-8 items-center justify-center rounded-md bg-destructive/10 text-destructive transition-colors duration-200 hover:bg-destructive/20",title:"차트 제거"},[M(n(Se),{class:"size-4"})])])])])]),e("div",ns,[H.value?(u(),h("div",ls,[e("div",is,[e("div",cs,[M(n(Pe),{class:"size-5 text-primary"}),e("h3",ds,S(((O=B.value.chart)==null?void 0:O.company)||"Chart"),1)]),e("span",us,S(((Y=B.value.chart)==null?void 0:Y.sector)||"Sector"),1)]),e("div",ms,[y[4]||(y[4]=e("span",{class:"text-muted-foreground"},"현재가:",-1)),e("span",vs,S(se(H.value.close))+"원",1)]),e("div",fs,[y[5]||(y[5]=e("span",{class:"text-muted-foreground"},"변동:",-1)),e("span",{class:U(d(H.value.change))},S(H.value.change>0?"+":"")+S(se(H.value.change))+"원 ("+S(H.value.changePercent>0?"+":"")+S(H.value.changePercent.toFixed(2))+"%) ",3)]),e("div",gs,[y[6]||(y[6]=e("span",{class:"text-muted-foreground"},"거래량:",-1)),e("span",ps,S(A(H.value.volume)),1)])])):X("",!0),e("div",hs,[e("div",null,[y[7]||(y[7]=e("span",{class:"block text-muted-foreground"},"최고가",-1)),e("span",xs,S(se(ee.value.high))+"원",1)]),e("div",null,[y[8]||(y[8]=e("span",{class:"block text-muted-foreground"},"최저가",-1)),e("span",bs,S(se(ee.value.low))+"원",1)]),e("div",null,[y[9]||(y[9]=e("span",{class:"block text-muted-foreground"},"평균 거래량",-1)),e("span",ys,S(A(ee.value.avgVolume)),1)]),e("div",null,[y[10]||(y[10]=e("span",{class:"block text-muted-foreground"},"변동성",-1)),e("span",ks,S(ee.value.volatility.toFixed(2))+"%",1)])])]),e("div",_s,[C.value?(u(),h("div",Cs,[...y[11]||(y[11]=[e("div",{class:"flex items-center gap-2"},[e("div",{class:"size-6 animate-spin rounded-full border-b-2 border-primary"}),e("span",{class:"text-muted-foreground"},"차트 로딩 중...")],-1)])])):X("",!0),e("div",$s,[M(n(De),{ref_key:"chartRef",ref:c,option:te.value,theme:"dark",class:"size-full",autoresize:"",onClick:w},null,8,["option"])]),b.value?(u(),h("div",Ds,[M(n(De),{ref_key:"rsiChartRef",ref:_,option:ie.value,theme:"dark",class:"size-full",autoresize:""},null,8,["option"])])):X("",!0)])])}}},Ss={class:"mb-4 rounded-lg border border-border bg-card p-4"},zs={class:"flex flex-wrap items-center gap-4"},As={class:"flex items-center gap-2"},Ms=["placeholder"],Ls={class:"flex items-center gap-2"},Rs=["placeholder"],Ps=["disabled"],js={key:0,class:"mt-2"},Is={__name:"DateRangeFilter",setup(V){const o=be(),j=I(""),p=I(""),c=q(()=>{if(!o.stockData)return{min:"",max:""};let E=null,b=null;return Object.values(o.stockData).forEach(C=>{Object.values(C).forEach(v=>{if(Array.isArray(v)&&v.length>0){const F=v.map(H=>new Date(H.Date)),B=new Date(Math.min(...F)),P=new Date(Math.max(...F));(!E||B<E)&&(E=B),(!b||P>b)&&(b=P)}})}),console.log("계산된 날짜 범위:",{min:E?E.toISOString().split("T")[0]:"",max:b?b.toISOString().split("T")[0]:""}),{min:E?E.toISOString().split("T")[0]:"",max:b?b.toISOString().split("T")[0]:""}}),_=q(()=>{if(!j.value||!p.value)return!1;const E=/^\d{4}-\d{2}-\d{2}$/;if(!E.test(j.value)||!E.test(p.value))return!1;const b=new Date(j.value),C=new Date(p.value);return isNaN(b.getTime())||isNaN(C.getTime())?!1:b<=C}),W=async()=>{await o.loadStockData(),await Me(),j.value=c.value.min,p.value=c.value.max,console.log("기본값 복원 완료:",{min:c.value.min,max:c.value.max,startDate:j.value,endDate:p.value})},T=async()=>{_.value&&await o.filterDataByDateRange(j.value,p.value)};return ge(async()=>{o.stockData||await o.loadStockData(),console.log("availableDateRange:",c.value),console.log("stockStore.stockData:",o.stockData),c.value.min&&c.value.max?(j.value=c.value.min,p.value=c.value.max,console.log("초기값 설정됨:",j.value,p.value)):console.log("availableDateRange가 비어있음")}),_e(()=>o.stockData,E=>{E&&c.value.min&&c.value.max&&(j.value||(j.value=c.value.min),p.value||(p.value=c.value.max))}),(E,b)=>(u(),h("div",Ss,[e("div",{class:"mb-3 flex items-center justify-between"},[b[2]||(b[2]=e("h3",{class:"text-lg font-semibold text-foreground"},"비교 기간 설정",-1)),e("button",{onClick:W,class:"rounded-md bg-muted px-3 py-1.5 text-sm font-medium text-muted-foreground transition-all duration-200 hover:bg-muted/90"}," 기본값 복원 ")]),e("div",zs,[e("div",As,[b[3]||(b[3]=e("label",{class:"text-sm font-medium text-foreground"},"비교 시작일:",-1)),xe(e("input",{"onUpdate:modelValue":b[0]||(b[0]=C=>j.value=C),type:"text",placeholder:c.value.min||"YYYY-MM-DD",class:"rounded-md border border-border bg-input px-3 py-1.5 text-sm text-foreground focus:border-ring focus:outline-none"},null,8,Ms),[[Ae,j.value]])]),e("div",Ls,[b[4]||(b[4]=e("label",{class:"text-sm font-medium text-foreground"},"비교 종료일:",-1)),xe(e("input",{"onUpdate:modelValue":b[1]||(b[1]=C=>p.value=C),type:"text",placeholder:c.value.max||"YYYY-MM-DD",class:"rounded-md border border-border bg-input px-3 py-1.5 text-sm text-foreground focus:border-ring focus:outline-none"},null,8,Rs),[[Ae,p.value]])]),e("button",{onClick:T,disabled:!_.value,class:"rounded-md bg-primary px-4 py-1.5 text-sm font-medium text-primary-foreground transition-all duration-200 hover:bg-primary/90 disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground"}," 적용 ",8,Ps)]),!_.value&&(j.value||p.value)?(u(),h("div",js,[...b[5]||(b[5]=[e("p",{class:"text-sm text-destructive"},"올바른 날짜 형식(YYYY-MM-DD)과 범위를 입력해주세요.",-1)])])):X("",!0)]))}},Es={class:"overflow-hidden rounded-xl border border-border bg-card"},Fs={class:"border-b border-border bg-muted/50 p-4"},Os={class:"flex flex-wrap items-center justify-between gap-4"},Ts={class:"flex items-center gap-3"},Bs={class:"rounded-full bg-primary/10 px-2 py-1 text-xs text-primary"},Vs={class:"flex items-center gap-2"},Ns={class:"flex items-center gap-2"},Us=["value"],Ys=["value"],Ws={class:"flex gap-1"},Gs=["onClick","title"],qs={class:"flex gap-1"},Xs=["onClick","title"],Hs={class:"mt-3 rounded-lg bg-background/50 p-3"},Zs={class:"flex items-center gap-2 text-sm"},Ks={class:"text-muted-foreground"},Js={key:0,class:"mt-2 text-xs text-yellow-600"},Qs={key:0,class:"py-16 text-center text-muted-foreground"},eo={key:1,class:"space-y-0"},to={class:"h-[500px]"},so={key:0,class:"h-64 border-t border-border"},oo={class:"border-t border-border bg-muted/30 p-4"},ro={class:"mb-3 flex items-center justify-between"},ao={class:"flex items-center gap-2 font-medium text-foreground"},no={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},lo={class:"mb-2 flex items-center gap-2"},io={class:"text-sm font-medium text-foreground"},co={key:0,class:"rounded bg-primary/10 px-1 py-0.5 text-xs text-primary"},uo={class:"space-y-1 text-xs"},mo={class:"text-muted-foreground"},vo={class:"flex justify-between"},fo={class:"font-medium text-foreground"},go={class:"flex justify-between"},po={key:0,class:"flex justify-between"},ho={class:"flex justify-between"},xo={class:"text-muted-foreground"},bo={class:"font-medium text-foreground"},yo={class:"mt-2 flex gap-1"},ko=["onClick"],_o=["onClick"],Co={class:"border-t border-border bg-background/50 p-4"},$o={class:"mb-3 flex items-center gap-2 font-medium text-foreground"},Do={class:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4"},wo={class:"rounded-lg border border-border bg-card p-3 text-center"},So={class:"text-lg font-semibold text-primary"},zo={class:"block text-xs text-muted-foreground"},Ao={class:"rounded-lg border border-border bg-card p-3 text-center"},Mo={class:"text-lg font-semibold text-destructive"},Lo={class:"block text-xs text-muted-foreground"},Ro={class:"rounded-lg border border-border bg-card p-3 text-center"},Po={class:"text-lg font-semibold text-accent"},jo={class:"rounded-lg border border-border bg-card p-3 text-center"},Io={class:"text-lg font-semibold text-foreground"},Eo={class:"mt-4 rounded-lg bg-muted/50 p-4"},Fo={class:"mb-2 font-medium text-foreground"},Oo={class:"text-sm text-muted-foreground"},To={__name:"ComparisonChart",setup(V){const o=be(),j=I(),p=I(),c=I("normalized"),_=I("line"),W=q(()=>o.activeCharts.filter(s=>s.isActive)),T=[{label:"정규화",value:"normalized",description:"기준점 100으로 정규화하여 상대적 성과 비교"},{label:"기준 대비",value:"relative",description:"선택된 기준 종목 대비 상대 성과 비교"},{label:"절대값",value:"absolute",description:"실제 주가를 그대로 비교"},{label:"상관관계",value:"correlation",description:"종목 간 상관관계 및 포트폴리오 분석"}],E=s=>{o.setBenchmarkChart(s||null)},b=[{label:"선형 차트",value:"line",icon:st}],C=q(()=>{const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return{};let t=[];switch(c.value){case"normalized":t=F(s);break;case"relative":t=B(s);break;case"absolute":t=P(s);break;case"correlation":t=H(s);break}return{backgroundColor:"transparent",animation:!0,animationDuration:1e3,title:{text:ne(),textStyle:{color:"#000000",fontSize:18,fontWeight:"bold"},left:"center",top:20},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#1f2937",color:"#ffffff"}},backgroundColor:"rgba(0, 0, 0, 0.9)",borderColor:"#ffffff",borderWidth:1,textStyle:{color:"#ffffff",fontSize:12},formatter:f()},legend:{data:s.charts.map(m=>m.company),textStyle:{color:"#000000",fontSize:14,fontWeight:"normal"},top:50,itemGap:20},grid:{left:"3%",right:"4%",bottom:"10%",top:"20%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:s.commonDates,axisLine:{lineStyle:{color:"#6b7280"}},axisLabel:{color:"#000000",fontSize:12}},yAxis:{type:"value",scale:!0,axisLine:{lineStyle:{color:"#6b7280"}},axisLabel:{color:"#000000",fontSize:12,formatter:y()},splitLine:{lineStyle:{color:"#4b5563",type:"dashed"}}},dataZoom:[{type:"inside",start:0,end:100}],series:t}}),v=q(()=>{if(c.value!=="correlation")return{};const s=o.comparisonData;if(!s||!s.charts||s.charts.length<2)return{};const t=A(s.charts),m=s.charts.map(a=>a.company);return{backgroundColor:"transparent",title:{text:"상관관계 히트맵",textStyle:{color:"#000000",fontSize:16,fontWeight:"bold"},left:"center"},tooltip:{position:"top",formatter:function(a){return`${m[a.data[1]]} vs ${m[a.data[0]]}<br/>상관계수: ${a.data[2].toFixed(3)}`}},grid:{height:"80%",top:"10%"},xAxis:{type:"category",data:m,splitArea:{show:!0},axisLabel:{color:"#000000",fontSize:12}},yAxis:{type:"category",data:m,splitArea:{show:!0},axisLabel:{color:"#000000",fontSize:12}},visualMap:{min:-1,max:1,calculable:!0,orient:"horizontal",left:"center",bottom:"5%",inRange:{color:["#3b82f6","#ffffff","#ef4444"]},textStyle:{color:"#ffffff",fontSize:12}},series:[{name:"상관관계",type:"heatmap",data:t,label:{show:!0,color:"#000000",fontSize:12,fontWeight:"bold",formatter:"{c}"},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}),F=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.normalizedPrices,smooth:_.value==="line",lineStyle:{width:t.isBenchmark?4:2,color:t.color,type:(t.isBenchmark,"solid")},itemStyle:{color:t.color},emphasis:{focus:"series"}})),B=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.relativePrices||t.normalizedPrices,smooth:_.value==="line",lineStyle:{width:t.isBenchmark?4:2,color:t.color,type:(t.isBenchmark,"solid")},itemStyle:{color:t.color},emphasis:{focus:"series"}})),P=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.closes,smooth:_.value==="line",lineStyle:{width:2,color:t.color},itemStyle:{color:t.color},emphasis:{focus:"series"}})),H=s=>s.charts.map(t=>({name:t.company,type:_.value,data:t.normalizedPrices,smooth:!0,lineStyle:{width:t.isBenchmark?4:2,color:t.color},itemStyle:{color:t.color}})),ee=s=>s?Number(s).toLocaleString():"0",te=s=>{if(!s||s.length===0)return"0.00";const t=s[0],a=(s[s.length-1]-t)/t*100;return a>=0?`+${a.toFixed(2)}`:a.toFixed(2)},ie=s=>{if(!s.relativePrices||s.relativePrices.length===0)return"0.00";const t=s.relativePrices[0],a=s.relativePrices[s.relativePrices.length-1]-t;return a>=0?`+${a.toFixed(2)}`:a.toFixed(2)},se=s=>{const t=parseFloat(s);return t>0?"text-primary":t<0?"text-destructive":"text-muted-foreground"},A=s=>{const t=[];for(let m=0;m<s.length;m++)for(let a=0;a<s.length;a++){const G=d(s[m].normalizedPrices,s[a].normalizedPrices);t.push([m,a,G])}return t},d=(s,t)=>{const m=Math.min(s.length,t.length),a=s.slice(0,m).reduce((g,$)=>g+$,0),G=t.slice(0,m).reduce((g,$)=>g+$,0),ce=s.slice(0,m).reduce((g,$,x)=>g+$*t[x],0),Ce=s.slice(0,m).reduce((g,$)=>g+$*$,0),r=t.slice(0,m).reduce((g,$)=>g+$*$,0),l=m*ce-a*G,i=Math.sqrt((m*Ce-a*a)*(m*r-G*G));return i===0?0:l/i},w=()=>{var s;return((s=T.find(t=>t.value===c.value))==null?void 0:s.description)||""},ne=()=>{var t;const s=T.find(m=>m.value===c.value);if(c.value==="relative"&&o.benchmarkChart){const m=(t=o.comparisonData)==null?void 0:t.benchmarkData;return`${(m==null?void 0:m.company)||"기준 종목"} 기준 상대 성과 분석`}return`${s==null?void 0:s.label} 기반 주식 비교 분석`},f=()=>function(s){let t='<div style="font-size: 12px;">';return t+=`<div style="margin-bottom: 8px; font-weight: bold;">${s[0].axisValue}</div>`,s.forEach(m=>{let a,G;switch(c.value){case"normalized":a=m.value.toFixed(2),G="";break;case"relative":a=m.value.toFixed(2),G=o.benchmarkChart?" (기준 대비)":"";break;case"absolute":a=ee(m.value),G="원";break;default:a=m.value.toFixed(2),G=""}t+=`
        <div style="display: flex; align-items: center; margin-bottom: 4px;">
          <div style="width: 10px; height: 10px; background-color: ${m.color}; margin-right: 8px;"></div>
          <span>${m.seriesName}: ${a}${G}</span>
        </div>
      `}),t+="</div>",t},y=()=>function(s){switch(c.value){case"normalized":return s.toFixed(0);case"relative":return s.toFixed(0);case"absolute":return ee(s);default:return s.toFixed(2)}},O=()=>{switch(c.value){case"correlation":return"평균 상관계수";default:return"정규화 값"}},Y=(s,t)=>{var m;switch(c.value){case"correlation":{const a=o.comparisonData;if(!a||a.charts.length<2)return"N/A";let G=0,ce=0;return a.charts.forEach((Ce,r)=>{r!==t&&(G+=d(s.normalizedPrices,Ce.normalizedPrices),ce++)}),ce>0?(G/ce).toFixed(3):"N/A"}default:return((m=s.normalizedPrices[s.normalizedPrices.length-1])==null?void 0:m.toFixed(2))||"N/A"}},N=()=>{const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return{company:"-",return:"0.00"};let t={company:"",return:-1/0};return s.charts.forEach(m=>{const a=parseFloat(te(m.normalizedPrices));a>t.return&&(t={company:m.company,return:a.toFixed(2)})}),t},K=()=>{const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return{company:"-",return:"0.00"};let t={company:"",return:1/0};return s.charts.forEach(m=>{const a=parseFloat(te(m.normalizedPrices));a<t.return&&(t={company:m.company,return:a.toFixed(2)})}),t},me=()=>{const s=o.comparisonData;return!s||!s.charts||s.charts.length===0?"0.00":(s.charts.reduce((m,a)=>m+parseFloat(te(a.normalizedPrices)),0)/s.charts.length).toFixed(2)},ve=()=>{const s=o.comparisonData;if(!s||!s.commonDates||s.commonDates.length===0)return"-";const t=s.commonDates[0],m=s.commonDates[s.commonDates.length-1];return`${t.slice(5)} ~ ${m.slice(5)}`},ye=()=>{var t;const s=o.comparisonData;if(!s||!s.charts||s.charts.length===0)return"분석할 데이터가 없습니다.";switch(c.value){case"normalized":return`정규화 분석: 모든 종목을 동일한 기준점(100)에서 시작하여 상대적 성과를 비교합니다. 가장 높은 수익률은 ${N().return}%, 가장 낮은 수익률은 ${K().return}%입니다.`;case"relative":return`기준 대비 분석: ${((t=s.benchmarkData)==null?void 0:t.company)||"기준 종목"}을 기준으로 다른 종목들의 상대적 성과를 비교합니다. 기준 종목 대비 초과 수익률을 확인할 수 있어 액티브 투자 성과 평가에 유용합니다.`;case"absolute":return"절대값 분석: 실제 주가를 그대로 비교하여 절대적 가격 변화를 분석합니다. 고가주와 저가주 간의 실제 가격 차이를 확인할 수 있습니다.";case"correlation":return"상관관계 분석: 종목 간 상관관계를 분석하여 포트폴리오 다각화 효과를 평가합니다. 상관계수가 낮은 종목들로 구성하면 리스크 분산 효과를 얻을 수 있습니다.";default:return"분석 결과를 표시할 수 없습니다."}},Q=()=>{o.exportComparisonData("csv")};return _e(()=>o.comparisonMode,s=>{s&&o.comparisonCharts.length>=1&&(c.value="correlation")},{immediate:!0}),_e(()=>o.comparisonCharts.length,s=>{o.comparisonMode&&s>=1&&(c.value="correlation")},{immediate:!0}),ge(()=>{o.comparisonMode&&o.comparisonCharts.length>=1&&(c.value="correlation")}),(s,t)=>{var m;return u(),h("div",Es,[M(Is),e("div",Fs,[e("div",Os,[e("div",Ts,[M(n(we),{class:"size-5 text-primary"}),t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-foreground"},"다중 주식 비교 차트",-1)),e("span",Bs,S(n(o).comparisonCharts.length)+"개 종목 비교 ",1)]),e("div",Vs,[e("div",Ns,[t[6]||(t[6]=e("span",{class:"text-sm text-muted-foreground"},"기준:",-1)),e("select",{value:n(o).benchmarkChart,onChange:t[0]||(t[0]=a=>E(a.target.value)),class:"rounded-md border-border bg-muted px-2 py-1 text-xs text-muted-foreground transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary"},[t[5]||(t[5]=e("option",{value:""},"선택안함",-1)),(u(!0),h(re,null,ae(W.value,a=>(u(),h("option",{key:a.id,value:a.id},S(a.company),9,Ys))),128))],40,Us)]),e("div",Ws,[(u(),h(re,null,ae(T,a=>e("button",{key:a.value,onClick:G=>c.value=a.value,class:U(["rounded-md px-3 py-1 text-xs transition-all duration-200",c.value===a.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:a.description},S(a.label),11,Gs)),64))]),e("div",qs,[(u(),h(re,null,ae(b,a=>e("button",{key:a.value,onClick:G=>_.value=a.value,class:U(["rounded-md p-2 transition-all duration-200",_.value===a.value?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/90"]),title:a.label},[(u(),fe(Te(a.icon),{class:"size-4"}))],10,Xs)),64))]),e("button",{onClick:Q,class:"rounded-md bg-muted p-2 text-muted-foreground transition-all duration-200 hover:bg-muted/90",title:"비교 데이터 내보내기"},[M(n(Ie),{class:"size-4"})]),e("button",{onClick:t[1]||(t[1]=a=>n(o).toggleComparisonMode()),class:"rounded-md bg-destructive/10 p-2 text-destructive transition-all duration-200 hover:bg-destructive/20",title:"비교 모드 종료"},[M(n(Se),{class:"size-4"})])])]),e("div",Hs,[e("div",Zs,[M(n(ot),{class:"size-4 text-primary"}),e("span",Ks,S(w()),1)]),c.value==="relative"&&!n(o).benchmarkChart?(u(),h("div",Js," ⚠️ 기준 대비 분석을 위해서는 먼저 기준 종목을 선택해주세요. ")):X("",!0)])]),e("div",null,[!n(o).comparisonData||n(o).comparisonCharts.length===0?(u(),h("div",Qs,[M(n(we),{class:"mx-auto mb-4 size-16 text-muted-foreground/50"}),t[7]||(t[7]=e("h3",{class:"mb-2 text-lg font-medium"},"비교할 종목을 선택하세요",-1)),t[8]||(t[8]=e("p",{class:"mb-2 text-sm"},"차트에서 비교하고 싶은 종목들을 클릭하여 선택할 수 있습니다.",-1)),t[9]||(t[9]=e("p",{class:"text-xs text-muted-foreground/70"},"최대 4개 종목까지 비교 가능합니다.",-1))])):(u(),h("div",eo,[e("div",to,[M(n(De),{ref_key:"comparisonChartRef",ref:j,option:C.value,theme:"dark",class:"size-full",autoresize:""},null,8,["option"])]),c.value==="correlation"?(u(),h("div",so,[M(n(De),{ref_key:"correlationChartRef",ref:p,option:v.value,theme:"dark",class:"size-full",autoresize:""},null,8,["option"])])):X("",!0),e("div",oo,[e("div",ro,[e("h4",ao,[M(n(ut),{class:"size-4"}),t[10]||(t[10]=oe(" 비교 종목 정보 ",-1))]),e("button",{onClick:t[2]||(t[2]=a=>n(o).clearComparison()),class:"p-1 text-muted-foreground transition-colors duration-200 hover:text-destructive"},[M(n(Ne),{class:"size-4"})])]),e("div",no,[(u(!0),h(re,null,ae(((m=n(o).comparisonData)==null?void 0:m.charts)||[],(a,G)=>(u(),h("div",{key:a.id,class:U(["rounded-lg border border-border bg-background p-3",a.isBenchmark?"border-primary ring-1 ring-primary/20":""])},[e("div",lo,[e("div",{class:"size-3 rounded-full",style:Be({backgroundColor:a.color})},null,4),e("span",io,S(a.company),1),a.isBenchmark?(u(),h("span",co,"기준")):X("",!0)]),e("div",uo,[e("div",mo,S(a.sector),1),e("div",vo,[t[11]||(t[11]=e("span",{class:"text-muted-foreground"},"현재가:",-1)),e("span",fo,S(ee(a.closes[a.closes.length-1]))+"원",1)]),e("div",go,[t[12]||(t[12]=e("span",{class:"text-muted-foreground"},"수익률:",-1)),e("span",{class:U(se(te(a.normalizedPrices)))},S(te(a.normalizedPrices))+"% ",3)]),!a.isBenchmark&&n(o).benchmarkChart?(u(),h("div",po,[t[13]||(t[13]=e("span",{class:"text-muted-foreground"},"상대수익률:",-1)),e("span",{class:U(se(ie(a)))},S(ie(a))+"% ",3)])):X("",!0),e("div",ho,[e("span",xo,S(O())+":",1),e("span",bo,S(Y(a,G)),1)])]),e("div",yo,[a.isBenchmark?X("",!0):(u(),h("button",{key:0,onClick:ce=>n(o).setBenchmarkChart(a.id),class:"flex-1 rounded bg-primary/10 p-1 text-xs text-primary transition-colors duration-200 hover:bg-primary/20"}," 기준 설정 ",8,ko)),a.isBenchmark?(u(),h("button",{key:1,onClick:t[3]||(t[3]=ce=>n(o).setBenchmarkChart(null)),class:"flex-1 rounded bg-yellow-500/10 p-1 text-xs text-yellow-600 transition-colors duration-200 hover:bg-yellow-500/20"}," 기준 해제 ")):X("",!0),e("button",{onClick:ce=>n(o).toggleComparisonChart(a.id),class:"flex-1 rounded bg-destructive/10 p-1 text-xs text-destructive transition-colors duration-200 hover:bg-destructive/20"}," 제거 ",8,_o)])],2))),128))])]),e("div",Co,[e("h4",$o,[M(n(Pe),{class:"size-4"}),t[14]||(t[14]=oe(" 분석 결과 ",-1))]),e("div",Do,[e("div",wo,[t[15]||(t[15]=e("span",{class:"mb-1 block text-muted-foreground"},"최고 수익률",-1)),e("span",So,S(N().return)+"%",1),e("span",zo,S(N().company),1)]),e("div",Ao,[t[16]||(t[16]=e("span",{class:"mb-1 block text-muted-foreground"},"최저 수익률",-1)),e("span",Mo,S(K().return)+"%",1),e("span",Lo,S(K().company),1)]),e("div",Ro,[t[17]||(t[17]=e("span",{class:"mb-1 block text-muted-foreground"},"평균 수익률",-1)),e("span",Po,S(me())+"%",1),t[18]||(t[18]=e("span",{class:"block text-xs text-muted-foreground"},"전체 평균",-1))]),e("div",jo,[t[19]||(t[19]=e("span",{class:"mb-1 block text-muted-foreground"},"비교 기간",-1)),e("span",Io,S(ve()),1),t[20]||(t[20]=e("span",{class:"block text-xs text-muted-foreground"},"데이터 기간",-1))])]),e("div",Eo,[e("h5",Fo,S(c.value.toUpperCase())+" 분석 결과",1),e("div",Oo,S(ye()),1)])])]))])])}}},Bo={class:"flex items-center gap-3 rounded-lg bg-primary/5 p-3 transition-colors hover:bg-primary/10"},Vo={class:"text-muted-foreground"},No={__name:"FeatureCard",props:{text:{type:String,required:!0}},setup(V){return(o,j)=>(u(),h("div",Bo,[M(n(Ue),{class:"size-5 shrink-0 text-primary"}),e("span",Vo,S(V.text),1)]))}},Uo={class:"flex h-full items-center justify-center p-8"},Yo={class:"max-w-lg text-center"},Wo={class:"mx-auto mb-8 flex size-24 items-center justify-center rounded-full bg-primary/10"},Go={class:"grid grid-cols-1 gap-4 text-sm"},qo={__name:"EmptyChartState",setup(V){const o=[{text:"최대 6개 차트 동시 분석 및 비교"},{text:"다중 종목 상대 성과 비교"},{text:"차트 데이터 내보내기 및 분석 도구"}];return(j,p)=>(u(),h("div",Uo,[e("div",Yo,[e("div",Wo,[M(n(we),{class:"size-12 text-primary/60"})]),p[0]||(p[0]=e("h3",{class:"mb-4 text-2xl font-bold text-foreground"},"차트 분석을 시작하세요",-1)),p[1]||(p[1]=e("p",{class:"mb-8 leading-relaxed text-muted-foreground"}," 왼쪽 패널에서 관심있는 기업을 선택하면 실시간 캔들스틱 차트와 상세한 분석 도구가 여기에 표시됩니다. ",-1)),e("div",Go,[(u(),h(re,null,ae(o,c=>M(No,{key:c.text,text:c.text},null,8,["text"])),64))])])]))}},Xo={key:0,class:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm"},Ho={__name:"LoadingOverlay",setup(V){const o=I(!1);return ge(()=>{o.value=!0}),(j,p)=>(u(),fe(He,{to:"body"},[M(Re,{name:"fade",appear:""},{default:Le(()=>[o.value?(u(),h("div",Xo,[...p[0]||(p[0]=[e("div",{class:"absolute inset-0 bg-background/80"},null,-1),e("div",{class:"relative z-10 text-center"},[e("div",{class:"mx-auto mb-6 flex size-16 items-center justify-center rounded-full bg-primary/10"},[e("div",{class:"size-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})]),e("h3",{class:"mb-2 text-lg font-semibold text-foreground"},"데이터 로딩 중"),e("p",{class:"text-sm text-muted-foreground"},"잠시만 기다려주세요...")],-1)])])):X("",!0)]),_:1})]))}},Zo=je(Ho,[["__scopeId","data-v-c8aae2d7"]]),Ko={class:"flex h-full rounded-2xl bg-background text-foreground"},Jo={class:"flex-1 overflow-y-auto"},Qo={class:"flex flex-1 flex-col rounded-r-2xl bg-background"},er={class:"flex flex-1 flex-col overflow-hidden"},tr={class:"flex-1 overflow-y-auto"},sr={key:0,class:"mb-6 rounded-xl border border-border/50 bg-card/50 backdrop-blur-sm"},or={key:2,class:"space-y-6"},rr={key:0,class:"border-t border-border/50 bg-card/80 p-6 backdrop-blur-sm"},ar={class:"flex flex-wrap items-center justify-between gap-6"},nr={class:"flex flex-wrap items-center gap-6"},lr={class:"flex items-center gap-2 text-sm font-semibold text-foreground"},ir={class:"rounded-full bg-primary/10 p-2"},cr={class:"flex flex-wrap gap-4"},dr={class:"flex cursor-pointer items-center gap-3 text-sm font-medium text-foreground transition-colors hover:text-primary"},ur={class:"flex cursor-pointer items-center gap-3 text-sm font-medium text-foreground transition-colors hover:text-primary"},mr={class:"flex cursor-pointer items-center gap-3 text-sm font-medium text-foreground transition-colors hover:text-primary"},vr={class:"flex items-center gap-4"},fr={class:"flex gap-1 rounded-lg bg-muted/50 p-1"},gr=["onClick","title"],pr={class:"flex items-center gap-3"},hr={key:0,class:"absolute inset-y-0 left-0 w-80 max-w-[90vw] bg-background/95 backdrop-blur-md"},xr={class:"flex h-full flex-col"},br={class:"flex items-center justify-between border-b border-border/50 p-6"},yr={class:"flex-1 overflow-y-auto"},kr=250,_r={__name:"StockChartDashboard",setup(V){const o=be(),j=I("grid"),p=I(!1),c=I({showVolume:!0,showMA:!0,syncZoom:!1}),_=I(),W=I(320),T=I(!1),E=I(600),b=[{label:"그리드 레이아웃",value:"grid",icon:ct},{label:"단일 화면",value:"single",icon:dt},{label:"분할 화면",value:"split",icon:lt}],C=q(()=>o.activeCharts.filter(A=>A.isActive)),v=q(()=>{const A=C.value.length;return`grid gap-6 ${{single:"grid-cols-1",split:"grid-cols-1 lg:grid-cols-2",grid:A===1?"grid-cols-1":A===2?"grid-cols-1 lg:grid-cols-2":A===3?"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":A===4?"grid-cols-1 lg:grid-cols-2":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3"}[j.value]}`}),F=A=>{o.removeChart(A)},B=()=>{o.updateGlobalChartSettings(c.value)},P=()=>{o.activeCharts.forEach(A=>{A.isActive&&o.exportChartData(A.id,"csv")})},H=()=>{o.clearAllCharts()},ee=A=>{T.value=!0;const d=A.clientX,w=W.value,ne=y=>{if(!T.value)return;const O=y.clientX-d,Y=w+O;W.value=Math.max(kr,Math.min(Y,E.value))},f=()=>{T.value=!1,document.removeEventListener("mousemove",ne),document.removeEventListener("mouseup",f),document.body.style.cursor="",document.body.style.userSelect=""};document.addEventListener("mousemove",ne),document.addEventListener("mouseup",f),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},te=()=>{E.value=Math.floor(window.innerWidth/2),W.value>E.value&&(W.value=E.value)};_e(c,A=>{o.updateGlobalChartSettings(A)},{deep:!0});const ie=A=>{if(A.ctrlKey||A.metaKey)switch(A.key){case"e":A.preventDefault(),P();break;case"r":A.preventDefault(),H();break;case"m":A.preventDefault(),p.value=!p.value;break}A.key==="Escape"&&p.value&&(p.value=!1)},se=()=>{window.innerWidth>=1024&&(p.value=!1),te()};return ge(()=>{o.stockData||o.loadStockData(),te(),document.addEventListener("keydown",ie),window.addEventListener("resize",se)}),Ze(()=>{document.removeEventListener("keydown",ie),window.removeEventListener("resize",se)}),(A,d)=>(u(),h("div",Ko,[e("div",{ref_key:"sidebarRef",ref:_,style:Be({width:W.value+"px"}),class:U(["relative hidden rounded-2xl transition-none lg:flex lg:flex-col","border-r border-border/50 bg-card backdrop-blur-sm",{"select-none":T.value}])},[e("div",Jo,[M(Oe)]),e("div",{onMousedown:ee,class:U(["group absolute right-0 top-0 h-full w-2 cursor-col-resize bg-transparent transition-colors duration-200 hover:bg-primary/10",{"bg-primary/20":T.value}]),title:"사이드바 너비 조절"},[...d[5]||(d[5]=[e("div",{class:"absolute right-0.5 top-1/2 h-8 w-0.5 -translate-y-1/2 rounded bg-border transition-colors duration-200 group-hover:bg-primary"},null,-1)])],34)],6),e("div",Qo,[e("div",er,[e("div",tr,[n(o).comparisonMode?(u(),h("div",sr,[M(To)])):X("",!0),n(o).activeCharts.length===0?(u(),fe(qo,{key:1})):(u(),h("div",or,[e("div",{class:U(v.value)},[(u(!0),h(re,null,ae(C.value,w=>(u(),h("div",{key:w.id,class:U([{"opacity-60":!w.isActive}])},[M(ws,{"chart-id":w.id,onRemoveChart:ne=>F(w.id),class:"rounded-xl border border-border/50 bg-card/80 shadow-sm backdrop-blur-sm"},null,8,["chart-id","onRemoveChart"])],2))),128))],2)]))])]),n(o).activeCharts.length>0?(u(),h("div",rr,[e("div",ar,[e("div",nr,[e("div",lr,[e("div",ir,[M(n(et),{class:"size-4 text-primary"})]),d[6]||(d[6]=oe(" 전역 설정 ",-1))]),e("div",cr,[e("label",dr,[xe(e("input",{"onUpdate:modelValue":d[0]||(d[0]=w=>c.value.showVolume=w),type:"checkbox",onChange:B,class:"size-4 rounded border-border bg-input text-primary transition-colors focus:ring-2 focus:ring-primary/50 focus:ring-offset-0"},null,544),[[ze,c.value.showVolume]]),d[7]||(d[7]=oe(" 거래량 표시 ",-1))]),e("label",ur,[xe(e("input",{"onUpdate:modelValue":d[1]||(d[1]=w=>c.value.showMA=w),type:"checkbox",onChange:B,class:"size-4 rounded border-border bg-input text-primary transition-colors focus:ring-2 focus:ring-primary/50 focus:ring-offset-0"},null,544),[[ze,c.value.showMA]]),d[8]||(d[8]=oe(" 이동평균선 ",-1))]),e("label",mr,[xe(e("input",{"onUpdate:modelValue":d[2]||(d[2]=w=>c.value.syncZoom=w),type:"checkbox",onChange:B,class:"size-4 rounded border-border bg-input text-primary transition-colors focus:ring-2 focus:ring-primary/50 focus:ring-offset-0"},null,544),[[ze,c.value.syncZoom]]),d[9]||(d[9]=oe(" 줌 동기화 ",-1))])])]),e("div",vr,[d[10]||(d[10]=e("div",{class:"text-sm font-semibold text-foreground"},"레이아웃",-1)),e("div",fr,[(u(),h(re,null,ae(b,w=>e("button",{key:w.value,onClick:ne=>j.value=w.value,class:U(["rounded-md p-2.5 transition-all duration-200",j.value===w.value?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-background hover:text-foreground"]),title:w.label},[(u(),fe(Te(w.icon),{class:"size-4"}))],10,gr)),64))])]),e("div",pr,[e("button",{onClick:P,class:"flex items-center gap-2 rounded-lg bg-primary px-4 py-2.5 text-sm font-semibold text-primary-foreground shadow-sm transition-all duration-200 hover:bg-primary/90 hover:shadow-md"},[M(n(Ie),{class:"size-4"}),d[11]||(d[11]=oe(" 내보내기 ",-1))]),e("button",{onClick:H,class:"flex items-center gap-2 rounded-lg border border-border bg-background px-4 py-2.5 text-sm font-semibold text-foreground shadow-sm transition-all duration-200 hover:bg-muted hover:shadow-md"},[M(n(Ve),{class:"size-4"}),d[12]||(d[12]=oe(" 초기화 ",-1))])])])])):X("",!0)]),M(Re,{name:"fade"},{default:Le(()=>[p.value?(u(),h("div",{key:0,class:"fixed inset-0 z-50 lg:hidden",onClick:d[4]||(d[4]=w=>p.value=!1)},[d[14]||(d[14]=e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm"},null,-1)),M(Re,{name:"slide-right"},{default:Le(()=>[p.value?(u(),h("div",hr,[e("div",xr,[e("div",br,[d[13]||(d[13]=e("h3",{class:"text-lg font-bold text-foreground"},"종목 선택",-1)),e("button",{onClick:d[3]||(d[3]=w=>p.value=!1),class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},[M(n(Se),{class:"size-5"})])]),e("div",yr,[M(Oe)])])])):X("",!0)]),_:1})])):X("",!0)]),_:1}),n(o).isLoading?(u(),fe(Zo,{key:0})):X("",!0)]))}},Cr=je(_r,[["__scopeId","data-v-eeecad56"]]),$r={class:"stock-chart-view"},Dr={__name:"StockChartView",setup(V){const o=be();return ge(()=>{o.stockData||o.loadStockData()}),(j,p)=>(u(),h("div",$r,[M(Cr)]))}},Lr=je(Dr,[["__scopeId","data-v-82facd6b"]]);export{Lr as default};
