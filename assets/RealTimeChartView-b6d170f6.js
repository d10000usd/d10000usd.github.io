import{W as y,r as V}from"./WebsocketConnector-8306f2c3.js";import{a as C,t as h}from"./telegramini-40e3a79c.js";import{r as i,f as m,l as T,w as x,z as S,_,g as O,o as r,c as g,a,t as l,n as E,u as o,F as M,p,k as v,q as W,b as I,d as b,e as B}from"./index-5d9bcfa2.js";const w="6"+h.t,R="1"+h.i,k=i(""),j=async t=>{try{const s=`
<span class="tg-spoiler">spoiler</span>
<b>Alarm</b> - <strong>Setting values enough</strong>
<i>Value changes </i> 
<tg-emoji emoji-id="5368324170671202286">👍</tg-emoji> 
<a href="https://d10000usd.github.io/TsWebsocket_main?message=%22KRW-BTC%22">Chart</a>
${JSON.stringify(t.text,null,2)}
`;if(s.length>1){const e=await C.post(`https://api.telegram.org/bot${w}/sendMessage`,{chat_id:R,text:s,parse_mode:"HTML"},{headers:{"Content-Type":"application/json"}});return!0}else return!1}catch(s){console.error("Error sending message:",s)}},d=async t=>{const e=await j({text:t});return k.value=e?"ok":"error",1};class ${constructor(s,e){this.coinlist=i(Object.assign([],s.message)),this.monitoringCoin=e.value.monitoringCoin,this.sortingOrderkey=i(e.value.sortingOrder),this.settingValue=i(e.value.settingValue),this.shouldExecute=e.value.shouldExecute,this.messageCounter=0,this.componentname=e.value.componentname,this.status=e.value.status,this.asc_desc=e.value.asc_desc,this.coinea=e.value.coinea,this.eta=e.value.eta,this.addRatio=e.value.addRatio,this.alarmSenddingEa=e.value.alarmSenddingEa}initialize(){this.logicInstance2=new y(this.coinlist.value,"TelegramAlarmLogic_RISE",this.sortingOrderkey.value,this.asc_desc,this.coinea,this.eta),this.ticker=m(()=>{var s;return(s=this.logicInstance2.sortedWsData.value[this.monitoringCoin])==null?void 0:s.code}),this.sortingOrderValue=m(()=>{var s,e;return(e=(s=this.logicInstance2.sortedWsData.value[this.monitoringCoin])==null?void 0:s[this.sortingOrderkey.value])==null?void 0:e.toFixed(2)}),this.telemsg=T({Status:this.status,assets:this.ticker,Comparekey:this.sortingOrderkey.value,sortingOrderValue:this.sortingOrderValue,settingValue:this.settingValue.value,execution:this.componentname}),x(()=>this.settingValue.value,s=>{this.telemsg.settingValue=s}),S(()=>{this.telemsg.sortingOrderValue>this.settingValue.value&&this.shouldExecute&&(this.shouldExecute=!1,setTimeout(()=>{this.sendMessageAndUpdateStatus(),this.messageCounter++,this.messageCounter===this.alarmSenddingEa&&(this.settingValue.value+=this.addRatio,this.messageCounter=0,this.telemsg["next Value"]=this.settingValue.value,this.sendMessageAndUpdateStatus(),delete this.telemsg["next Value"]),this.shouldExecute=!0},1e3))})}run(){this.initialize()}sendMessageAndUpdateStatus(){d(this.telemsg)}}const A=t=>(p("data-v-2d0b4d56"),t=t(),v(),t),L=A(()=>a("br",null,null,-1)),N={__name:"TelegramMsg_BTC",props:["message","takenconinticker","dictionarys","componentname"],setup(t){const s=t,e=i(k);let n={assets:s.dictionarys,execution:s.componentname};return O(()=>{d(n)}),(c,u)=>(r(),g(M,null,[a("button",{class:E(["telebtn",{greenBtn:e.value==="ok",redBtn:e.value==="error"}]),onClick:u[0]||(u[0]=D=>o(d)(o(n)))}," tele :: "+l(e.value),3),L],64))}},z=_(N,[["__scopeId","data-v-2d0b4d56"]]);const f=t=>(p("data-v-2f052ce8"),t=t(),v(),t),U={class:"body-full"},F={class:"spacing mb-11"},K={class:"c-custom-card"},H={class:"pre1"},q=f(()=>a("h2",null," Init ",-1)),J={class:"pre2"},G=f(()=>a("h2",null," SettingValue ",-1)),P="TsWebsocket_telegram",Q={__name:"TsWebsocket_telegram",props:{message:Object,pncounts:Object},setup(t){const s=t,e=i({monitoringCoin:"KRW-ETH",sortingOrder:"L52",settingValue:92.5,shouldExecute:!0,messageCounter:0,componentname:"TsWebsocket_telegram",status:"Rise Monitoring",asc_desc:"asc",coinea:130,eta:0,addRatio:.5,alarmSenddingEa:2}),n=new $(s,e);return n.run(),(c,u)=>(r(),g("body",U,[a("div",F,[a("div",K,[o(n).L52Changes>o(n).settingValue?(r(),W(z,{key:0,message:s.message,takenconinticker:c.KRW-c.BTC,dictionarys:o(n).telemsg,componentname:P},null,8,["message","takenconinticker","dictionarys"])):I("",!0),a("h1",null,l(e.value.status),1),a("pre",H,l(o(n).telemsg),1),q,a("pre",J,l(e.value),1),G,a("pre",null,[b(`sending Alarm  msg  to in ur telegram
          `),a("h3",null,l(o(n).telemsg.settingValue),1)])])])]))}},X=_(Q,[["__scopeId","data-v-2f052ce8"]]),Y={class:"container body-full"},Z=a("br",null,null,-1),ae={__name:"RealTimeChartView",setup(t){return(s,e)=>(r(),g("body",Y,[B(X,{message:o(V)},null,8,["message"]),b(),Z]))}};export{ae as default};
